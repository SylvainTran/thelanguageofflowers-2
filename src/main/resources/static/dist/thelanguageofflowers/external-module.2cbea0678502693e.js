!function(e,M){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?M(e,!0):function(k){if(!k.document)throw new Error("jQuery requires a window with a document");return M(k)}:M(e)}(typeof window<"u"?window:this,function(e,M){"use strict";var k=[],E=Object.getPrototypeOf,g=k.slice,V=k.flat?function(o){return k.flat.call(o)}:function(o){return k.concat.apply([],o)},S=k.push,w=k.indexOf,l={},m=l.toString,v=l.hasOwnProperty,b=v.toString,C=b.call(Object),L={},R=function(o){return"function"==typeof o&&"number"!=typeof o.nodeType&&"function"!=typeof o.item},X=function(o){return null!=o&&o===o.window},te=e.document,I={type:!0,src:!0,nonce:!0,noModule:!0};function re(o,y,p){var h,x,A=(p=p||te).createElement("script");if(A.text=o,y)for(h in I)(x=y[h]||y.getAttribute&&y.getAttribute(h))&&A.setAttribute(h,x);p.head.appendChild(A).parentNode.removeChild(A)}function ce(o){return null==o?o+"":"object"==typeof o||"function"==typeof o?l[m.call(o)]||"object":typeof o}var _=function(o,y){return new _.fn.init(o,y)};function pe(o){var y=!!o&&"length"in o&&o.length,p=ce(o);return!R(o)&&!X(o)&&("array"===p||0===y||"number"==typeof y&&0<y&&y-1 in o)}_.fn=_.prototype={jquery:"3.6.0",constructor:_,length:0,toArray:function(){return g.call(this)},get:function(o){return null==o?g.call(this):o<0?this[o+this.length]:this[o]},pushStack:function(o){var y=_.merge(this.constructor(),o);return y.prevObject=this,y},each:function(o){return _.each(this,o)},map:function(o){return this.pushStack(_.map(this,function(y,p){return o.call(y,p,y)}))},slice:function(){return this.pushStack(g.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(_.grep(this,function(o,y){return(y+1)%2}))},odd:function(){return this.pushStack(_.grep(this,function(o,y){return y%2}))},eq:function(o){var y=this.length,p=+o+(o<0?y:0);return this.pushStack(0<=p&&p<y?[this[p]]:[])},end:function(){return this.prevObject||this.constructor()},push:S,sort:k.sort,splice:k.splice},_.extend=_.fn.extend=function(){var o,y,p,h,x,A,N=arguments[0]||{},z=1,H=arguments.length,W=!1;for("boolean"==typeof N&&(W=N,N=arguments[z]||{},z++),"object"==typeof N||R(N)||(N={}),z===H&&(N=this,z--);z<H;z++)if(null!=(o=arguments[z]))for(y in o)h=o[y],"__proto__"!==y&&N!==h&&(W&&h&&(_.isPlainObject(h)||(x=Array.isArray(h)))?(p=N[y],A=x&&!Array.isArray(p)?[]:x||_.isPlainObject(p)?p:{},x=!1,N[y]=_.extend(W,A,h)):void 0!==h&&(N[y]=h));return N},_.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(o){throw new Error(o)},noop:function(){},isPlainObject:function(o){var y,p;return!(!o||"[object Object]"!==m.call(o)||(y=E(o))&&("function"!=typeof(p=v.call(y,"constructor")&&y.constructor)||b.call(p)!==C))},isEmptyObject:function(o){var y;for(y in o)return!1;return!0},globalEval:function(o,y,p){re(o,{nonce:y&&y.nonce},p)},each:function(o,y){var p,h=0;if(pe(o))for(p=o.length;h<p&&!1!==y.call(o[h],h,o[h]);h++);else for(h in o)if(!1===y.call(o[h],h,o[h]))break;return o},makeArray:function(o,y){var p=y||[];return null!=o&&(pe(Object(o))?_.merge(p,"string"==typeof o?[o]:o):S.call(p,o)),p},inArray:function(o,y,p){return null==y?-1:w.call(y,o,p)},merge:function(o,y){for(var p=+y.length,h=0,x=o.length;h<p;h++)o[x++]=y[h];return o.length=x,o},grep:function(o,y,p){for(var h=[],x=0,A=o.length,N=!p;x<A;x++)!y(o[x],x)!==N&&h.push(o[x]);return h},map:function(o,y,p){var h,x,A=0,N=[];if(pe(o))for(h=o.length;A<h;A++)null!=(x=y(o[A],A,p))&&N.push(x);else for(A in o)null!=(x=y(o[A],A,p))&&N.push(x);return V(N)},guid:1,support:L}),"function"==typeof Symbol&&(_.fn[Symbol.iterator]=k[Symbol.iterator]),_.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(o,y){l["[object "+y+"]"]=y.toLowerCase()});var me=function(o){var y,p,h,x,A,N,z,H,W,J,ie,Y,Z,_e,ve,de,He,Qe,_t,Me="sizzle"+1*new Date,Ce=o.document,ft=0,De=0,je=fr(),nr=fr(),ur=fr(),dt=fr(),jt=function(D,q){return D===q&&(ie=!0),0},Ut={}.hasOwnProperty,wt=[],Yt=wt.pop,xt=wt.push,Xe=wt.push,mt=wt.slice,ht=function(D,q){for(var B=0,ee=D.length;B<ee;B++)if(D[B]===q)return B;return-1},Ot="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ae="[\\x20\\t\\r\\n\\f]",Oe="(?:\\\\[\\da-fA-F]{1,6}"+Ae+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ke="\\["+Ae+"*("+Oe+")(?:"+Ae+"*([*^$|!~]?=)"+Ae+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Oe+"))|)"+Ae+"*\\]",vt=":("+Oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Ke+")*)|.*)\\)|)",Ge=new RegExp(Ae+"+","g"),gt=new RegExp("^"+Ae+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ae+"+$","g"),Gt=new RegExp("^"+Ae+"*,"+Ae+"*"),cr=new RegExp("^"+Ae+"*([>+~]|"+Ae+")"+Ae+"*"),zn=new RegExp(Ae+"|>"),Fn=new RegExp(vt),Hn=new RegExp("^"+Oe+"$"),yr={ID:new RegExp("^#("+Oe+")"),CLASS:new RegExp("^\\.("+Oe+")"),TAG:new RegExp("^("+Oe+"|[*])"),ATTR:new RegExp("^"+Ke),PSEUDO:new RegExp("^"+vt),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Ae+"*(even|odd|(([+-]|)(\\d*)n|)"+Ae+"*(?:([+-]|)"+Ae+"*(\\d+)|))"+Ae+"*\\)|)","i"),bool:new RegExp("^(?:"+Ot+")$","i"),needsContext:new RegExp("^"+Ae+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Ae+"*((?:-\\d)?\\d*)"+Ae+"*\\)|)(?=[^-]|$)","i")},jn=/HTML$/i,Xn=/^(?:input|select|textarea|button)$/i,Bn=/^h\d$/i,ir=/^[^{]+\{\s*\[native \w/,$n=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,kr=/[+~]/,Mt=new RegExp("\\\\[\\da-fA-F]{1,6}"+Ae+"?|\\\\([^\\r\\n\\f])","g"),Lt=function(D,q){var B="0x"+D.slice(1)-65536;return q||(B<0?String.fromCharCode(B+65536):String.fromCharCode(B>>10|55296,1023&B|56320))},un=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,cn=function(D,q){return q?"\0"===D?"\ufffd":D.slice(0,-1)+"\\"+D.charCodeAt(D.length-1).toString(16)+" ":"\\"+D},yn=function(){Y()},Wn=lr(function(D){return!0===D.disabled&&"fieldset"===D.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Xe.apply(wt=mt.call(Ce.childNodes),Ce.childNodes)}catch{Xe={apply:wt.length?function(q,B){xt.apply(q,mt.call(B))}:function(q,B){for(var ee=q.length,U=0;q[ee++]=B[U++];);q.length=ee-1}}}function Re(D,q,B,ee){var U,ae,oe,ue,le,Ee,be,xe=q&&q.ownerDocument,Ne=q?q.nodeType:9;if(B=B||[],"string"!=typeof D||!D||1!==Ne&&9!==Ne&&11!==Ne)return B;if(!ee&&(Y(q),q=q||Z,ve)){if(11!==Ne&&(le=$n.exec(D)))if(U=le[1]){if(9===Ne){if(!(oe=q.getElementById(U)))return B;if(oe.id===U)return B.push(oe),B}else if(xe&&(oe=xe.getElementById(U))&&_t(q,oe)&&oe.id===U)return B.push(oe),B}else{if(le[2])return Xe.apply(B,q.getElementsByTagName(D)),B;if((U=le[3])&&p.getElementsByClassName&&q.getElementsByClassName)return Xe.apply(B,q.getElementsByClassName(U)),B}if(p.qsa&&!dt[D+" "]&&(!de||!de.test(D))&&(1!==Ne||"object"!==q.nodeName.toLowerCase())){if(be=D,xe=q,1===Ne&&(zn.test(D)||cr.test(D))){for((xe=kr.test(D)&&Dr(q.parentNode)||q)===q&&p.scope||((ue=q.getAttribute("id"))?ue=ue.replace(un,cn):q.setAttribute("id",ue=Me)),ae=(Ee=N(D)).length;ae--;)Ee[ae]=(ue?"#"+ue:":scope")+" "+wr(Ee[ae]);be=Ee.join(",")}try{return Xe.apply(B,xe.querySelectorAll(be)),B}catch{dt(D,!0)}finally{ue===Me&&q.removeAttribute("id")}}}return H(D.replace(gt,"$1"),q,B,ee)}function fr(){var D=[];return function q(B,ee){return D.push(B+" ")>h.cacheLength&&delete q[D.shift()],q[B+" "]=ee}}function Ct(D){return D[Me]=!0,D}function At(D){var q=Z.createElement("fieldset");try{return!!D(q)}catch{return!1}finally{q.parentNode&&q.parentNode.removeChild(q),q=null}}function Nr(D,q){for(var B=D.split("|"),ee=B.length;ee--;)h.attrHandle[B[ee]]=q}function fn(D,q){var B=q&&D,ee=B&&1===D.nodeType&&1===q.nodeType&&D.sourceIndex-q.sourceIndex;if(ee)return ee;if(B)for(;B=B.nextSibling;)if(B===q)return-1;return D?1:-1}function Un(D){return function(q){return"input"===q.nodeName.toLowerCase()&&q.type===D}}function Yn(D){return function(q){var B=q.nodeName.toLowerCase();return("input"===B||"button"===B)&&q.type===D}}function wn(D){return function(q){return"form"in q?q.parentNode&&!1===q.disabled?"label"in q?"label"in q.parentNode?q.parentNode.disabled===D:q.disabled===D:q.isDisabled===D||q.isDisabled!==!D&&Wn(q)===D:q.disabled===D:"label"in q&&q.disabled===D}}function Xt(D){return Ct(function(q){return q=+q,Ct(function(B,ee){for(var U,ae=D([],B.length,q),oe=ae.length;oe--;)B[U=ae[oe]]&&(B[U]=!(ee[U]=B[U]))})})}function Dr(D){return D&&typeof D.getElementsByTagName<"u"&&D}for(y in p=Re.support={},A=Re.isXML=function(D){var B=D&&(D.ownerDocument||D).documentElement;return!jn.test(D&&D.namespaceURI||B&&B.nodeName||"HTML")},Y=Re.setDocument=function(D){var q,B,ee=D?D.ownerDocument||D:Ce;return ee!=Z&&9===ee.nodeType&&ee.documentElement&&(_e=(Z=ee).documentElement,ve=!A(Z),Ce!=Z&&(B=Z.defaultView)&&B.top!==B&&(B.addEventListener?B.addEventListener("unload",yn,!1):B.attachEvent&&B.attachEvent("onunload",yn)),p.scope=At(function(U){return _e.appendChild(U).appendChild(Z.createElement("div")),typeof U.querySelectorAll<"u"&&!U.querySelectorAll(":scope fieldset div").length}),p.attributes=At(function(U){return U.className="i",!U.getAttribute("className")}),p.getElementsByTagName=At(function(U){return U.appendChild(Z.createComment("")),!U.getElementsByTagName("*").length}),p.getElementsByClassName=ir.test(Z.getElementsByClassName),p.getById=At(function(U){return _e.appendChild(U).id=Me,!Z.getElementsByName||!Z.getElementsByName(Me).length}),p.getById?(h.filter.ID=function(U){var ae=U.replace(Mt,Lt);return function(oe){return oe.getAttribute("id")===ae}},h.find.ID=function(U,ae){if(typeof ae.getElementById<"u"&&ve){var oe=ae.getElementById(U);return oe?[oe]:[]}}):(h.filter.ID=function(U){var ae=U.replace(Mt,Lt);return function(oe){var ue=typeof oe.getAttributeNode<"u"&&oe.getAttributeNode("id");return ue&&ue.value===ae}},h.find.ID=function(U,ae){if(typeof ae.getElementById<"u"&&ve){var oe,ue,le,Ee=ae.getElementById(U);if(Ee){if((oe=Ee.getAttributeNode("id"))&&oe.value===U)return[Ee];for(le=ae.getElementsByName(U),ue=0;Ee=le[ue++];)if((oe=Ee.getAttributeNode("id"))&&oe.value===U)return[Ee]}return[]}}),h.find.TAG=p.getElementsByTagName?function(U,ae){return typeof ae.getElementsByTagName<"u"?ae.getElementsByTagName(U):p.qsa?ae.querySelectorAll(U):void 0}:function(U,ae){var oe,ue=[],le=0,Ee=ae.getElementsByTagName(U);if("*"===U){for(;oe=Ee[le++];)1===oe.nodeType&&ue.push(oe);return ue}return Ee},h.find.CLASS=p.getElementsByClassName&&function(U,ae){if(typeof ae.getElementsByClassName<"u"&&ve)return ae.getElementsByClassName(U)},He=[],de=[],(p.qsa=ir.test(Z.querySelectorAll))&&(At(function(U){var ae;_e.appendChild(U).innerHTML="<a id='"+Me+"'></a><select id='"+Me+"-\r\\' msallowcapture=''><option selected=''></option></select>",U.querySelectorAll("[msallowcapture^='']").length&&de.push("[*^$]="+Ae+"*(?:''|\"\")"),U.querySelectorAll("[selected]").length||de.push("\\["+Ae+"*(?:value|"+Ot+")"),U.querySelectorAll("[id~="+Me+"-]").length||de.push("~="),(ae=Z.createElement("input")).setAttribute("name",""),U.appendChild(ae),U.querySelectorAll("[name='']").length||de.push("\\["+Ae+"*name"+Ae+"*="+Ae+"*(?:''|\"\")"),U.querySelectorAll(":checked").length||de.push(":checked"),U.querySelectorAll("a#"+Me+"+*").length||de.push(".#.+[+~]"),U.querySelectorAll("\\\f"),de.push("[\\r\\n\\f]")}),At(function(U){U.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var ae=Z.createElement("input");ae.setAttribute("type","hidden"),U.appendChild(ae).setAttribute("name","D"),U.querySelectorAll("[name=d]").length&&de.push("name"+Ae+"*[*^$|!~]?="),2!==U.querySelectorAll(":enabled").length&&de.push(":enabled",":disabled"),_e.appendChild(U).disabled=!0,2!==U.querySelectorAll(":disabled").length&&de.push(":enabled",":disabled"),U.querySelectorAll("*,:x"),de.push(",.*:")})),(p.matchesSelector=ir.test(Qe=_e.matches||_e.webkitMatchesSelector||_e.mozMatchesSelector||_e.oMatchesSelector||_e.msMatchesSelector))&&At(function(U){p.disconnectedMatch=Qe.call(U,"*"),Qe.call(U,"[s!='']:x"),He.push("!=",vt)}),de=de.length&&new RegExp(de.join("|")),He=He.length&&new RegExp(He.join("|")),q=ir.test(_e.compareDocumentPosition),_t=q||ir.test(_e.contains)?function(U,ae){var oe=9===U.nodeType?U.documentElement:U,ue=ae&&ae.parentNode;return U===ue||!(!ue||1!==ue.nodeType||!(oe.contains?oe.contains(ue):U.compareDocumentPosition&&16&U.compareDocumentPosition(ue)))}:function(U,ae){if(ae)for(;ae=ae.parentNode;)if(ae===U)return!0;return!1},jt=q?function(U,ae){if(U===ae)return ie=!0,0;var oe=!U.compareDocumentPosition-!ae.compareDocumentPosition;return oe||(1&(oe=(U.ownerDocument||U)==(ae.ownerDocument||ae)?U.compareDocumentPosition(ae):1)||!p.sortDetached&&ae.compareDocumentPosition(U)===oe?U==Z||U.ownerDocument==Ce&&_t(Ce,U)?-1:ae==Z||ae.ownerDocument==Ce&&_t(Ce,ae)?1:J?ht(J,U)-ht(J,ae):0:4&oe?-1:1)}:function(U,ae){if(U===ae)return ie=!0,0;var oe,ue=0,le=U.parentNode,Ee=ae.parentNode,be=[U],xe=[ae];if(!le||!Ee)return U==Z?-1:ae==Z?1:le?-1:Ee?1:J?ht(J,U)-ht(J,ae):0;if(le===Ee)return fn(U,ae);for(oe=U;oe=oe.parentNode;)be.unshift(oe);for(oe=ae;oe=oe.parentNode;)xe.unshift(oe);for(;be[ue]===xe[ue];)ue++;return ue?fn(be[ue],xe[ue]):be[ue]==Ce?-1:xe[ue]==Ce?1:0}),Z},Re.matches=function(D,q){return Re(D,null,null,q)},Re.matchesSelector=function(D,q){if(Y(D),p.matchesSelector&&ve&&!dt[q+" "]&&(!He||!He.test(q))&&(!de||!de.test(q)))try{var B=Qe.call(D,q);if(B||p.disconnectedMatch||D.document&&11!==D.document.nodeType)return B}catch{dt(q,!0)}return 0<Re(q,Z,null,[D]).length},Re.contains=function(D,q){return(D.ownerDocument||D)!=Z&&Y(D),_t(D,q)},Re.attr=function(D,q){(D.ownerDocument||D)!=Z&&Y(D);var B=h.attrHandle[q.toLowerCase()],ee=B&&Ut.call(h.attrHandle,q.toLowerCase())?B(D,q,!ve):void 0;return void 0!==ee?ee:p.attributes||!ve?D.getAttribute(q):(ee=D.getAttributeNode(q))&&ee.specified?ee.value:null},Re.escape=function(D){return(D+"").replace(un,cn)},Re.error=function(D){throw new Error("Syntax error, unrecognized expression: "+D)},Re.uniqueSort=function(D){var q,B=[],ee=0,U=0;if(ie=!p.detectDuplicates,J=!p.sortStable&&D.slice(0),D.sort(jt),ie){for(;q=D[U++];)q===D[U]&&(ee=B.push(U));for(;ee--;)D.splice(B[ee],1)}return J=null,D},x=Re.getText=function(D){var q,B="",ee=0,U=D.nodeType;if(U){if(1===U||9===U||11===U){if("string"==typeof D.textContent)return D.textContent;for(D=D.firstChild;D;D=D.nextSibling)B+=x(D)}else if(3===U||4===U)return D.nodeValue}else for(;q=D[ee++];)B+=x(q);return B},(h=Re.selectors={cacheLength:50,createPseudo:Ct,match:yr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(D){return D[1]=D[1].replace(Mt,Lt),D[3]=(D[3]||D[4]||D[5]||"").replace(Mt,Lt),"~="===D[2]&&(D[3]=" "+D[3]+" "),D.slice(0,4)},CHILD:function(D){return D[1]=D[1].toLowerCase(),"nth"===D[1].slice(0,3)?(D[3]||Re.error(D[0]),D[4]=+(D[4]?D[5]+(D[6]||1):2*("even"===D[3]||"odd"===D[3])),D[5]=+(D[7]+D[8]||"odd"===D[3])):D[3]&&Re.error(D[0]),D},PSEUDO:function(D){var q,B=!D[6]&&D[2];return yr.CHILD.test(D[0])?null:(D[3]?D[2]=D[4]||D[5]||"":B&&Fn.test(B)&&(q=N(B,!0))&&(q=B.indexOf(")",B.length-q)-B.length)&&(D[0]=D[0].slice(0,q),D[2]=B.slice(0,q)),D.slice(0,3))}},filter:{TAG:function(D){var q=D.replace(Mt,Lt).toLowerCase();return"*"===D?function(){return!0}:function(B){return B.nodeName&&B.nodeName.toLowerCase()===q}},CLASS:function(D){var q=je[D+" "];return q||(q=new RegExp("(^|"+Ae+")"+D+"("+Ae+"|$)"))&&je(D,function(B){return q.test("string"==typeof B.className&&B.className||typeof B.getAttribute<"u"&&B.getAttribute("class")||"")})},ATTR:function(D,q,B){return function(ee){var U=Re.attr(ee,D);return null==U?"!="===q:!q||(U+="","="===q?U===B:"!="===q?U!==B:"^="===q?B&&0===U.indexOf(B):"*="===q?B&&-1<U.indexOf(B):"$="===q?B&&U.slice(-B.length)===B:"~="===q?-1<(" "+U.replace(Ge," ")+" ").indexOf(B):"|="===q&&(U===B||U.slice(0,B.length+1)===B+"-"))}},CHILD:function(D,q,B,ee,U){var ae="nth"!==D.slice(0,3),oe="last"!==D.slice(-4),ue="of-type"===q;return 1===ee&&0===U?function(le){return!!le.parentNode}:function(le,Ee,be){var xe,Ne,Ye,ke,et,rt,ot=ae!==oe?"nextSibling":"previousSibling",Ie=le.parentNode,Pt=ue&&le.nodeName.toLowerCase(),st=!be&&!ue,Je=!1;if(Ie){if(ae){for(;ot;){for(ke=le;ke=ke[ot];)if(ue?ke.nodeName.toLowerCase()===Pt:1===ke.nodeType)return!1;rt=ot="only"===D&&!rt&&"nextSibling"}return!0}if(rt=[oe?Ie.firstChild:Ie.lastChild],oe&&st){for(Je=(et=(xe=(Ne=(Ye=(ke=Ie)[Me]||(ke[Me]={}))[ke.uniqueID]||(Ye[ke.uniqueID]={}))[D]||[])[0]===ft&&xe[1])&&xe[2],ke=et&&Ie.childNodes[et];ke=++et&&ke&&ke[ot]||(Je=et=0)||rt.pop();)if(1===ke.nodeType&&++Je&&ke===le){Ne[D]=[ft,et,Je];break}}else if(st&&(Je=et=(xe=(Ne=(Ye=(ke=le)[Me]||(ke[Me]={}))[ke.uniqueID]||(Ye[ke.uniqueID]={}))[D]||[])[0]===ft&&xe[1]),!1===Je)for(;(ke=++et&&ke&&ke[ot]||(Je=et=0)||rt.pop())&&((ue?ke.nodeName.toLowerCase()!==Pt:1!==ke.nodeType)||!++Je||(st&&((Ne=(Ye=ke[Me]||(ke[Me]={}))[ke.uniqueID]||(Ye[ke.uniqueID]={}))[D]=[ft,Je]),ke!==le)););return(Je-=U)===ee||Je%ee==0&&0<=Je/ee}}},PSEUDO:function(D,q){var B,ee=h.pseudos[D]||h.setFilters[D.toLowerCase()]||Re.error("unsupported pseudo: "+D);return ee[Me]?ee(q):1<ee.length?(B=[D,D,"",q],h.setFilters.hasOwnProperty(D.toLowerCase())?Ct(function(U,ae){for(var oe,ue=ee(U,q),le=ue.length;le--;)U[oe=ht(U,ue[le])]=!(ae[oe]=ue[le])}):function(U){return ee(U,0,B)}):ee}},pseudos:{not:Ct(function(D){var q=[],B=[],ee=z(D.replace(gt,"$1"));return ee[Me]?Ct(function(U,ae,oe,ue){for(var le,Ee=ee(U,null,ue,[]),be=U.length;be--;)(le=Ee[be])&&(U[be]=!(ae[be]=le))}):function(U,ae,oe){return q[0]=U,ee(q,null,oe,B),q[0]=null,!B.pop()}}),has:Ct(function(D){return function(q){return 0<Re(D,q).length}}),contains:Ct(function(D){return D=D.replace(Mt,Lt),function(q){return-1<(q.textContent||x(q)).indexOf(D)}}),lang:Ct(function(D){return Hn.test(D||"")||Re.error("unsupported lang: "+D),D=D.replace(Mt,Lt).toLowerCase(),function(q){var B;do{if(B=ve?q.lang:q.getAttribute("xml:lang")||q.getAttribute("lang"))return(B=B.toLowerCase())===D||0===B.indexOf(D+"-")}while((q=q.parentNode)&&1===q.nodeType);return!1}}),target:function(D){var q=o.location&&o.location.hash;return q&&q.slice(1)===D.id},root:function(D){return D===_e},focus:function(D){return D===Z.activeElement&&(!Z.hasFocus||Z.hasFocus())&&!!(D.type||D.href||~D.tabIndex)},enabled:wn(!1),disabled:wn(!0),checked:function(D){var q=D.nodeName.toLowerCase();return"input"===q&&!!D.checked||"option"===q&&!!D.selected},selected:function(D){return!0===D.selected},empty:function(D){for(D=D.firstChild;D;D=D.nextSibling)if(D.nodeType<6)return!1;return!0},parent:function(D){return!h.pseudos.empty(D)},header:function(D){return Bn.test(D.nodeName)},input:function(D){return Xn.test(D.nodeName)},button:function(D){var q=D.nodeName.toLowerCase();return"input"===q&&"button"===D.type||"button"===q},text:function(D){var q;return"input"===D.nodeName.toLowerCase()&&"text"===D.type&&(null==(q=D.getAttribute("type"))||"text"===q.toLowerCase())},first:Xt(function(){return[0]}),last:Xt(function(D,q){return[q-1]}),eq:Xt(function(D,q,B){return[B<0?B+q:B]}),even:Xt(function(D,q){for(var B=0;B<q;B+=2)D.push(B);return D}),odd:Xt(function(D,q){for(var B=1;B<q;B+=2)D.push(B);return D}),lt:Xt(function(D,q,B){for(var ee=B<0?B+q:q<B?q:B;0<=--ee;)D.push(ee);return D}),gt:Xt(function(D,q,B){for(var ee=B<0?B+q:B;++ee<q;)D.push(ee);return D})}}).pseudos.nth=h.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})h.pseudos[y]=Un(y);for(y in{submit:!0,reset:!0})h.pseudos[y]=Yn(y);function ln(){}function wr(D){for(var q=0,B=D.length,ee="";q<B;q++)ee+=D[q].value;return ee}function lr(D,q,B){var ee=q.dir,U=q.next,ae=U||ee,oe=B&&"parentNode"===ae,ue=De++;return q.first?function(le,Ee,be){for(;le=le[ee];)if(1===le.nodeType||oe)return D(le,Ee,be);return!1}:function(le,Ee,be){var xe,Ne,Ye,ke=[ft,ue];if(be){for(;le=le[ee];)if((1===le.nodeType||oe)&&D(le,Ee,be))return!0}else for(;le=le[ee];)if(1===le.nodeType||oe)if(Ne=(Ye=le[Me]||(le[Me]={}))[le.uniqueID]||(Ye[le.uniqueID]={}),U&&U===le.nodeName.toLowerCase())le=le[ee]||le;else{if((xe=Ne[ae])&&xe[0]===ft&&xe[1]===ue)return ke[2]=xe[2];if((Ne[ae]=ke)[2]=D(le,Ee,be))return!0}return!1}}function Or(D){return 1<D.length?function(q,B,ee){for(var U=D.length;U--;)if(!D[U](q,B,ee))return!1;return!0}:D[0]}function pr(D,q,B,ee,U){for(var ae,oe=[],ue=0,le=D.length,Ee=null!=q;ue<le;ue++)(ae=D[ue])&&(B&&!B(ae,ee,U)||(oe.push(ae),Ee&&q.push(ue)));return oe}function Pr(D,q,B,ee,U,ae){return ee&&!ee[Me]&&(ee=Pr(ee)),U&&!U[Me]&&(U=Pr(U,ae)),Ct(function(oe,ue,le,Ee){var be,xe,Ne,Ye=[],ke=[],et=ue.length,rt=oe||function(Pt,st,Je){for(var kt=0,_r=st.length;kt<_r;kt++)Re(Pt,st[kt],Je);return Je}(q||"*",le.nodeType?[le]:le,[]),ot=!D||!oe&&q?rt:pr(rt,Ye,D,le,Ee),Ie=B?U||(oe?D:et||ee)?[]:ue:ot;if(B&&B(ot,Ie,le,Ee),ee)for(be=pr(Ie,ke),ee(be,[],le,Ee),xe=be.length;xe--;)(Ne=be[xe])&&(Ie[ke[xe]]=!(ot[ke[xe]]=Ne));if(oe){if(U||D){if(U){for(be=[],xe=Ie.length;xe--;)(Ne=Ie[xe])&&be.push(ot[xe]=Ne);U(null,Ie=[],be,Ee)}for(xe=Ie.length;xe--;)(Ne=Ie[xe])&&-1<(be=U?ht(oe,Ne):Ye[xe])&&(oe[be]=!(ue[be]=Ne))}}else Ie=pr(Ie===ue?Ie.splice(et,Ie.length):Ie),U?U(null,ue,Ie,Ee):Xe.apply(ue,Ie)})}function Mr(D){for(var q,B,ee,U=D.length,ae=h.relative[D[0].type],oe=ae||h.relative[" "],ue=ae?1:0,le=lr(function(xe){return xe===q},oe,!0),Ee=lr(function(xe){return-1<ht(q,xe)},oe,!0),be=[function(xe,Ne,Ye){var ke=!ae&&(Ye||Ne!==W)||((q=Ne).nodeType?le(xe,Ne,Ye):Ee(xe,Ne,Ye));return q=null,ke}];ue<U;ue++)if(B=h.relative[D[ue].type])be=[lr(Or(be),B)];else{if((B=h.filter[D[ue].type].apply(null,D[ue].matches))[Me]){for(ee=++ue;ee<U&&!h.relative[D[ee].type];ee++);return Pr(1<ue&&Or(be),1<ue&&wr(D.slice(0,ue-1).concat({value:" "===D[ue-2].type?"*":""})).replace(gt,"$1"),B,ue<ee&&Mr(D.slice(ue,ee)),ee<U&&Mr(D=D.slice(ee)),ee<U&&wr(D))}be.push(B)}return Or(be)}return ln.prototype=h.filters=h.pseudos,h.setFilters=new ln,N=Re.tokenize=function(D,q){var B,ee,U,ae,oe,ue,le,Ee=nr[D+" "];if(Ee)return q?0:Ee.slice(0);for(oe=D,ue=[],le=h.preFilter;oe;){for(ae in B&&!(ee=Gt.exec(oe))||(ee&&(oe=oe.slice(ee[0].length)||oe),ue.push(U=[])),B=!1,(ee=cr.exec(oe))&&(B=ee.shift(),U.push({value:B,type:ee[0].replace(gt," ")}),oe=oe.slice(B.length)),h.filter)!(ee=yr[ae].exec(oe))||le[ae]&&!(ee=le[ae](ee))||(B=ee.shift(),U.push({value:B,type:ae,matches:ee}),oe=oe.slice(B.length));if(!B)break}return q?oe.length:oe?Re.error(D):nr(D,ue).slice(0)},z=Re.compile=function(D,q){var B,ee,U,ae,oe,ue,le=[],Ee=[],be=ur[D+" "];if(!be){for(q||(q=N(D)),B=q.length;B--;)(be=Mr(q[B]))[Me]?le.push(be):Ee.push(be);(be=ur(D,(ee=Ee,ae=0<(U=le).length,oe=0<ee.length,ue=function(xe,Ne,Ye,ke,et){var rt,ot,Ie,Pt=0,st="0",Je=xe&&[],kt=[],_r=W,pn=xe||oe&&h.find.TAG("*",et),_n=ft+=null==_r?1:Math.random()||.1,Gn=pn.length;for(et&&(W=Ne==Z||Ne||et);st!==Gn&&null!=(rt=pn[st]);st++){if(oe&&rt){for(ot=0,Ne||rt.ownerDocument==Z||(Y(rt),Ye=!ve);Ie=ee[ot++];)if(Ie(rt,Ne||Z,Ye)){ke.push(rt);break}et&&(ft=_n)}ae&&((rt=!Ie&&rt)&&Pt--,xe&&Je.push(rt))}if(Pt+=st,ae&&st!==Pt){for(ot=0;Ie=U[ot++];)Ie(Je,kt,Ne,Ye);if(xe){if(0<Pt)for(;st--;)Je[st]||kt[st]||(kt[st]=Yt.call(ke));kt=pr(kt)}Xe.apply(ke,kt),et&&!xe&&0<kt.length&&1<Pt+U.length&&Re.uniqueSort(ke)}return et&&(ft=_n,W=_r),Je},ae?Ct(ue):ue))).selector=D}return be},H=Re.select=function(D,q,B,ee){var U,ae,oe,ue,le,Ee="function"==typeof D&&D,be=!ee&&N(D=Ee.selector||D);if(B=B||[],1===be.length){if(2<(ae=be[0]=be[0].slice(0)).length&&"ID"===(oe=ae[0]).type&&9===q.nodeType&&ve&&h.relative[ae[1].type]){if(!(q=(h.find.ID(oe.matches[0].replace(Mt,Lt),q)||[])[0]))return B;Ee&&(q=q.parentNode),D=D.slice(ae.shift().value.length)}for(U=yr.needsContext.test(D)?0:ae.length;U--&&!h.relative[ue=(oe=ae[U]).type];)if((le=h.find[ue])&&(ee=le(oe.matches[0].replace(Mt,Lt),kr.test(ae[0].type)&&Dr(q.parentNode)||q))){if(ae.splice(U,1),!(D=ee.length&&wr(ae)))return Xe.apply(B,ee),B;break}}return(Ee||z(D,be))(ee,q,!ve,B,!q||kr.test(D)&&Dr(q.parentNode)||q),B},p.sortStable=Me.split("").sort(jt).join("")===Me,p.detectDuplicates=!!ie,Y(),p.sortDetached=At(function(D){return 1&D.compareDocumentPosition(Z.createElement("fieldset"))}),At(function(D){return D.innerHTML="<a href='#'></a>","#"===D.firstChild.getAttribute("href")})||Nr("type|href|height|width",function(D,q,B){if(!B)return D.getAttribute(q,"type"===q.toLowerCase()?1:2)}),p.attributes&&At(function(D){return D.innerHTML="<input/>",D.firstChild.setAttribute("value",""),""===D.firstChild.getAttribute("value")})||Nr("value",function(D,q,B){if(!B&&"input"===D.nodeName.toLowerCase())return D.defaultValue}),At(function(D){return null==D.getAttribute("disabled")})||Nr(Ot,function(D,q,B){var ee;if(!B)return!0===D[q]?q.toLowerCase():(ee=D.getAttributeNode(q))&&ee.specified?ee.value:null}),Re}(e);_.find=me,_.expr=me.selectors,_.expr[":"]=_.expr.pseudos,_.uniqueSort=_.unique=me.uniqueSort,_.text=me.getText,_.isXMLDoc=me.isXML,_.contains=me.contains,_.escapeSelector=me.escape;var ze=function(o,y,p){for(var h=[],x=void 0!==p;(o=o[y])&&9!==o.nodeType;)if(1===o.nodeType){if(x&&_(o).is(p))break;h.push(o)}return h},ut=function(o,y){for(var p=[];o;o=o.nextSibling)1===o.nodeType&&o!==y&&p.push(o);return p},nt=_.expr.match.needsContext;function Le(o,y){return o.nodeName&&o.nodeName.toLowerCase()===y.toLowerCase()}var lt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ct(o,y,p){return R(y)?_.grep(o,function(h,x){return!!y.call(h,x,h)!==p}):y.nodeType?_.grep(o,function(h){return h===y!==p}):"string"!=typeof y?_.grep(o,function(h){return-1<w.call(y,h)!==p}):_.filter(y,o,p)}_.filter=function(o,y,p){var h=y[0];return p&&(o=":not("+o+")"),1===y.length&&1===h.nodeType?_.find.matchesSelector(h,o)?[h]:[]:_.find.matches(o,_.grep(y,function(x){return 1===x.nodeType}))},_.fn.extend({find:function(o){var y,p,h=this.length,x=this;if("string"!=typeof o)return this.pushStack(_(o).filter(function(){for(y=0;y<h;y++)if(_.contains(x[y],this))return!0}));for(p=this.pushStack([]),y=0;y<h;y++)_.find(o,x[y],p);return 1<h?_.uniqueSort(p):p},filter:function(o){return this.pushStack(ct(this,o||[],!1))},not:function(o){return this.pushStack(ct(this,o||[],!0))},is:function(o){return!!ct(this,"string"==typeof o&&nt.test(o)?_(o):o||[],!1).length}});var Nt,Jt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(_.fn.init=function(o,y,p){var h,x;if(!o)return this;if(p=p||Nt,"string"==typeof o){if(!(h="<"===o[0]&&">"===o[o.length-1]&&3<=o.length?[null,o,null]:Jt.exec(o))||!h[1]&&y)return!y||y.jquery?(y||p).find(o):this.constructor(y).find(o);if(h[1]){if(_.merge(this,_.parseHTML(h[1],(y=y instanceof _?y[0]:y)&&y.nodeType?y.ownerDocument||y:te,!0)),lt.test(h[1])&&_.isPlainObject(y))for(h in y)R(this[h])?this[h](y[h]):this.attr(h,y[h]);return this}return(x=te.getElementById(h[2]))&&(this[0]=x,this.length=1),this}return o.nodeType?(this[0]=o,this.length=1,this):R(o)?void 0!==p.ready?p.ready(o):o(_):_.makeArray(o,this)}).prototype=_.fn,Nt=_(te);var dr=/^(?:parents|prev(?:Until|All))/,Dt={children:!0,contents:!0,next:!0,prev:!0};function at(o,y){for(;(o=o[y])&&1!==o.nodeType;);return o}_.fn.extend({has:function(o){var y=_(o,this),p=y.length;return this.filter(function(){for(var h=0;h<p;h++)if(_.contains(this,y[h]))return!0})},closest:function(o,y){var p,h=0,x=this.length,A=[],N="string"!=typeof o&&_(o);if(!nt.test(o))for(;h<x;h++)for(p=this[h];p&&p!==y;p=p.parentNode)if(p.nodeType<11&&(N?-1<N.index(p):1===p.nodeType&&_.find.matchesSelector(p,o))){A.push(p);break}return this.pushStack(1<A.length?_.uniqueSort(A):A)},index:function(o){return o?"string"==typeof o?w.call(_(o),this[0]):w.call(this,o.jquery?o[0]:o):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(o,y){return this.pushStack(_.uniqueSort(_.merge(this.get(),_(o,y))))},addBack:function(o){return this.add(null==o?this.prevObject:this.prevObject.filter(o))}}),_.each({parent:function(o){var y=o.parentNode;return y&&11!==y.nodeType?y:null},parents:function(o){return ze(o,"parentNode")},parentsUntil:function(o,y,p){return ze(o,"parentNode",p)},next:function(o){return at(o,"nextSibling")},prev:function(o){return at(o,"previousSibling")},nextAll:function(o){return ze(o,"nextSibling")},prevAll:function(o){return ze(o,"previousSibling")},nextUntil:function(o,y,p){return ze(o,"nextSibling",p)},prevUntil:function(o,y,p){return ze(o,"previousSibling",p)},siblings:function(o){return ut((o.parentNode||{}).firstChild,o)},children:function(o){return ut(o.firstChild)},contents:function(o){return null!=o.contentDocument&&E(o.contentDocument)?o.contentDocument:(Le(o,"template")&&(o=o.content||o),_.merge([],o.childNodes))}},function(o,y){_.fn[o]=function(p,h){var x=_.map(this,y,p);return"Until"!==o.slice(-5)&&(h=p),h&&"string"==typeof h&&(x=_.filter(h,x)),1<this.length&&(Dt[o]||_.uniqueSort(x),dr.test(o)&&x.reverse()),this.pushStack(x)}});var Be=/[^\x20\t\r\n\f]+/g;function Rt(o){return o}function qt(o){throw o}function It(o,y,p,h){var x;try{o&&R(x=o.promise)?x.call(o).done(y).fail(p):o&&R(x=o.then)?x.call(o,y,p):y.apply(void 0,[o].slice(h))}catch(A){p.apply(void 0,[A])}}_.Callbacks=function(o){var p;o="string"==typeof o?(p={},_.each(o.match(Be)||[],function(Y,Z){p[Z]=!0}),p):_.extend({},o);var h,x,A,N,z=[],H=[],W=-1,J=function(){for(N=N||o.once,A=h=!0;H.length;W=-1)for(x=H.shift();++W<z.length;)!1===z[W].apply(x[0],x[1])&&o.stopOnFalse&&(W=z.length,x=!1);o.memory||(x=!1),h=!1,N&&(z=x?[]:"")},ie={add:function(){return z&&(x&&!h&&(W=z.length-1,H.push(x)),function Y(Z){_.each(Z,function(_e,ve){R(ve)?o.unique&&ie.has(ve)||z.push(ve):ve&&ve.length&&"string"!==ce(ve)&&Y(ve)})}(arguments),x&&!h&&J()),this},remove:function(){return _.each(arguments,function(Y,Z){for(var _e;-1<(_e=_.inArray(Z,z,_e));)z.splice(_e,1),_e<=W&&W--}),this},has:function(Y){return Y?-1<_.inArray(Y,z):0<z.length},empty:function(){return z&&(z=[]),this},disable:function(){return N=H=[],z=x="",this},disabled:function(){return!z},lock:function(){return N=H=[],x||h||(z=x=""),this},locked:function(){return!!N},fireWith:function(Y,Z){return N||(Z=[Y,(Z=Z||[]).slice?Z.slice():Z],H.push(Z),h||J()),this},fire:function(){return ie.fireWith(this,arguments),this},fired:function(){return!!A}};return ie},_.extend({Deferred:function(o){var y=[["notify","progress",_.Callbacks("memory"),_.Callbacks("memory"),2],["resolve","done",_.Callbacks("once memory"),_.Callbacks("once memory"),0,"resolved"],["reject","fail",_.Callbacks("once memory"),_.Callbacks("once memory"),1,"rejected"]],p="pending",h={state:function(){return p},always:function(){return x.done(arguments).fail(arguments),this},catch:function(A){return h.then(null,A)},pipe:function(){var A=arguments;return _.Deferred(function(N){_.each(y,function(z,H){var W=R(A[H[4]])&&A[H[4]];x[H[1]](function(){var J=W&&W.apply(this,arguments);J&&R(J.promise)?J.promise().progress(N.notify).done(N.resolve).fail(N.reject):N[H[0]+"With"](this,W?[J]:arguments)})}),A=null}).promise()},then:function(A,N,z){var H=0;function W(J,ie,Y,Z){return function(){var _e=this,ve=arguments,de=function(){var Qe,_t;if(!(J<H)){if((Qe=Y.apply(_e,ve))===ie.promise())throw new TypeError("Thenable self-resolution");R(_t=Qe&&("object"==typeof Qe||"function"==typeof Qe)&&Qe.then)?Z?_t.call(Qe,W(H,ie,Rt,Z),W(H,ie,qt,Z)):(H++,_t.call(Qe,W(H,ie,Rt,Z),W(H,ie,qt,Z),W(H,ie,Rt,ie.notifyWith))):(Y!==Rt&&(_e=void 0,ve=[Qe]),(Z||ie.resolveWith)(_e,ve))}},He=Z?de:function(){try{de()}catch(Qe){_.Deferred.exceptionHook&&_.Deferred.exceptionHook(Qe,He.stackTrace),H<=J+1&&(Y!==qt&&(_e=void 0,ve=[Qe]),ie.rejectWith(_e,ve))}};J?He():(_.Deferred.getStackHook&&(He.stackTrace=_.Deferred.getStackHook()),e.setTimeout(He))}}return _.Deferred(function(J){y[0][3].add(W(0,J,R(z)?z:Rt,J.notifyWith)),y[1][3].add(W(0,J,R(A)?A:Rt)),y[2][3].add(W(0,J,R(N)?N:qt))}).promise()},promise:function(A){return null!=A?_.extend(A,h):h}},x={};return _.each(y,function(A,N){var z=N[2],H=N[5];h[N[1]]=z.add,H&&z.add(function(){p=H},y[3-A][2].disable,y[3-A][3].disable,y[0][2].lock,y[0][3].lock),z.add(N[3].fire),x[N[0]]=function(){return x[N[0]+"With"](this===x?void 0:this,arguments),this},x[N[0]+"With"]=z.fireWith}),h.promise(x),o&&o.call(x,x),x},when:function(o){var y=arguments.length,p=y,h=Array(p),x=g.call(arguments),A=_.Deferred(),N=function(z){return function(H){h[z]=this,x[z]=1<arguments.length?g.call(arguments):H,--y||A.resolveWith(h,x)}};if(y<=1&&(It(o,A.done(N(p)).resolve,A.reject,!y),"pending"===A.state()||R(x[p]&&x[p].then)))return A.then();for(;p--;)It(x[p],N(p),A.reject);return A.promise()}});var mr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;_.Deferred.exceptionHook=function(o,y){e.console&&e.console.warn&&o&&mr.test(o.name)&&e.console.warn("jQuery.Deferred exception: "+o.message,o.stack,y)},_.readyException=function(o){e.setTimeout(function(){throw o})};var Tt=_.Deferred();function Pe(){te.removeEventListener("DOMContentLoaded",Pe),e.removeEventListener("load",Pe),_.ready()}_.fn.ready=function(o){return Tt.then(o).catch(function(y){_.readyException(y)}),this},_.extend({isReady:!1,readyWait:1,ready:function(o){(!0===o?--_.readyWait:_.isReady)||(_.isReady=!0)!==o&&0<--_.readyWait||Tt.resolveWith(te,[_])}}),_.ready.then=Tt.then,"complete"===te.readyState||"loading"!==te.readyState&&!te.documentElement.doScroll?e.setTimeout(_.ready):(te.addEventListener("DOMContentLoaded",Pe),e.addEventListener("load",Pe));var bt=function(o,y,p,h,x,A,N){var z=0,H=o.length,W=null==p;if("object"===ce(p))for(z in x=!0,p)bt(o,y,z,p[z],!0,A,N);else if(void 0!==h&&(x=!0,R(h)||(N=!0),W&&(N?(y.call(o,h),y=null):(W=y,y=function(J,ie,Y){return W.call(_(J),Y)})),y))for(;z<H;z++)y(o[z],p,N?h:h.call(o[z],z,y(o[z],p)));return x?o:W?y.call(o):H?y(o[0],p):A},P=/^-ms-/,ne=/-([a-z])/g;function Zt(o,y){return y.toUpperCase()}function u(o){return o.replace(P,"ms-").replace(ne,Zt)}var zt=function(o){return 1===o.nodeType||9===o.nodeType||!+o.nodeType};function Fe(){this.expando=_.expando+Fe.uid++}Fe.uid=1,Fe.prototype={cache:function(o){var y=o[this.expando];return y||(y={},zt(o)&&(o.nodeType?o[this.expando]=y:Object.defineProperty(o,this.expando,{value:y,configurable:!0}))),y},set:function(o,y,p){var h,x=this.cache(o);if("string"==typeof y)x[u(y)]=p;else for(h in y)x[u(h)]=y[h];return x},get:function(o,y){return void 0===y?this.cache(o):o[this.expando]&&o[this.expando][u(y)]},access:function(o,y,p){return void 0===y||y&&"string"==typeof y&&void 0===p?this.get(o,y):(this.set(o,y,p),void 0!==p?p:y)},remove:function(o,y){var p,h=o[this.expando];if(void 0!==h){if(void 0!==y)for((p=(y=Array.isArray(y)?y.map(u):(y=u(y))in h?[y]:y.match(Be)||[]).length);p--;)delete h[y[p]];(void 0===y||_.isEmptyObject(h))&&(o.nodeType?o[this.expando]=void 0:delete o[this.expando])}},hasData:function(o){var y=o[this.expando];return void 0!==y&&!_.isEmptyObject(y)}};var ye=new Fe,Q=new Fe,he=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/[A-Z]/g;function ge(o,y,p){var h,x;if(void 0===p&&1===o.nodeType)if(h="data-"+y.replace(Se,"-$&").toLowerCase(),"string"==typeof(p=o.getAttribute(h))){try{p="true"===(x=p)||"false"!==x&&("null"===x?null:x===+x+""?+x:he.test(x)?JSON.parse(x):x)}catch{}Q.set(o,y,p)}else p=void 0;return p}_.extend({hasData:function(o){return Q.hasData(o)||ye.hasData(o)},data:function(o,y,p){return Q.access(o,y,p)},removeData:function(o,y){Q.remove(o,y)},_data:function(o,y,p){return ye.access(o,y,p)},_removeData:function(o,y){ye.remove(o,y)}}),_.fn.extend({data:function(o,y){var p,h,x,A=this[0],N=A&&A.attributes;if(void 0===o){if(this.length&&(x=Q.get(A),1===A.nodeType&&!ye.get(A,"hasDataAttrs"))){for(p=N.length;p--;)N[p]&&0===(h=N[p].name).indexOf("data-")&&(h=u(h.slice(5)),ge(A,h,x[h]));ye.set(A,"hasDataAttrs",!0)}return x}return"object"==typeof o?this.each(function(){Q.set(this,o)}):bt(this,function(z){var H;if(A&&void 0===z)return void 0!==(H=Q.get(A,o))||void 0!==(H=ge(A,o))?H:void 0;this.each(function(){Q.set(this,o,z)})},null,y,1<arguments.length,null,!0)},removeData:function(o){return this.each(function(){Q.remove(this,o)})}}),_.extend({queue:function(o,y,p){var h;if(o)return h=ye.get(o,y=(y||"fx")+"queue"),p&&(!h||Array.isArray(p)?h=ye.access(o,y,_.makeArray(p)):h.push(p)),h||[]},dequeue:function(o,y){var p=_.queue(o,y=y||"fx"),h=p.length,x=p.shift(),A=_._queueHooks(o,y);"inprogress"===x&&(x=p.shift(),h--),x&&("fx"===y&&p.unshift("inprogress"),delete A.stop,x.call(o,function(){_.dequeue(o,y)},A)),!h&&A&&A.empty.fire()},_queueHooks:function(o,y){var p=y+"queueHooks";return ye.get(o,p)||ye.access(o,p,{empty:_.Callbacks("once memory").add(function(){ye.remove(o,[y+"queue",p])})})}}),_.fn.extend({queue:function(o,y){var p=2;return"string"!=typeof o&&(y=o,o="fx",p--),arguments.length<p?_.queue(this[0],o):void 0===y?this:this.each(function(){var h=_.queue(this,o,y);_._queueHooks(this,o),"fx"===o&&"inprogress"!==h[0]&&_.dequeue(this,o)})},dequeue:function(o){return this.each(function(){_.dequeue(this,o)})},clearQueue:function(o){return this.queue(o||"fx",[])},promise:function(o,y){var p,h=1,x=_.Deferred(),A=this,N=this.length,z=function(){--h||x.resolveWith(A,[A])};for("string"!=typeof o&&(y=o,o=void 0),o=o||"fx";N--;)(p=ye.get(A[N],o+"queueHooks"))&&p.empty&&(h++,p.empty.add(z));return z(),x.promise(y)}});var Ze=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pt=new RegExp("^(?:([+-])=|)("+Ze+")([a-z%]*)$","i"),Vt=["Top","Right","Bottom","Left"],r=te.documentElement,t=function(o){return _.contains(o.ownerDocument,o)},a={composed:!0};r.getRootNode&&(t=function(o){return _.contains(o.ownerDocument,o)||o.getRootNode(a)===o.ownerDocument});var n=function(o,y){return"none"===(o=y||o).style.display||""===o.style.display&&t(o)&&"none"===_.css(o,"display")};function s(o,y,p,h){var x,A,N=20,z=h?function(){return h.cur()}:function(){return _.css(o,y,"")},H=z(),W=p&&p[3]||(_.cssNumber[y]?"":"px"),J=o.nodeType&&(_.cssNumber[y]||"px"!==W&&+H)&&pt.exec(_.css(o,y));if(J&&J[3]!==W){for(W=W||J[3],J=+(H/=2)||1;N--;)_.style(o,y,J+W),(1-A)*(1-(A=z()/H||.5))<=0&&(N=0),J/=A;_.style(o,y,(J*=2)+W),p=p||[]}return p&&(J=+J||+H||0,x=p[1]?J+(p[1]+1)*p[2]:+p[2],h&&(h.unit=W,h.start=J,h.end=x)),x}var c={};function f(o,y){for(var p,h,x,A,N,z,H,W=[],J=0,ie=o.length;J<ie;J++)(h=o[J]).style&&(p=h.style.display,y?("none"===p&&(W[J]=ye.get(h,"display")||null,W[J]||(h.style.display="")),""===h.style.display&&n(h)&&(W[J]=(H=N=A=void 0,N=(x=h).ownerDocument,(H=c[z=x.nodeName])||(A=N.body.appendChild(N.createElement(z)),H=_.css(A,"display"),A.parentNode.removeChild(A),"none"===H&&(H="block"),c[z]=H)))):"none"!==p&&(W[J]="none",ye.set(h,"display",p)));for(J=0;J<ie;J++)null!=W[J]&&(o[J].style.display=W[J]);return o}_.fn.extend({show:function(){return f(this,!0)},hide:function(){return f(this)},toggle:function(o){return"boolean"==typeof o?o?this.show():this.hide():this.each(function(){n(this)?_(this).show():_(this).hide()})}});var d,T,O=/^(?:checkbox|radio)$/i,F=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,j=/^$|^module$|\/(?:java|ecma)script/i;d=te.createDocumentFragment().appendChild(te.createElement("div")),(T=te.createElement("input")).setAttribute("type","radio"),T.setAttribute("checked","checked"),T.setAttribute("name","t"),d.appendChild(T),L.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked,d.innerHTML="<textarea>x</textarea>",L.noCloneChecked=!!d.cloneNode(!0).lastChild.defaultValue,d.innerHTML="<option></option>",L.option=!!d.lastChild;var G={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function K(o,y){var p;return p=typeof o.getElementsByTagName<"u"?o.getElementsByTagName(y||"*"):typeof o.querySelectorAll<"u"?o.querySelectorAll(y||"*"):[],void 0===y||y&&Le(o,y)?_.merge([o],p):p}function fe(o,y){for(var p=0,h=o.length;p<h;p++)ye.set(o[p],"globalEval",!y||ye.get(y[p],"globalEval"))}G.tbody=G.tfoot=G.colgroup=G.caption=G.thead,G.th=G.td,L.option||(G.optgroup=G.option=[1,"<select multiple='multiple'>","</select>"]);var se=/<|&#?\w+;/;function Te(o,y,p,h,x){for(var A,N,z,H,W,J,ie=y.createDocumentFragment(),Y=[],Z=0,_e=o.length;Z<_e;Z++)if((A=o[Z])||0===A)if("object"===ce(A))_.merge(Y,A.nodeType?[A]:A);else if(se.test(A)){for(N=N||ie.appendChild(y.createElement("div")),z=(F.exec(A)||["",""])[1].toLowerCase(),N.innerHTML=(H=G[z]||G._default)[1]+_.htmlPrefilter(A)+H[2],J=H[0];J--;)N=N.lastChild;_.merge(Y,N.childNodes),(N=ie.firstChild).textContent=""}else Y.push(y.createTextNode(A));for(ie.textContent="",Z=0;A=Y[Z++];)if(h&&-1<_.inArray(A,h))x&&x.push(A);else if(W=t(A),N=K(ie.appendChild(A),"script"),W&&fe(N),p)for(J=0;A=N[J++];)j.test(A.type||"")&&p.push(A);return ie}var qe=/^([^.]*)(?:\.(.+)|)/;function Ve(){return!0}function $e(){return!1}function tt(o,y){return o===function(){try{return te.activeElement}catch{}}()==("focus"===y)}function We(o,y,p,h,x,A){var N,z;if("object"==typeof y){for(z in"string"!=typeof p&&(h=h||p,p=void 0),y)We(o,z,p,h,y[z],A);return o}if(null==h&&null==x?(x=p,h=p=void 0):null==x&&("string"==typeof p?(x=h,h=void 0):(x=h,h=p,p=void 0)),!1===x)x=$e;else if(!x)return o;return 1===A&&(N=x,(x=function(H){return _().off(H),N.apply(this,arguments)}).guid=N.guid||(N.guid=_.guid++)),o.each(function(){_.event.add(this,y,x,h,p)})}function Ue(o,y,p){p?(ye.set(o,y,!1),_.event.add(o,y,{namespace:!1,handler:function(h){var x,A,N=ye.get(this,y);if(1&h.isTrigger&&this[y]){if(N.length)(_.event.special[y]||{}).delegateType&&h.stopPropagation();else if(N=g.call(arguments),ye.set(this,y,N),x=p(this,y),this[y](),N!==(A=ye.get(this,y))||x?ye.set(this,y,!1):A={},N!==A)return h.stopImmediatePropagation(),h.preventDefault(),A&&A.value}else N.length&&(ye.set(this,y,{value:_.event.trigger(_.extend(N[0],_.Event.prototype),N.slice(1),this)}),h.stopImmediatePropagation())}})):void 0===ye.get(o,y)&&_.event.add(o,y,Ve)}_.event={global:{},add:function(o,y,p,h,x){var A,N,z,H,W,J,ie,Y,Z,_e,ve,de=ye.get(o);if(zt(o))for(p.handler&&(p=(A=p).handler,x=A.selector),x&&_.find.matchesSelector(r,x),p.guid||(p.guid=_.guid++),(H=de.events)||(H=de.events=Object.create(null)),(N=de.handle)||(N=de.handle=function(He){return typeof _<"u"&&_.event.triggered!==He.type?_.event.dispatch.apply(o,arguments):void 0}),W=(y=(y||"").match(Be)||[""]).length;W--;)Z=ve=(z=qe.exec(y[W])||[])[1],_e=(z[2]||"").split(".").sort(),Z&&(ie=_.event.special[Z]||{},ie=_.event.special[Z=(x?ie.delegateType:ie.bindType)||Z]||{},J=_.extend({type:Z,origType:ve,data:h,handler:p,guid:p.guid,selector:x,needsContext:x&&_.expr.match.needsContext.test(x),namespace:_e.join(".")},A),(Y=H[Z])||((Y=H[Z]=[]).delegateCount=0,ie.setup&&!1!==ie.setup.call(o,h,_e,N)||o.addEventListener&&o.addEventListener(Z,N)),ie.add&&(ie.add.call(o,J),J.handler.guid||(J.handler.guid=p.guid)),x?Y.splice(Y.delegateCount++,0,J):Y.push(J),_.event.global[Z]=!0)},remove:function(o,y,p,h,x){var A,N,z,H,W,J,ie,Y,Z,_e,ve,de=ye.hasData(o)&&ye.get(o);if(de&&(H=de.events)){for(W=(y=(y||"").match(Be)||[""]).length;W--;)if(Z=ve=(z=qe.exec(y[W])||[])[1],_e=(z[2]||"").split(".").sort(),Z){for(ie=_.event.special[Z]||{},Y=H[Z=(h?ie.delegateType:ie.bindType)||Z]||[],z=z[2]&&new RegExp("(^|\\.)"+_e.join("\\.(?:.*\\.|)")+"(\\.|$)"),N=A=Y.length;A--;)J=Y[A],!x&&ve!==J.origType||p&&p.guid!==J.guid||z&&!z.test(J.namespace)||h&&h!==J.selector&&("**"!==h||!J.selector)||(Y.splice(A,1),J.selector&&Y.delegateCount--,ie.remove&&ie.remove.call(o,J));N&&!Y.length&&(ie.teardown&&!1!==ie.teardown.call(o,_e,de.handle)||_.removeEvent(o,Z,de.handle),delete H[Z])}else for(Z in H)_.event.remove(o,Z+y[W],p,h,!0);_.isEmptyObject(H)&&ye.remove(o,"handle events")}},dispatch:function(o){var y,p,h,x,A,N,z=new Array(arguments.length),H=_.event.fix(o),W=(ye.get(this,"events")||Object.create(null))[H.type]||[],J=_.event.special[H.type]||{};for(z[0]=H,y=1;y<arguments.length;y++)z[y]=arguments[y];if(H.delegateTarget=this,!J.preDispatch||!1!==J.preDispatch.call(this,H)){for(N=_.event.handlers.call(this,H,W),y=0;(x=N[y++])&&!H.isPropagationStopped();)for(H.currentTarget=x.elem,p=0;(A=x.handlers[p++])&&!H.isImmediatePropagationStopped();)H.rnamespace&&!1!==A.namespace&&!H.rnamespace.test(A.namespace)||(H.handleObj=A,H.data=A.data,void 0!==(h=((_.event.special[A.origType]||{}).handle||A.handler).apply(x.elem,z))&&!1===(H.result=h)&&(H.preventDefault(),H.stopPropagation()));return J.postDispatch&&J.postDispatch.call(this,H),H.result}},handlers:function(o,y){var p,h,x,A,N,z=[],H=y.delegateCount,W=o.target;if(H&&W.nodeType&&!("click"===o.type&&1<=o.button))for(;W!==this;W=W.parentNode||this)if(1===W.nodeType&&("click"!==o.type||!0!==W.disabled)){for(A=[],N={},p=0;p<H;p++)void 0===N[x=(h=y[p]).selector+" "]&&(N[x]=h.needsContext?-1<_(x,this).index(W):_.find(x,this,null,[W]).length),N[x]&&A.push(h);A.length&&z.push({elem:W,handlers:A})}return W=this,H<y.length&&z.push({elem:W,handlers:y.slice(H)}),z},addProp:function(o,y){Object.defineProperty(_.Event.prototype,o,{enumerable:!0,configurable:!0,get:R(y)?function(){if(this.originalEvent)return y(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[o]},set:function(p){Object.defineProperty(this,o,{enumerable:!0,configurable:!0,writable:!0,value:p})}})},fix:function(o){return o[_.expando]?o:new _.Event(o)},special:{load:{noBubble:!0},click:{setup:function(o){var y=this||o;return O.test(y.type)&&y.click&&Le(y,"input")&&Ue(y,"click",Ve),!1},trigger:function(o){var y=this||o;return O.test(y.type)&&y.click&&Le(y,"input")&&Ue(y,"click"),!0},_default:function(o){var y=o.target;return O.test(y.type)&&y.click&&Le(y,"input")&&ye.get(y,"click")||Le(y,"a")}},beforeunload:{postDispatch:function(o){void 0!==o.result&&o.originalEvent&&(o.originalEvent.returnValue=o.result)}}}},_.removeEvent=function(o,y,p){o.removeEventListener&&o.removeEventListener(y,p)},_.Event=function(o,y){if(!(this instanceof _.Event))return new _.Event(o,y);o&&o.type?(this.originalEvent=o,this.type=o.type,this.isDefaultPrevented=o.defaultPrevented||void 0===o.defaultPrevented&&!1===o.returnValue?Ve:$e,this.target=o.target&&3===o.target.nodeType?o.target.parentNode:o.target,this.currentTarget=o.currentTarget,this.relatedTarget=o.relatedTarget):this.type=o,y&&_.extend(this,y),this.timeStamp=o&&o.timeStamp||Date.now(),this[_.expando]=!0},_.Event.prototype={constructor:_.Event,isDefaultPrevented:$e,isPropagationStopped:$e,isImmediatePropagationStopped:$e,isSimulated:!1,preventDefault:function(){var o=this.originalEvent;this.isDefaultPrevented=Ve,o&&!this.isSimulated&&o.preventDefault()},stopPropagation:function(){var o=this.originalEvent;this.isPropagationStopped=Ve,o&&!this.isSimulated&&o.stopPropagation()},stopImmediatePropagation:function(){var o=this.originalEvent;this.isImmediatePropagationStopped=Ve,o&&!this.isSimulated&&o.stopImmediatePropagation(),this.stopPropagation()}},_.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},_.event.addProp),_.each({focus:"focusin",blur:"focusout"},function(o,y){_.event.special[o]={setup:function(){return Ue(this,o,tt),!1},trigger:function(){return Ue(this,o),!0},_default:function(){return!0},delegateType:y}}),_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(o,y){_.event.special[o]={delegateType:y,bindType:y,handle:function(p){var h,x=p.relatedTarget,A=p.handleObj;return x&&(x===this||_.contains(this,x))||(p.type=A.origType,h=A.handler.apply(this,arguments),p.type=y),h}}}),_.fn.extend({on:function(o,y,p,h){return We(this,o,y,p,h)},one:function(o,y,p,h){return We(this,o,y,p,h,1)},off:function(o,y,p){var h,x;if(o&&o.preventDefault&&o.handleObj)return h=o.handleObj,_(o.delegateTarget).off(h.namespace?h.origType+"."+h.namespace:h.origType,h.selector,h.handler),this;if("object"==typeof o){for(x in o)this.off(x,y,o[x]);return this}return!1!==y&&"function"!=typeof y||(p=y,y=void 0),!1===p&&(p=$e),this.each(function(){_.event.remove(this,o,p,y)})}});var it=/<script|<style|<link/i,yt=/checked\s*(?:[^=]|=\s*.checked.)/i,Qt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Lr(o,y){return Le(o,"table")&&Le(11!==y.nodeType?y:y.firstChild,"tr")&&_(o).children("tbody")[0]||o}function dn(o){return o.type=(null!==o.getAttribute("type"))+"/"+o.type,o}function mn(o){return"true/"===(o.type||"").slice(0,5)?o.type=o.type.slice(5):o.removeAttribute("type"),o}function Rr(o,y){var p,h,x,A,N,z;if(1===y.nodeType){if(ye.hasData(o)&&(z=ye.get(o).events))for(x in ye.remove(y,"handle events"),z)for(p=0,h=z[x].length;p<h;p++)_.event.add(y,x,z[x][p]);Q.hasData(o)&&(A=Q.access(o),N=_.extend({},A),Q.set(y,N))}}function Bt(o,y,p,h){y=V(y);var x,A,N,z,H,W,J=0,ie=o.length,Y=ie-1,Z=y[0],_e=R(Z);if(_e||1<ie&&"string"==typeof Z&&!L.checkClone&&yt.test(Z))return o.each(function(ve){var de=o.eq(ve);_e&&(y[0]=Z.call(this,ve,de.html())),Bt(de,y,p,h)});if(ie&&(A=(x=Te(y,o[0].ownerDocument,!1,o,h)).firstChild,1===x.childNodes.length&&(x=A),A||h)){for(z=(N=_.map(K(x,"script"),dn)).length;J<ie;J++)H=x,J!==Y&&(H=_.clone(H,!0,!0),z&&_.merge(N,K(H,"script"))),p.call(o[J],H,J);if(z)for(W=N[N.length-1].ownerDocument,_.map(N,mn),J=0;J<z;J++)j.test((H=N[J]).type||"")&&!ye.access(H,"globalEval")&&_.contains(W,H)&&(H.src&&"module"!==(H.type||"").toLowerCase()?_._evalUrl&&!H.noModule&&_._evalUrl(H.src,{nonce:H.nonce||H.getAttribute("nonce")},W):re(H.textContent.replace(Qt,""),H,W))}return o}function Ir(o,y,p){for(var h,x=y?_.filter(y,o):o,A=0;null!=(h=x[A]);A++)p||1!==h.nodeType||_.cleanData(K(h)),h.parentNode&&(p&&t(h)&&fe(K(h,"script")),h.parentNode.removeChild(h));return o}_.extend({htmlPrefilter:function(o){return o},clone:function(o,y,p){var h,x,A,N,z,H,W,J=o.cloneNode(!0),ie=t(o);if(!(L.noCloneChecked||1!==o.nodeType&&11!==o.nodeType||_.isXMLDoc(o)))for(N=K(J),h=0,x=(A=K(o)).length;h<x;h++)z=A[h],"input"===(W=(H=N[h]).nodeName.toLowerCase())&&O.test(z.type)?H.checked=z.checked:"input"!==W&&"textarea"!==W||(H.defaultValue=z.defaultValue);if(y)if(p)for(A=A||K(o),N=N||K(J),h=0,x=A.length;h<x;h++)Rr(A[h],N[h]);else Rr(o,J);return 0<(N=K(J,"script")).length&&fe(N,!ie&&K(o,"script")),J},cleanData:function(o){for(var y,p,h,x=_.event.special,A=0;void 0!==(p=o[A]);A++)if(zt(p)){if(y=p[ye.expando]){if(y.events)for(h in y.events)x[h]?_.event.remove(p,h):_.removeEvent(p,h,y.handle);p[ye.expando]=void 0}p[Q.expando]&&(p[Q.expando]=void 0)}}}),_.fn.extend({detach:function(o){return Ir(this,o,!0)},remove:function(o){return Ir(this,o)},text:function(o){return bt(this,function(y){return void 0===y?_.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=y)})},null,o,arguments.length)},append:function(){return Bt(this,arguments,function(o){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Lr(this,o).appendChild(o)})},prepend:function(){return Bt(this,arguments,function(o){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var y=Lr(this,o);y.insertBefore(o,y.firstChild)}})},before:function(){return Bt(this,arguments,function(o){this.parentNode&&this.parentNode.insertBefore(o,this)})},after:function(){return Bt(this,arguments,function(o){this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling)})},empty:function(){for(var o,y=0;null!=(o=this[y]);y++)1===o.nodeType&&(_.cleanData(K(o,!1)),o.textContent="");return this},clone:function(o,y){return o=null!=o&&o,y=y??o,this.map(function(){return _.clone(this,o,y)})},html:function(o){return bt(this,function(y){var p=this[0]||{},h=0,x=this.length;if(void 0===y&&1===p.nodeType)return p.innerHTML;if("string"==typeof y&&!it.test(y)&&!G[(F.exec(y)||["",""])[1].toLowerCase()]){y=_.htmlPrefilter(y);try{for(;h<x;h++)1===(p=this[h]||{}).nodeType&&(_.cleanData(K(p,!1)),p.innerHTML=y);p=0}catch{}}p&&this.empty().append(y)},null,o,arguments.length)},replaceWith:function(){var o=[];return Bt(this,arguments,function(y){var p=this.parentNode;_.inArray(this,o)<0&&(_.cleanData(K(this)),p&&p.replaceChild(y,this))},o)}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(o,y){_.fn[o]=function(p){for(var h,x=[],A=_(p),N=A.length-1,z=0;z<=N;z++)h=z===N?this:this.clone(!0),_(A[z])[y](h),S.apply(x,h.get());return this.pushStack(x)}});var hr=new RegExp("^("+Ze+")(?!px)[a-z%]+$","i"),ar=function(o){var y=o.ownerDocument.defaultView;return y&&y.opener||(y=e),y.getComputedStyle(o)},qr=function(o,y,p){var h,x,A={};for(x in y)A[x]=o.style[x],o.style[x]=y[x];for(x in h=p.call(o),y)o.style[x]=A[x];return h},hn=new RegExp(Vt.join("|"),"i");function Kt(o,y,p){var h,x,A,N,z=o.style;return(p=p||ar(o))&&(""!==(N=p.getPropertyValue(y)||p[y])||t(o)||(N=_.style(o,y)),!L.pixelBoxStyles()&&hr.test(N)&&hn.test(y)&&(h=z.width,x=z.minWidth,A=z.maxWidth,z.minWidth=z.maxWidth=z.width=N,N=p.width,z.width=h,z.minWidth=x,z.maxWidth=A)),void 0!==N?N+"":N}function zr(o,y){return{get:function(){if(!o())return(this.get=y).apply(this,arguments);delete this.get}}}!function(){function o(){if(W){H.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",W.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",r.appendChild(H).appendChild(W);var J=e.getComputedStyle(W);p="1%"!==J.top,z=12===y(J.marginLeft),W.style.right="60%",A=36===y(J.right),h=36===y(J.width),W.style.position="absolute",x=12===y(W.offsetWidth/3),r.removeChild(H),W=null}}function y(J){return Math.round(parseFloat(J))}var p,h,x,A,N,z,H=te.createElement("div"),W=te.createElement("div");W.style&&(W.style.backgroundClip="content-box",W.cloneNode(!0).style.backgroundClip="",L.clearCloneStyle="content-box"===W.style.backgroundClip,_.extend(L,{boxSizingReliable:function(){return o(),h},pixelBoxStyles:function(){return o(),A},pixelPosition:function(){return o(),p},reliableMarginLeft:function(){return o(),z},scrollboxSize:function(){return o(),x},reliableTrDimensions:function(){var J,ie,Y,Z;return null==N&&(J=te.createElement("table"),ie=te.createElement("tr"),Y=te.createElement("div"),J.style.cssText="position:absolute;left:-11111px;border-collapse:separate",ie.style.cssText="border:1px solid",ie.style.height="1px",Y.style.height="9px",Y.style.display="block",r.appendChild(J).appendChild(ie).appendChild(Y),Z=e.getComputedStyle(ie),N=parseInt(Z.height,10)+parseInt(Z.borderTopWidth,10)+parseInt(Z.borderBottomWidth,10)===ie.offsetHeight,r.removeChild(J)),N}}))}();var Fr=["Webkit","Moz","ms"],Hr=te.createElement("div").style,jr={};function vr(o){return _.cssProps[o]||jr[o]||(o in Hr?o:jr[o]=function(p){for(var h=p[0].toUpperCase()+p.slice(1),x=Fr.length;x--;)if((p=Fr[x]+h)in Hr)return p}(o)||o)}var vn=/^(none|table(?!-c[ea]).+)/,Xr=/^--/,gn={position:"absolute",visibility:"hidden",display:"block"},Br={letterSpacing:"0",fontWeight:"400"};function $r(o,y,p){var h=pt.exec(y);return h?Math.max(0,h[2]-(p||0))+(h[3]||"px"):y}function gr(o,y,p,h,x,A){var N="width"===y?1:0,z=0,H=0;if(p===(h?"border":"content"))return 0;for(;N<4;N+=2)"margin"===p&&(H+=_.css(o,p+Vt[N],!0,x)),h?("content"===p&&(H-=_.css(o,"padding"+Vt[N],!0,x)),"margin"!==p&&(H-=_.css(o,"border"+Vt[N]+"Width",!0,x))):(H+=_.css(o,"padding"+Vt[N],!0,x),"padding"!==p?H+=_.css(o,"border"+Vt[N]+"Width",!0,x):z+=_.css(o,"border"+Vt[N]+"Width",!0,x));return!h&&0<=A&&(H+=Math.max(0,Math.ceil(o["offset"+y[0].toUpperCase()+y.slice(1)]-A-H-z-.5))||0),H}function Wr(o,y,p){var h=ar(o),x=(!L.boxSizingReliable()||p)&&"border-box"===_.css(o,"boxSizing",!1,h),A=x,N=Kt(o,y,h),z="offset"+y[0].toUpperCase()+y.slice(1);if(hr.test(N)){if(!p)return N;N="auto"}return(!L.boxSizingReliable()&&x||!L.reliableTrDimensions()&&Le(o,"tr")||"auto"===N||!parseFloat(N)&&"inline"===_.css(o,"display",!1,h))&&o.getClientRects().length&&(x="border-box"===_.css(o,"boxSizing",!1,h),(A=z in o)&&(N=o[z])),(N=parseFloat(N)||0)+gr(o,y,p||(x?"border":"content"),A,h,N)+"px"}function St(o,y,p,h,x){return new St.prototype.init(o,y,p,h,x)}_.extend({cssHooks:{opacity:{get:function(o,y){if(y){var p=Kt(o,"opacity");return""===p?"1":p}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(o,y,p,h){if(o&&3!==o.nodeType&&8!==o.nodeType&&o.style){var x,A,N,z=u(y),H=Xr.test(y),W=o.style;if(H||(y=vr(z)),N=_.cssHooks[y]||_.cssHooks[z],void 0===p)return N&&"get"in N&&void 0!==(x=N.get(o,!1,h))?x:W[y];"string"==(A=typeof p)&&(x=pt.exec(p))&&x[1]&&(p=s(o,y,x),A="number"),null!=p&&p==p&&("number"!==A||H||(p+=x&&x[3]||(_.cssNumber[z]?"":"px")),L.clearCloneStyle||""!==p||0!==y.indexOf("background")||(W[y]="inherit"),N&&"set"in N&&void 0===(p=N.set(o,p,h))||(H?W.setProperty(y,p):W[y]=p))}},css:function(o,y,p,h){var x,A,N,z=u(y);return Xr.test(y)||(y=vr(z)),(N=_.cssHooks[y]||_.cssHooks[z])&&"get"in N&&(x=N.get(o,!0,p)),void 0===x&&(x=Kt(o,y,h)),"normal"===x&&y in Br&&(x=Br[y]),""===p||p?(A=parseFloat(x),!0===p||isFinite(A)?A||0:x):x}}),_.each(["height","width"],function(o,y){_.cssHooks[y]={get:function(p,h,x){if(h)return!vn.test(_.css(p,"display"))||p.getClientRects().length&&p.getBoundingClientRect().width?Wr(p,y,x):qr(p,gn,function(){return Wr(p,y,x)})},set:function(p,h,x){var A,N=ar(p),z=!L.scrollboxSize()&&"absolute"===N.position,H=(z||x)&&"border-box"===_.css(p,"boxSizing",!1,N),W=x?gr(p,y,x,H,N):0;return H&&z&&(W-=Math.ceil(p["offset"+y[0].toUpperCase()+y.slice(1)]-parseFloat(N[y])-gr(p,y,"border",!1,N)-.5)),W&&(A=pt.exec(h))&&"px"!==(A[3]||"px")&&(p.style[y]=h,h=_.css(p,y)),$r(0,h,W)}}}),_.cssHooks.marginLeft=zr(L.reliableMarginLeft,function(o,y){if(y)return(parseFloat(Kt(o,"marginLeft"))||o.getBoundingClientRect().left-qr(o,{marginLeft:0},function(){return o.getBoundingClientRect().left}))+"px"}),_.each({margin:"",padding:"",border:"Width"},function(o,y){_.cssHooks[o+y]={expand:function(p){for(var h=0,x={},A="string"==typeof p?p.split(" "):[p];h<4;h++)x[o+Vt[h]+y]=A[h]||A[h-2]||A[0];return x}},"margin"!==o&&(_.cssHooks[o+y].set=$r)}),_.fn.extend({css:function(o,y){return bt(this,function(p,h,x){var A,N,z={},H=0;if(Array.isArray(h)){for(A=ar(p),N=h.length;H<N;H++)z[h[H]]=_.css(p,h[H],!1,A);return z}return void 0!==x?_.style(p,h,x):_.css(p,h)},o,y,1<arguments.length)}}),((_.Tween=St).prototype={constructor:St,init:function(o,y,p,h,x,A){this.elem=o,this.prop=p,this.easing=x||_.easing._default,this.options=y,this.start=this.now=this.cur(),this.end=h,this.unit=A||(_.cssNumber[p]?"":"px")},cur:function(){var o=St.propHooks[this.prop];return o&&o.get?o.get(this):St.propHooks._default.get(this)},run:function(o){var y,p=St.propHooks[this.prop];return this.pos=y=this.options.duration?_.easing[this.easing](o,this.options.duration*o,0,1,this.options.duration):o,this.now=(this.end-this.start)*y+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),p&&p.set?p.set(this):St.propHooks._default.set(this),this}}).init.prototype=St.prototype,(St.propHooks={_default:{get:function(o){var y;return 1!==o.elem.nodeType||null!=o.elem[o.prop]&&null==o.elem.style[o.prop]?o.elem[o.prop]:(y=_.css(o.elem,o.prop,""))&&"auto"!==y?y:0},set:function(o){_.fx.step[o.prop]?_.fx.step[o.prop](o):1!==o.elem.nodeType||!_.cssHooks[o.prop]&&null==o.elem.style[vr(o.prop)]?o.elem[o.prop]=o.now:_.style(o.elem,o.prop,o.now+o.unit)}}}).scrollTop=St.propHooks.scrollLeft={set:function(o){o.elem.nodeType&&o.elem.parentNode&&(o.elem[o.prop]=o.now)}},_.easing={linear:function(o){return o},swing:function(o){return.5-Math.cos(o*Math.PI)/2},_default:"swing"},_.fx=St.prototype.init,_.fx.step={};var $t,sr,Wt,Ur,Tn=/^(?:toggle|show|hide)$/,bn=/queueHooks$/;function Tr(){sr&&(!1===te.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(Tr):e.setTimeout(Tr,_.fx.interval),_.fx.tick())}function Yr(){return e.setTimeout(function(){$t=void 0}),$t=Date.now()}function or(o,y){var p,h=0,x={height:o};for(y=y?1:0;h<4;h+=2-y)x["margin"+(p=Vt[h])]=x["padding"+p]=o;return y&&(x.opacity=x.width=o),x}function Gr(o,y,p){for(var h,x=(Et.tweeners[y]||[]).concat(Et.tweeners["*"]),A=0,N=x.length;A<N;A++)if(h=x[A].call(p,y,o))return h}function Et(o,y,p){var h,x,A=0,N=Et.prefilters.length,z=_.Deferred().always(function(){delete H.elem}),H=function(){if(x)return!1;for(var ie=$t||Yr(),Y=Math.max(0,W.startTime+W.duration-ie),Z=1-(Y/W.duration||0),_e=0,ve=W.tweens.length;_e<ve;_e++)W.tweens[_e].run(Z);return z.notifyWith(o,[W,Z,Y]),Z<1&&ve?Y:(ve||z.notifyWith(o,[W,1,0]),z.resolveWith(o,[W]),!1)},W=z.promise({elem:o,props:_.extend({},y),opts:_.extend(!0,{specialEasing:{},easing:_.easing._default},p),originalProperties:y,originalOptions:p,startTime:$t||Yr(),duration:p.duration,tweens:[],createTween:function(ie,Y){var Z=_.Tween(o,W.opts,ie,Y,W.opts.specialEasing[ie]||W.opts.easing);return W.tweens.push(Z),Z},stop:function(ie){var Y=0,Z=ie?W.tweens.length:0;if(x)return this;for(x=!0;Y<Z;Y++)W.tweens[Y].run(1);return ie?(z.notifyWith(o,[W,1,0]),z.resolveWith(o,[W,ie])):z.rejectWith(o,[W,ie]),this}}),J=W.props;for(function(ie,Y){var Z,_e,ve,de,He;for(Z in ie)if(ve=Y[_e=u(Z)],de=ie[Z],Array.isArray(de)&&(ve=de[1],de=ie[Z]=de[0]),Z!==_e&&(ie[_e]=de,delete ie[Z]),(He=_.cssHooks[_e])&&"expand"in He)for(Z in de=He.expand(de),delete ie[_e],de)Z in ie||(ie[Z]=de[Z],Y[Z]=ve);else Y[_e]=ve}(J,W.opts.specialEasing);A<N;A++)if(h=Et.prefilters[A].call(W,o,J,W.opts))return R(h.stop)&&(_._queueHooks(W.elem,W.opts.queue).stop=h.stop.bind(h)),h;return _.map(J,Gr,W),R(W.opts.start)&&W.opts.start.call(o,W),W.progress(W.opts.progress).done(W.opts.done,W.opts.complete).fail(W.opts.fail).always(W.opts.always),_.fx.timer(_.extend(H,{elem:o,anim:W,queue:W.opts.queue})),W}_.Animation=_.extend(Et,{tweeners:{"*":[function(o,y){var p=this.createTween(o,y);return s(p.elem,o,pt.exec(y),p),p}]},tweener:function(o,y){R(o)?(y=o,o=["*"]):o=o.match(Be);for(var p,h=0,x=o.length;h<x;h++)(Et.tweeners[p=o[h]]=Et.tweeners[p]||[]).unshift(y)},prefilters:[function(o,y,p){var h,x,A,N,z,H,W,J,ie="width"in y||"height"in y,Y=this,Z={},_e=o.style,ve=o.nodeType&&n(o),de=ye.get(o,"fxshow");for(h in p.queue||(null==(N=_._queueHooks(o,"fx")).unqueued&&(N.unqueued=0,z=N.empty.fire,N.empty.fire=function(){N.unqueued||z()}),N.unqueued++,Y.always(function(){Y.always(function(){N.unqueued--,_.queue(o,"fx").length||N.empty.fire()})})),y)if(Tn.test(x=y[h])){if(delete y[h],A=A||"toggle"===x,x===(ve?"hide":"show")){if("show"!==x||!de||void 0===de[h])continue;ve=!0}Z[h]=de&&de[h]||_.style(o,h)}if((H=!_.isEmptyObject(y))||!_.isEmptyObject(Z))for(h in ie&&1===o.nodeType&&(p.overflow=[_e.overflow,_e.overflowX,_e.overflowY],null==(W=de&&de.display)&&(W=ye.get(o,"display")),"none"===(J=_.css(o,"display"))&&(W?J=W:(f([o],!0),W=o.style.display||W,J=_.css(o,"display"),f([o]))),("inline"===J||"inline-block"===J&&null!=W)&&"none"===_.css(o,"float")&&(H||(Y.done(function(){_e.display=W}),null==W&&(W="none"===(J=_e.display)?"":J)),_e.display="inline-block")),p.overflow&&(_e.overflow="hidden",Y.always(function(){_e.overflow=p.overflow[0],_e.overflowX=p.overflow[1],_e.overflowY=p.overflow[2]})),H=!1,Z)H||(de?"hidden"in de&&(ve=de.hidden):de=ye.access(o,"fxshow",{display:W}),A&&(de.hidden=!ve),ve&&f([o],!0),Y.done(function(){for(h in ve||f([o]),ye.remove(o,"fxshow"),Z)_.style(o,h,Z[h])})),H=Gr(ve?de[h]:0,h,Y),h in de||(de[h]=H.start,ve&&(H.end=H.start,H.start=0))}],prefilter:function(o,y){y?Et.prefilters.unshift(o):Et.prefilters.push(o)}}),_.speed=function(o,y,p){var h=o&&"object"==typeof o?_.extend({},o):{complete:p||!p&&y||R(o)&&o,duration:o,easing:p&&y||y&&!R(y)&&y};return _.fx.off?h.duration=0:"number"!=typeof h.duration&&(h.duration=h.duration in _.fx.speeds?_.fx.speeds[h.duration]:_.fx.speeds._default),null!=h.queue&&!0!==h.queue||(h.queue="fx"),h.old=h.complete,h.complete=function(){R(h.old)&&h.old.call(this),h.queue&&_.dequeue(this,h.queue)},h},_.fn.extend({fadeTo:function(o,y,p,h){return this.filter(n).css("opacity",0).show().end().animate({opacity:y},o,p,h)},animate:function(o,y,p,h){var x=_.isEmptyObject(o),A=_.speed(y,p,h),N=function(){var z=Et(this,_.extend({},o),A);(x||ye.get(this,"finish"))&&z.stop(!0)};return N.finish=N,x||!1===A.queue?this.each(N):this.queue(A.queue,N)},stop:function(o,y,p){var h=function(x){var A=x.stop;delete x.stop,A(p)};return"string"!=typeof o&&(p=y,y=o,o=void 0),y&&this.queue(o||"fx",[]),this.each(function(){var x=!0,A=null!=o&&o+"queueHooks",N=_.timers,z=ye.get(this);if(A)z[A]&&z[A].stop&&h(z[A]);else for(A in z)z[A]&&z[A].stop&&bn.test(A)&&h(z[A]);for(A=N.length;A--;)N[A].elem!==this||null!=o&&N[A].queue!==o||(N[A].anim.stop(p),x=!1,N.splice(A,1));!x&&p||_.dequeue(this,o)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var y,p=ye.get(this),h=p[o+"queue"],x=p[o+"queueHooks"],A=_.timers,N=h?h.length:0;for(p.finish=!0,_.queue(this,o,[]),x&&x.stop&&x.stop.call(this,!0),y=A.length;y--;)A[y].elem===this&&A[y].queue===o&&(A[y].anim.stop(!0),A.splice(y,1));for(y=0;y<N;y++)h[y]&&h[y].finish&&h[y].finish.call(this);delete p.finish})}}),_.each(["toggle","show","hide"],function(o,y){var p=_.fn[y];_.fn[y]=function(h,x,A){return null==h||"boolean"==typeof h?p.apply(this,arguments):this.animate(or(y,!0),h,x,A)}}),_.each({slideDown:or("show"),slideUp:or("hide"),slideToggle:or("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(o,y){_.fn[o]=function(p,h,x){return this.animate(y,p,h,x)}}),_.timers=[],_.fx.tick=function(){var o,y=0,p=_.timers;for($t=Date.now();y<p.length;y++)(o=p[y])()||p[y]!==o||p.splice(y--,1);p.length||_.fx.stop(),$t=void 0},_.fx.timer=function(o){_.timers.push(o),_.fx.start()},_.fx.interval=13,_.fx.start=function(){sr||(sr=!0,Tr())},_.fx.stop=function(){sr=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(o,y){return o=_.fx&&_.fx.speeds[o]||o,this.queue(y=y||"fx",function(p,h){var x=e.setTimeout(p,o);h.stop=function(){e.clearTimeout(x)}})},Wt=te.createElement("input"),Ur=te.createElement("select").appendChild(te.createElement("option")),Wt.type="checkbox",L.checkOn=""!==Wt.value,L.optSelected=Ur.selected,(Wt=te.createElement("input")).value="t",Wt.type="radio",L.radioValue="t"===Wt.value;var Jr,er=_.expr.attrHandle;_.fn.extend({attr:function(o,y){return bt(this,_.attr,o,y,1<arguments.length)},removeAttr:function(o){return this.each(function(){_.removeAttr(this,o)})}}),_.extend({attr:function(o,y,p){var h,x,A=o.nodeType;if(3!==A&&8!==A&&2!==A)return typeof o.getAttribute>"u"?_.prop(o,y,p):(1===A&&_.isXMLDoc(o)||(x=_.attrHooks[y.toLowerCase()]||(_.expr.match.bool.test(y)?Jr:void 0)),void 0!==p?null===p?void _.removeAttr(o,y):x&&"set"in x&&void 0!==(h=x.set(o,p,y))?h:(o.setAttribute(y,p+""),p):x&&"get"in x&&null!==(h=x.get(o,y))?h:null==(h=_.find.attr(o,y))?void 0:h)},attrHooks:{type:{set:function(o,y){if(!L.radioValue&&"radio"===y&&Le(o,"input")){var p=o.value;return o.setAttribute("type",y),p&&(o.value=p),y}}}},removeAttr:function(o,y){var p,h=0,x=y&&y.match(Be);if(x&&1===o.nodeType)for(;p=x[h++];)o.removeAttribute(p)}}),Jr={set:function(o,y,p){return!1===y?_.removeAttr(o,p):o.setAttribute(p,p),p}},_.each(_.expr.match.bool.source.match(/\w+/g),function(o,y){var p=er[y]||_.find.attr;er[y]=function(h,x,A){var N,z,H=x.toLowerCase();return A||(z=er[H],er[H]=N,N=null!=p(h,x,A)?H:null,er[H]=z),N}});var Vn=/^(?:input|select|textarea|button)$/i,xn=/^(?:a|area)$/i;function Ft(o){return(o.match(Be)||[]).join(" ")}function Ht(o){return o.getAttribute&&o.getAttribute("class")||""}function br(o){return Array.isArray(o)?o:"string"==typeof o&&o.match(Be)||[]}_.fn.extend({prop:function(o,y){return bt(this,_.prop,o,y,1<arguments.length)},removeProp:function(o){return this.each(function(){delete this[_.propFix[o]||o]})}}),_.extend({prop:function(o,y,p){var h,x,A=o.nodeType;if(3!==A&&8!==A&&2!==A)return 1===A&&_.isXMLDoc(o)||(x=_.propHooks[y=_.propFix[y]||y]),void 0!==p?x&&"set"in x&&void 0!==(h=x.set(o,p,y))?h:o[y]=p:x&&"get"in x&&null!==(h=x.get(o,y))?h:o[y]},propHooks:{tabIndex:{get:function(o){var y=_.find.attr(o,"tabindex");return y?parseInt(y,10):Vn.test(o.nodeName)||xn.test(o.nodeName)&&o.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),L.optSelected||(_.propHooks.selected={get:function(o){return null},set:function(o){}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this}),_.fn.extend({addClass:function(o){var y,p,h,x,A,N,z,H=0;if(R(o))return this.each(function(W){_(this).addClass(o.call(this,W,Ht(this)))});if((y=br(o)).length)for(;p=this[H++];)if(x=Ht(p),h=1===p.nodeType&&" "+Ft(x)+" "){for(N=0;A=y[N++];)h.indexOf(" "+A+" ")<0&&(h+=A+" ");x!==(z=Ft(h))&&p.setAttribute("class",z)}return this},removeClass:function(o){var y,p,h,x,A,N,z,H=0;if(R(o))return this.each(function(W){_(this).removeClass(o.call(this,W,Ht(this)))});if(!arguments.length)return this.attr("class","");if((y=br(o)).length)for(;p=this[H++];)if(x=Ht(p),h=1===p.nodeType&&" "+Ft(x)+" "){for(N=0;A=y[N++];)for(;-1<h.indexOf(" "+A+" ");)h=h.replace(" "+A+" "," ");x!==(z=Ft(h))&&p.setAttribute("class",z)}return this},toggleClass:function(o,y){var p=typeof o,h="string"===p||Array.isArray(o);return"boolean"==typeof y&&h?y?this.addClass(o):this.removeClass(o):R(o)?this.each(function(x){_(this).toggleClass(o.call(this,x,Ht(this),y),y)}):this.each(function(){var x,A,N,z;if(h)for(A=0,N=_(this),z=br(o);x=z[A++];)N.hasClass(x)?N.removeClass(x):N.addClass(x);else void 0!==o&&"boolean"!==p||((x=Ht(this))&&ye.set(this,"__className__",x),this.setAttribute&&this.setAttribute("class",x||!1===o?"":ye.get(this,"__className__")||""))})},hasClass:function(o){var y,p,h=0;for(y=" "+o+" ";p=this[h++];)if(1===p.nodeType&&-1<(" "+Ft(Ht(p))+" ").indexOf(y))return!0;return!1}});var Sn=/\r/g;_.fn.extend({val:function(o){var y,p,h,x=this[0];return arguments.length?(h=R(o),this.each(function(A){var N;1===this.nodeType&&(null==(N=h?o.call(this,A,_(this).val()):o)?N="":"number"==typeof N?N+="":Array.isArray(N)&&(N=_.map(N,function(z){return null==z?"":z+""})),(y=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()])&&"set"in y&&void 0!==y.set(this,N,"value")||(this.value=N))})):x?(y=_.valHooks[x.type]||_.valHooks[x.nodeName.toLowerCase()])&&"get"in y&&void 0!==(p=y.get(x,"value"))?p:"string"==typeof(p=x.value)?p.replace(Sn,""):p??"":void 0}}),_.extend({valHooks:{option:{get:function(o){return _.find.attr(o,"value")??Ft(_.text(o))}},select:{get:function(o){var y,p,h,x=o.options,A=o.selectedIndex,N="select-one"===o.type,z=N?null:[],H=N?A+1:x.length;for(h=A<0?H:N?A:0;h<H;h++)if(((p=x[h]).selected||h===A)&&!p.disabled&&(!p.parentNode.disabled||!Le(p.parentNode,"optgroup"))){if(y=_(p).val(),N)return y;z.push(y)}return z},set:function(o,y){for(var p,h,x=o.options,A=_.makeArray(y),N=x.length;N--;)((h=x[N]).selected=-1<_.inArray(_.valHooks.option.get(h),A))&&(p=!0);return p||(o.selectedIndex=-1),A}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(o,y){if(Array.isArray(y))return o.checked=-1<_.inArray(_(o).val(),y)}},L.checkOn||(_.valHooks[this].get=function(o){return null===o.getAttribute("value")?"on":o.value})}),L.focusin="onfocusin"in e;var Zr=/^(?:focusinfocus|focusoutblur)$/,Qr=function(o){o.stopPropagation()};_.extend(_.event,{trigger:function(o,y,p,h){var x,A,N,z,H,W,J,ie,Y=[p||te],Z=v.call(o,"type")?o.type:o,_e=v.call(o,"namespace")?o.namespace.split("."):[];if(A=ie=N=p=p||te,3!==p.nodeType&&8!==p.nodeType&&!Zr.test(Z+_.event.triggered)&&(-1<Z.indexOf(".")&&(Z=(_e=Z.split(".")).shift(),_e.sort()),H=Z.indexOf(":")<0&&"on"+Z,(o=o[_.expando]?o:new _.Event(Z,"object"==typeof o&&o)).isTrigger=h?2:3,o.namespace=_e.join("."),o.rnamespace=o.namespace?new RegExp("(^|\\.)"+_e.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,o.result=void 0,o.target||(o.target=p),y=null==y?[o]:_.makeArray(y,[o]),J=_.event.special[Z]||{},h||!J.trigger||!1!==J.trigger.apply(p,y))){if(!h&&!J.noBubble&&!X(p)){for(Zr.test((z=J.delegateType||Z)+Z)||(A=A.parentNode);A;A=A.parentNode)Y.push(A),N=A;N===(p.ownerDocument||te)&&Y.push(N.defaultView||N.parentWindow||e)}for(x=0;(A=Y[x++])&&!o.isPropagationStopped();)ie=A,o.type=1<x?z:J.bindType||Z,(W=(ye.get(A,"events")||Object.create(null))[o.type]&&ye.get(A,"handle"))&&W.apply(A,y),(W=H&&A[H])&&W.apply&&zt(A)&&(o.result=W.apply(A,y),!1===o.result&&o.preventDefault());return o.type=Z,h||o.isDefaultPrevented()||J._default&&!1!==J._default.apply(Y.pop(),y)||!zt(p)||H&&R(p[Z])&&!X(p)&&((N=p[H])&&(p[H]=null),_.event.triggered=Z,o.isPropagationStopped()&&ie.addEventListener(Z,Qr),p[Z](),o.isPropagationStopped()&&ie.removeEventListener(Z,Qr),_.event.triggered=void 0,N&&(p[H]=N)),o.result}},simulate:function(o,y,p){var h=_.extend(new _.Event,p,{type:o,isSimulated:!0});_.event.trigger(h,null,y)}}),_.fn.extend({trigger:function(o,y){return this.each(function(){_.event.trigger(o,y,this)})},triggerHandler:function(o,y){var p=this[0];if(p)return _.event.trigger(o,y,p,!0)}}),L.focusin||_.each({focus:"focusin",blur:"focusout"},function(o,y){var p=function(h){_.event.simulate(y,h.target,_.event.fix(h))};_.event.special[y]={setup:function(){var h=this.ownerDocument||this.document||this,x=ye.access(h,y);x||h.addEventListener(o,p,!0),ye.access(h,y,(x||0)+1)},teardown:function(){var h=this.ownerDocument||this.document||this,x=ye.access(h,y)-1;x?ye.access(h,y,x):(h.removeEventListener(o,p,!0),ye.remove(h,y))}}});var tr=e.location,Kr={guid:Date.now()},Vr=/\?/;_.parseXML=function(o){var y,p;if(!o||"string"!=typeof o)return null;try{y=(new e.DOMParser).parseFromString(o,"text/xml")}catch{}return p=y&&y.getElementsByTagName("parsererror")[0],y&&!p||_.error("Invalid XML: "+(p?_.map(p.childNodes,function(h){return h.textContent}).join("\n"):o)),y};var En=/\[\]$/,en=/\r?\n/g,Cn=/^(?:submit|button|image|reset|file)$/i,An=/^(?:input|select|textarea|keygen)/i;function xr(o,y,p,h){var x;if(Array.isArray(y))_.each(y,function(A,N){p||En.test(o)?h(o,N):xr(o+"["+("object"==typeof N&&null!=N?A:"")+"]",N,p,h)});else if(p||"object"!==ce(y))h(o,y);else for(x in y)xr(o+"["+x+"]",y[x],p,h)}_.param=function(o,y){var p,h=[],x=function(A,N){var z=R(N)?N():N;h[h.length]=encodeURIComponent(A)+"="+encodeURIComponent(z??"")};if(null==o)return"";if(Array.isArray(o)||o.jquery&&!_.isPlainObject(o))_.each(o,function(){x(this.name,this.value)});else for(p in o)xr(p,o[p],y,x);return h.join("&")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var o=_.prop(this,"elements");return o?_.makeArray(o):this}).filter(function(){var o=this.type;return this.name&&!_(this).is(":disabled")&&An.test(this.nodeName)&&!Cn.test(o)&&(this.checked||!O.test(o))}).map(function(o,y){var p=_(this).val();return null==p?null:Array.isArray(p)?_.map(p,function(h){return{name:y.name,value:h.replace(en,"\r\n")}}):{name:y.name,value:p.replace(en,"\r\n")}}).get()}});var kn=/%20/g,Nn=/#.*$/,Dn=/([?&])_=[^&]*/,On=/^(.*?):[ \t]*([^\r\n]*)$/gm,Pn=/^(?:GET|HEAD)$/,Mn=/^\/\//,tn={},Sr={},rn="*/".concat("*"),Er=te.createElement("a");function nn(o){return function(y,p){"string"!=typeof y&&(p=y,y="*");var h,x=0,A=y.toLowerCase().match(Be)||[];if(R(p))for(;h=A[x++];)"+"===h[0]?(h=h.slice(1)||"*",(o[h]=o[h]||[]).unshift(p)):(o[h]=o[h]||[]).push(p)}}function an(o,y,p,h){var x={},A=o===Sr;function N(z){var H;return x[z]=!0,_.each(o[z]||[],function(W,J){var ie=J(y,p,h);return"string"!=typeof ie||A||x[ie]?A?!(H=ie):void 0:(y.dataTypes.unshift(ie),N(ie),!1)}),H}return N(y.dataTypes[0])||!x["*"]&&N("*")}function Cr(o,y){var p,h,x=_.ajaxSettings.flatOptions||{};for(p in y)void 0!==y[p]&&((x[p]?o:h||(h={}))[p]=y[p]);return h&&_.extend(!0,o,h),o}Er.href=tr.href,_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:tr.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(tr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":rn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(o,y){return y?Cr(Cr(o,_.ajaxSettings),y):Cr(_.ajaxSettings,o)},ajaxPrefilter:nn(tn),ajaxTransport:nn(Sr),ajax:function(o,y){"object"==typeof o&&(y=o,o=void 0);var p,h,x,A,N,z,H,W,J,ie,Y=_.ajaxSetup({},y=y||{}),Z=Y.context||Y,_e=Y.context&&(Z.nodeType||Z.jquery)?_(Z):_.event,ve=_.Deferred(),de=_.Callbacks("once memory"),He=Y.statusCode||{},Qe={},_t={},Me="canceled",Ce={readyState:0,getResponseHeader:function(De){var je;if(H){if(!A)for(A={};je=On.exec(x);)A[je[1].toLowerCase()+" "]=(A[je[1].toLowerCase()+" "]||[]).concat(je[2]);je=A[De.toLowerCase()+" "]}return null==je?null:je.join(", ")},getAllResponseHeaders:function(){return H?x:null},setRequestHeader:function(De,je){return null==H&&(De=_t[De.toLowerCase()]=_t[De.toLowerCase()]||De,Qe[De]=je),this},overrideMimeType:function(De){return null==H&&(Y.mimeType=De),this},statusCode:function(De){var je;if(De)if(H)Ce.always(De[Ce.status]);else for(je in De)He[je]=[He[je],De[je]];return this},abort:function(De){var je=De||Me;return p&&p.abort(je),ft(0,je),this}};if(ve.promise(Ce),Y.url=((o||Y.url||tr.href)+"").replace(Mn,tr.protocol+"//"),Y.type=y.method||y.type||Y.method||Y.type,Y.dataTypes=(Y.dataType||"*").toLowerCase().match(Be)||[""],null==Y.crossDomain){z=te.createElement("a");try{z.href=Y.url,z.href=z.href,Y.crossDomain=Er.protocol+"//"+Er.host!=z.protocol+"//"+z.host}catch{Y.crossDomain=!0}}if(Y.data&&Y.processData&&"string"!=typeof Y.data&&(Y.data=_.param(Y.data,Y.traditional)),an(tn,Y,y,Ce),H)return Ce;for(J in(W=_.event&&Y.global)&&0==_.active++&&_.event.trigger("ajaxStart"),Y.type=Y.type.toUpperCase(),Y.hasContent=!Pn.test(Y.type),h=Y.url.replace(Nn,""),Y.hasContent?Y.data&&Y.processData&&0===(Y.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Y.data=Y.data.replace(kn,"+")):(ie=Y.url.slice(h.length),Y.data&&(Y.processData||"string"==typeof Y.data)&&(h+=(Vr.test(h)?"&":"?")+Y.data,delete Y.data),!1===Y.cache&&(h=h.replace(Dn,"$1"),ie=(Vr.test(h)?"&":"?")+"_="+Kr.guid+++ie),Y.url=h+ie),Y.ifModified&&(_.lastModified[h]&&Ce.setRequestHeader("If-Modified-Since",_.lastModified[h]),_.etag[h]&&Ce.setRequestHeader("If-None-Match",_.etag[h])),(Y.data&&Y.hasContent&&!1!==Y.contentType||y.contentType)&&Ce.setRequestHeader("Content-Type",Y.contentType),Ce.setRequestHeader("Accept",Y.dataTypes[0]&&Y.accepts[Y.dataTypes[0]]?Y.accepts[Y.dataTypes[0]]+("*"!==Y.dataTypes[0]?", "+rn+"; q=0.01":""):Y.accepts["*"]),Y.headers)Ce.setRequestHeader(J,Y.headers[J]);if(Y.beforeSend&&(!1===Y.beforeSend.call(Z,Ce,Y)||H))return Ce.abort();if(Me="abort",de.add(Y.complete),Ce.done(Y.success),Ce.fail(Y.error),p=an(Sr,Y,y,Ce)){if(Ce.readyState=1,W&&_e.trigger("ajaxSend",[Ce,Y]),H)return Ce;Y.async&&0<Y.timeout&&(N=e.setTimeout(function(){Ce.abort("timeout")},Y.timeout));try{H=!1,p.send(Qe,ft)}catch(De){if(H)throw De;ft(-1,De)}}else ft(-1,"No Transport");function ft(De,je,nr,ur){var dt,jt,Ut,wt,Yt,xt=je;H||(H=!0,N&&e.clearTimeout(N),p=void 0,x=ur||"",Ce.readyState=0<De?4:0,dt=200<=De&&De<300||304===De,nr&&(wt=function(Xe,mt,ht){for(var Ot,Ae,Oe,Ke,vt=Xe.contents,Ge=Xe.dataTypes;"*"===Ge[0];)Ge.shift(),void 0===Ot&&(Ot=Xe.mimeType||mt.getResponseHeader("Content-Type"));if(Ot)for(Ae in vt)if(vt[Ae]&&vt[Ae].test(Ot)){Ge.unshift(Ae);break}if(Ge[0]in ht)Oe=Ge[0];else{for(Ae in ht){if(!Ge[0]||Xe.converters[Ae+" "+Ge[0]]){Oe=Ae;break}Ke||(Ke=Ae)}Oe=Oe||Ke}if(Oe)return Oe!==Ge[0]&&Ge.unshift(Oe),ht[Oe]}(Y,Ce,nr)),!dt&&-1<_.inArray("script",Y.dataTypes)&&_.inArray("json",Y.dataTypes)<0&&(Y.converters["text script"]=function(){}),wt=function(Xe,mt,ht,Ot){var Ae,Oe,Ke,vt,Ge,gt={},Gt=Xe.dataTypes.slice();if(Gt[1])for(Ke in Xe.converters)gt[Ke.toLowerCase()]=Xe.converters[Ke];for(Oe=Gt.shift();Oe;)if(Xe.responseFields[Oe]&&(ht[Xe.responseFields[Oe]]=mt),!Ge&&Ot&&Xe.dataFilter&&(mt=Xe.dataFilter(mt,Xe.dataType)),Ge=Oe,Oe=Gt.shift())if("*"===Oe)Oe=Ge;else if("*"!==Ge&&Ge!==Oe){if(!(Ke=gt[Ge+" "+Oe]||gt["* "+Oe]))for(Ae in gt)if((vt=Ae.split(" "))[1]===Oe&&(Ke=gt[Ge+" "+vt[0]]||gt["* "+vt[0]])){!0===Ke?Ke=gt[Ae]:!0!==gt[Ae]&&(Oe=vt[0],Gt.unshift(vt[1]));break}if(!0!==Ke)if(Ke&&Xe.throws)mt=Ke(mt);else try{mt=Ke(mt)}catch(cr){return{state:"parsererror",error:Ke?cr:"No conversion from "+Ge+" to "+Oe}}}return{state:"success",data:mt}}(Y,wt,Ce,dt),dt?(Y.ifModified&&((Yt=Ce.getResponseHeader("Last-Modified"))&&(_.lastModified[h]=Yt),(Yt=Ce.getResponseHeader("etag"))&&(_.etag[h]=Yt)),204===De||"HEAD"===Y.type?xt="nocontent":304===De?xt="notmodified":(xt=wt.state,jt=wt.data,dt=!(Ut=wt.error))):(Ut=xt,!De&&xt||(xt="error",De<0&&(De=0))),Ce.status=De,Ce.statusText=(je||xt)+"",dt?ve.resolveWith(Z,[jt,xt,Ce]):ve.rejectWith(Z,[Ce,xt,Ut]),Ce.statusCode(He),He=void 0,W&&_e.trigger(dt?"ajaxSuccess":"ajaxError",[Ce,Y,dt?jt:Ut]),de.fireWith(Z,[Ce,xt]),W&&(_e.trigger("ajaxComplete",[Ce,Y]),--_.active||_.event.trigger("ajaxStop")))}return Ce},getJSON:function(o,y,p){return _.get(o,y,p,"json")},getScript:function(o,y){return _.get(o,void 0,y,"script")}}),_.each(["get","post"],function(o,y){_[y]=function(p,h,x,A){return R(h)&&(A=A||x,x=h,h=void 0),_.ajax(_.extend({url:p,type:y,dataType:A,data:h,success:x},_.isPlainObject(p)&&p))}}),_.ajaxPrefilter(function(o){var y;for(y in o.headers)"content-type"===y.toLowerCase()&&(o.contentType=o.headers[y]||"")}),_._evalUrl=function(o,y,p){return _.ajax({url:o,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(h){_.globalEval(h,y,p)}})},_.fn.extend({wrapAll:function(o){var y;return this[0]&&(R(o)&&(o=o.call(this[0])),y=_(o,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&y.insertBefore(this[0]),y.map(function(){for(var p=this;p.firstElementChild;)p=p.firstElementChild;return p}).append(this)),this},wrapInner:function(o){return R(o)?this.each(function(y){_(this).wrapInner(o.call(this,y))}):this.each(function(){var y=_(this),p=y.contents();p.length?p.wrapAll(o):y.append(o)})},wrap:function(o){var y=R(o);return this.each(function(p){_(this).wrapAll(y?o.call(this,p):o)})},unwrap:function(o){return this.parent(o).not("body").each(function(){_(this).replaceWith(this.childNodes)}),this}}),_.expr.pseudos.hidden=function(o){return!_.expr.pseudos.visible(o)},_.expr.pseudos.visible=function(o){return!!(o.offsetWidth||o.offsetHeight||o.getClientRects().length)},_.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Ln={0:200,1223:204},rr=_.ajaxSettings.xhr();L.cors=!!rr&&"withCredentials"in rr,L.ajax=rr=!!rr,_.ajaxTransport(function(o){var y,p;if(L.cors||rr&&!o.crossDomain)return{send:function(h,x){var A,N=o.xhr();if(N.open(o.type,o.url,o.async,o.username,o.password),o.xhrFields)for(A in o.xhrFields)N[A]=o.xhrFields[A];for(A in o.mimeType&&N.overrideMimeType&&N.overrideMimeType(o.mimeType),o.crossDomain||h["X-Requested-With"]||(h["X-Requested-With"]="XMLHttpRequest"),h)N.setRequestHeader(A,h[A]);y=function(z){return function(){y&&(y=p=N.onload=N.onerror=N.onabort=N.ontimeout=N.onreadystatechange=null,"abort"===z?N.abort():"error"===z?"number"!=typeof N.status?x(0,"error"):x(N.status,N.statusText):x(Ln[N.status]||N.status,N.statusText,"text"!==(N.responseType||"text")||"string"!=typeof N.responseText?{binary:N.response}:{text:N.responseText},N.getAllResponseHeaders()))}},N.onload=y(),p=N.onerror=N.ontimeout=y("error"),void 0!==N.onabort?N.onabort=p:N.onreadystatechange=function(){4===N.readyState&&e.setTimeout(function(){y&&p()})},y=y("abort");try{N.send(o.hasContent&&o.data||null)}catch(z){if(y)throw z}},abort:function(){y&&y()}}}),_.ajaxPrefilter(function(o){o.crossDomain&&(o.contents.script=!1)}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(o){return _.globalEval(o),o}}}),_.ajaxPrefilter("script",function(o){void 0===o.cache&&(o.cache=!1),o.crossDomain&&(o.type="GET")}),_.ajaxTransport("script",function(o){var y,p;if(o.crossDomain||o.scriptAttrs)return{send:function(h,x){y=_("<script>").attr(o.scriptAttrs||{}).prop({charset:o.scriptCharset,src:o.url}).on("load error",p=function(A){y.remove(),p=null,A&&x("error"===A.type?404:200,A.type)}),te.head.appendChild(y[0])},abort:function(){p&&p()}}});var sn,on=[],Ar=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var o=on.pop()||_.expando+"_"+Kr.guid++;return this[o]=!0,o}}),_.ajaxPrefilter("json jsonp",function(o,y,p){var h,x,A,N=!1!==o.jsonp&&(Ar.test(o.url)?"url":"string"==typeof o.data&&0===(o.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ar.test(o.data)&&"data");if(N||"jsonp"===o.dataTypes[0])return h=o.jsonpCallback=R(o.jsonpCallback)?o.jsonpCallback():o.jsonpCallback,N?o[N]=o[N].replace(Ar,"$1"+h):!1!==o.jsonp&&(o.url+=(Vr.test(o.url)?"&":"?")+o.jsonp+"="+h),o.converters["script json"]=function(){return A||_.error(h+" was not called"),A[0]},o.dataTypes[0]="json",x=e[h],e[h]=function(){A=arguments},p.always(function(){void 0===x?_(e).removeProp(h):e[h]=x,o[h]&&(o.jsonpCallback=y.jsonpCallback,on.push(h)),A&&R(x)&&x(A[0]),A=x=void 0}),"script"}),L.createHTMLDocument=((sn=te.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===sn.childNodes.length),_.parseHTML=function(o,y,p){return"string"!=typeof o?[]:("boolean"==typeof y&&(p=y,y=!1),y||(L.createHTMLDocument?((h=(y=te.implementation.createHTMLDocument("")).createElement("base")).href=te.location.href,y.head.appendChild(h)):y=te),A=!p&&[],(x=lt.exec(o))?[y.createElement(x[1])]:(x=Te([o],y,A),A&&A.length&&_(A).remove(),_.merge([],x.childNodes)));var h,x,A},_.fn.load=function(o,y,p){var h,x,A,N=this,z=o.indexOf(" ");return-1<z&&(h=Ft(o.slice(z)),o=o.slice(0,z)),R(y)?(p=y,y=void 0):y&&"object"==typeof y&&(x="POST"),0<N.length&&_.ajax({url:o,type:x||"GET",dataType:"html",data:y}).done(function(H){A=arguments,N.html(h?_("<div>").append(_.parseHTML(H)).find(h):H)}).always(p&&function(H,W){N.each(function(){p.apply(this,A||[H.responseText,W,H])})}),this},_.expr.pseudos.animated=function(o){return _.grep(_.timers,function(y){return o===y.elem}).length},_.offset={setOffset:function(o,y,p){var h,x,A,N,z,H,W=_.css(o,"position"),J=_(o),ie={};"static"===W&&(o.style.position="relative"),z=J.offset(),A=_.css(o,"top"),H=_.css(o,"left"),("absolute"===W||"fixed"===W)&&-1<(A+H).indexOf("auto")?(N=(h=J.position()).top,x=h.left):(N=parseFloat(A)||0,x=parseFloat(H)||0),R(y)&&(y=y.call(o,p,_.extend({},z))),null!=y.top&&(ie.top=y.top-z.top+N),null!=y.left&&(ie.left=y.left-z.left+x),"using"in y?y.using.call(o,ie):J.css(ie)}},_.fn.extend({offset:function(o){if(arguments.length)return void 0===o?this:this.each(function(x){_.offset.setOffset(this,o,x)});var y,p,h=this[0];return h?h.getClientRects().length?{top:(y=h.getBoundingClientRect()).top+(p=h.ownerDocument.defaultView).pageYOffset,left:y.left+p.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var o,y,p,h=this[0],x={top:0,left:0};if("fixed"===_.css(h,"position"))y=h.getBoundingClientRect();else{for(y=this.offset(),p=h.ownerDocument,o=h.offsetParent||p.documentElement;o&&(o===p.body||o===p.documentElement)&&"static"===_.css(o,"position");)o=o.parentNode;o&&o!==h&&1===o.nodeType&&((x=_(o).offset()).top+=_.css(o,"borderTopWidth",!0),x.left+=_.css(o,"borderLeftWidth",!0))}return{top:y.top-x.top-_.css(h,"marginTop",!0),left:y.left-x.left-_.css(h,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var o=this.offsetParent;o&&"static"===_.css(o,"position");)o=o.offsetParent;return o||r})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(o,y){var p="pageYOffset"===y;_.fn[o]=function(h){return bt(this,function(x,A,N){var z;if(X(x)?z=x:9===x.nodeType&&(z=x.defaultView),void 0===N)return z?z[y]:x[A];z?z.scrollTo(p?z.pageXOffset:N,p?N:z.pageYOffset):x[A]=N},o,h,arguments.length)}}),_.each(["top","left"],function(o,y){_.cssHooks[y]=zr(L.pixelPosition,function(p,h){if(h)return h=Kt(p,y),hr.test(h)?_(p).position()[y]+"px":h})}),_.each({Height:"height",Width:"width"},function(o,y){_.each({padding:"inner"+o,content:y,"":"outer"+o},function(p,h){_.fn[h]=function(x,A){var N=arguments.length&&(p||"boolean"!=typeof x),z=p||(!0===x||!0===A?"margin":"border");return bt(this,function(H,W,J){var ie;return X(H)?0===h.indexOf("outer")?H["inner"+o]:H.document.documentElement["client"+o]:9===H.nodeType?(ie=H.documentElement,Math.max(H.body["scroll"+o],ie["scroll"+o],H.body["offset"+o],ie["offset"+o],ie["client"+o])):void 0===J?_.css(H,W,z):_.style(H,W,J,z)},y,N?x:void 0,N)}})}),_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(o,y){_.fn[y]=function(p){return this.on(y,p)}}),_.fn.extend({bind:function(o,y,p){return this.on(o,null,y,p)},unbind:function(o,y){return this.off(o,null,y)},delegate:function(o,y,p,h){return this.on(y,o,p,h)},undelegate:function(o,y,p){return 1===arguments.length?this.off(o,"**"):this.off(y,o||"**",p)},hover:function(o,y){return this.mouseenter(o).mouseleave(y||o)}}),_.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(o,y){_.fn[y]=function(p,h){return 0<arguments.length?this.on(y,null,p,h):this.trigger(y)}});var Rn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;_.proxy=function(o,y){var p,h,x;if("string"==typeof y&&(p=o[y],y=o,o=p),R(o))return h=g.call(arguments,2),(x=function(){return o.apply(y||this,h.concat(g.call(arguments)))}).guid=o.guid=o.guid||_.guid++,x},_.holdReady=function(o){o?_.readyWait++:_.ready(!0)},_.isArray=Array.isArray,_.parseJSON=JSON.parse,_.nodeName=Le,_.isFunction=R,_.isWindow=X,_.camelCase=u,_.type=ce,_.now=Date.now,_.isNumeric=function(o){var y=_.type(o);return("number"===y||"string"===y)&&!isNaN(o-parseFloat(o))},_.trim=function(o){return null==o?"":(o+"").replace(Rn,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var In=e.jQuery,qn=e.$;return _.noConflict=function(o){return e.$===_&&(e.$=qn),o&&e.jQuery===_&&(e.jQuery=In),_},typeof M>"u"&&(e.jQuery=e.$=_),_}),function(e,M){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(k){return M(e,k)}):"object"==typeof module&&module.exports?module.exports=M(e,require("jquery")):e.jQueryBridget=M(e,e.jQuery)}(window,function(M,k){"use strict";var E=Array.prototype.slice,g=M.console,V=typeof g>"u"?function(){}:function(l){g.error(l)};function S(l,m,v){function b(L,R,X){var te,I="$()."+l+'("'+R+'")';return L.each(function(re,ce){var we=v.data(ce,l);if(we){var _=we[R];if(_&&"_"!=R.charAt(0)){var pe=_.apply(we,X);te=void 0===te?pe:te}else V(I+" is not a valid method")}else V(l+" not initialized. Cannot call methods, i.e. "+I)}),void 0!==te?te:L}function C(L,R){L.each(function(X,te){var I=v.data(te,l);I?(I.option(R),I._init()):(I=new m(te,R),v.data(te,l,I))})}(v=v||k||M.jQuery)&&(m.prototype.option||(m.prototype.option=function(L){!v.isPlainObject(L)||(this.options=v.extend(!0,this.options,L))}),v.fn[l]=function(L){if("string"==typeof L){var R=E.call(arguments,1);return b(this,L,R)}return C(this,L),this},w(v))}function w(l){!l||l&&l.bridget||(l.bridget=S)}return w(k||M.jQuery),S}),function(e,M){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",M):"object"==typeof module&&module.exports?module.exports=M():e.EvEmitter=M()}(typeof window<"u"?window:this,function(){function e(){}var M=e.prototype;return M.on=function(k,E){if(k&&E){var g=this._events=this._events||{},V=g[k]=g[k]||[];return-1==V.indexOf(E)&&V.push(E),this}},M.once=function(k,E){if(k&&E){this.on(k,E);var g=this._onceEvents=this._onceEvents||{};return(g[k]=g[k]||{})[E]=!0,this}},M.off=function(k,E){var g=this._events&&this._events[k];if(g&&g.length){var V=g.indexOf(E);return-1!=V&&g.splice(V,1),this}},M.emitEvent=function(k,E){var g=this._events&&this._events[k];if(g&&g.length){g=g.slice(0),E=E||[];for(var V=this._onceEvents&&this._onceEvents[k],S=0;S<g.length;S++){var w=g[S];V&&V[w]&&(this.off(k,w),delete V[w]),w.apply(this,E)}return this}},M.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,M){"function"==typeof define&&define.amd?define("get-size/get-size",M):"object"==typeof module&&module.exports?module.exports=M():e.getSize=M()}(window,function(){"use strict";function M(C){var L=parseFloat(C);return-1==C.indexOf("%")&&!isNaN(L)&&L}var E=typeof console>"u"?function k(){}:function(C){console.error(C)},g=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],V=g.length;function w(C){var L=getComputedStyle(C);return L||E("Style returned "+L+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),L}var m,l=!1;return function b(C){if(function v(){if(!l){l=!0;var C=document.createElement("div");C.style.width="200px",C.style.padding="1px 2px 3px 4px",C.style.borderStyle="solid",C.style.borderWidth="1px 2px 3px 4px",C.style.boxSizing="border-box";var L=document.body||document.documentElement;L.appendChild(C);var R=w(C);m=200==Math.round(M(R.width)),b.isBoxSizeOuter=m,L.removeChild(C)}}(),"string"==typeof C&&(C=document.querySelector(C)),C&&"object"==typeof C&&C.nodeType){var L=w(C);if("none"==L.display)return function S(){for(var C={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},L=0;L<V;L++)C[g[L]]=0;return C}();var R={};R.width=C.offsetWidth,R.height=C.offsetHeight;for(var X=R.isBorderBox="border-box"==L.boxSizing,te=0;te<V;te++){var I=g[te],ce=parseFloat(L[I]);R[I]=isNaN(ce)?0:ce}var we=R.paddingLeft+R.paddingRight,_=R.paddingTop+R.paddingBottom,pe=R.marginLeft+R.marginRight,me=R.marginTop+R.marginBottom,ze=R.borderLeftWidth+R.borderRightWidth,ut=R.borderTopWidth+R.borderBottomWidth,nt=X&&m,Le=M(L.width);!1!==Le&&(R.width=Le+(nt?0:we+ze));var lt=M(L.height);return!1!==lt&&(R.height=lt+(nt?0:_+ut)),R.innerWidth=R.width-(we+ze),R.innerHeight=R.height-(_+ut),R.outerWidth=R.width+pe,R.outerHeight=R.height+me,R}}}),function(e,M){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",M):"object"==typeof module&&module.exports?module.exports=M():e.matchesSelector=M()}(window,function(){"use strict";var M=function(){var k=window.Element.prototype;if(k.matches)return"matches";if(k.matchesSelector)return"matchesSelector";for(var E=["webkit","moz","ms","o"],g=0;g<E.length;g++){var S=E[g]+"MatchesSelector";if(k[S])return S}}();return function(E,g){return E[M](g)}}),function(e,M){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(k){return M(e,k)}):"object"==typeof module&&module.exports?module.exports=M(e,require("desandro-matches-selector")):e.fizzyUIUtils=M(e,e.matchesSelector)}(window,function(M,k){var E={extend:function(S,w){for(var l in w)S[l]=w[l];return S},modulo:function(S,w){return(S%w+w)%w}},g=Array.prototype.slice;E.makeArray=function(S){return Array.isArray(S)?S:null==S?[]:"object"==typeof S&&"number"==typeof S.length?g.call(S):[S]},E.removeFrom=function(S,w){var l=S.indexOf(w);-1!=l&&S.splice(l,1)},E.getParent=function(S,w){for(;S.parentNode&&S!=document.body;)if(k(S=S.parentNode,w))return S},E.getQueryElement=function(S){return"string"==typeof S?document.querySelector(S):S},E.handleEvent=function(S){var w="on"+S.type;this[w]&&this[w](S)},E.filterFindElements=function(S,w){S=E.makeArray(S);var l=[];return S.forEach(function(m){if(m instanceof HTMLElement){if(!w)return void l.push(m);k(m,w)&&l.push(m);for(var v=m.querySelectorAll(w),b=0;b<v.length;b++)l.push(v[b])}}),l},E.debounceMethod=function(S,w,l){l=l||100;var m=S.prototype[w],v=w+"Timeout";S.prototype[w]=function(){var b=this[v];clearTimeout(b);var C=arguments,L=this;this[v]=setTimeout(function(){m.apply(L,C),delete L[v]},l)}},E.docReady=function(S){var w=document.readyState;"complete"==w||"interactive"==w?setTimeout(S):document.addEventListener("DOMContentLoaded",S)},E.toDashed=function(S){return S.replace(/(.)([A-Z])/g,function(w,l,m){return l+"-"+m}).toLowerCase()};var V=M.console;return E.htmlInit=function(S,w){E.docReady(function(){var l=E.toDashed(w),m="data-"+l,v=document.querySelectorAll("["+m+"]"),b=document.querySelectorAll(".js-"+l),C=E.makeArray(v).concat(E.makeArray(b)),L=m+"-options",R=M.jQuery;C.forEach(function(X){var I,te=X.getAttribute(m)||X.getAttribute(L);try{I=te&&JSON.parse(te)}catch(ce){return void(V&&V.error("Error parsing "+m+" on "+X.className+": "+ce))}var re=new S(X,I);R&&R.data(X,w,re)})})},E}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(k){return M(0,k)}):"object"==typeof module&&module.exports?module.exports=M(0,require("get-size")):(e.Flickity=e.Flickity||{},e.Flickity.Cell=M(0,e.getSize))}(window,function(M,k){function E(V,S){this.element=V,this.parent=S,this.create()}var g=E.prototype;return g.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0,this.element.style[this.parent.originSide]=0},g.destroy=function(){this.unselect(),this.element.style.position="",this.element.style[this.parent.originSide]="",this.element.style.transform="",this.element.removeAttribute("aria-hidden")},g.getSize=function(){this.size=k(this.element)},g.setPosition=function(V){this.x=V,this.updateTarget(),this.renderPosition(V)},g.updateTarget=g.setDefaultTarget=function(){this.target=this.x+this.size["left"==this.parent.originSide?"marginLeft":"marginRight"]+this.size.width*this.parent.cellAlign},g.renderPosition=function(V){var S="left"===this.parent.originSide?1:-1;this.element.style.transform="translateX("+this.parent.getPositionValue(this.parent.options.percentPosition?V*S*(this.parent.size.innerWidth/this.size.width):V*S)+")"},g.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},g.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},g.wrapShift=function(V){this.shift=V,this.renderPosition(this.x+this.parent.slideableWidth*V)},g.remove=function(){this.element.parentNode.removeChild(this.element)},E}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/slide",M):"object"==typeof module&&module.exports?module.exports=M():(e.Flickity=e.Flickity||{},e.Flickity.Slide=M())}(window,function(){"use strict";function M(E){this.parent=E,this.isOriginLeft="left"==E.originSide,this.cells=[],this.outerWidth=0,this.height=0}var k=M.prototype;return k.addCell=function(E){this.cells.push(E),this.outerWidth+=E.size.outerWidth,this.height=Math.max(E.size.outerHeight,this.height),1==this.cells.length&&(this.x=E.x,this.firstMargin=E.size[this.isOriginLeft?"marginLeft":"marginRight"])},k.updateTarget=function(){var E=this.isOriginLeft?"marginRight":"marginLeft",g=this.getLastCell();this.target=this.x+this.firstMargin+(this.outerWidth-(this.firstMargin+(g?g.size[E]:0)))*this.parent.cellAlign},k.getLastCell=function(){return this.cells[this.cells.length-1]},k.select=function(){this.cells.forEach(function(E){E.select()})},k.unselect=function(){this.cells.forEach(function(E){E.unselect()})},k.getCellElements=function(){return this.cells.map(function(E){return E.element})},M}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(k){return M(0,k)}):"object"==typeof module&&module.exports?module.exports=M(0,require("fizzy-ui-utils")):(e.Flickity=e.Flickity||{},e.Flickity.animatePrototype=M(0,e.fizzyUIUtils))}(window,function(M,k){return{startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var g=this.x;if(this.integratePhysics(),this.positionSlider(),this.settle(g),this.isAnimating){var V=this;requestAnimationFrame(function(){V.animate()})}},positionSlider:function(){var g=this.x;this.options.wrapAround&&this.cells.length>1&&(g=k.modulo(g,this.slideableWidth),this.shiftWrapCells(g-=this.slideableWidth)),this.setTranslateX(g,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(g,V){g+=this.cursorPosition;var S=this.getPositionValue(g=this.options.rightToLeft?-g:g);this.slider.style.transform=V?"translate3d("+S+",0,0)":"translateX("+S+")"},dispatchScrollEvent:function(){var g=this.slides[0];if(g){var V=-this.x-g.target;this.dispatchEvent("scroll",null,[V/this.slidesWidth,V])}},positionSliderAtSelected:function(){!this.cells.length||(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(g){return this.options.percentPosition?.01*Math.round(g/this.size.innerWidth*1e4)+"%":Math.round(g)+"px"},settle:function(g){!this.isPointerDown&&Math.round(100*this.x)==Math.round(100*g)&&this.restingFrames++,this.restingFrames>2&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(g){this._shiftCells(this.beforeShiftCells,this.cursorPosition+g,-1),this._shiftCells(this.afterShiftCells,this.size.innerWidth-(g+this.slideableWidth+this.cursorPosition),1)},_shiftCells:function(g,V,S){for(var w=0;w<g.length;w++){var l=g[w];l.wrapShift(V>0?S:0),V-=l.size.outerWidth}},_unshiftCells:function(g){if(g&&g.length)for(var V=0;V<g.length;V++)g[V].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(g){this.velocity+=g},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){this.isDraggable&&this.isPointerDown&&this.applyForce(this.dragX-this.x-this.velocity)},applySelectedAttraction:function(){this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length||this.applyForce((-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction)}}}),function(e,M){if("function"==typeof define&&define.amd)define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(E,g,V,S,w,l){return M(e,E,g,V,S,w,l)});else if("object"==typeof module&&module.exports)module.exports=M(e,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate"));else{var k=e.Flickity;e.Flickity=M(e,e.EvEmitter,e.getSize,e.fizzyUIUtils,k.Cell,k.Slide,k.animatePrototype)}}(window,function(M,k,E,g,V,S,w){var l=M.jQuery,m=M.getComputedStyle,v=M.console;function b(I,re){for(I=g.makeArray(I);I.length;)re.appendChild(I.shift())}var C=0,L={};function R(I,re){var ce=g.getQueryElement(I);if(ce){if(this.element=ce,this.element.flickityGUID){var we=L[this.element.flickityGUID];return we&&we.option(re),we}l&&(this.$element=l(this.element)),this.options=g.extend({},this.constructor.defaults),this.option(re),this._create()}else v&&v.error("Bad element for Flickity: "+(ce||I))}R.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},R.createMethods=[];var X=R.prototype;g.extend(X,k.prototype),X._create=function(){var I=this.guid=++C;for(var re in this.element.flickityGUID=I,L[I]=this,this.selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&M.addEventListener("resize",this),this.options.on)this.on(re,this.options.on[re]);R.createMethods.forEach(function(we){this[we]()},this),this.options.watchCSS?this.watchCSS():this.activate()},X.option=function(I){g.extend(this.options,I)},X.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),b(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},X._createSlider=function(){var I=document.createElement("div");I.className="flickity-slider",I.style[this.originSide]=0,this.slider=I},X._filterFindCellElements=function(I){return g.filterFindElements(I,this.options.cellSelector)},X.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},X._makeCells=function(I){return this._filterFindCellElements(I).map(function(we){return new V(we,this)},this)},X.getLastCell=function(){return this.cells[this.cells.length-1]},X.getLastSlide=function(){return this.slides[this.slides.length-1]},X.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},X._positionCells=function(I){this.maxCellHeight=(I=I||0)&&this.maxCellHeight||0;var re=0;if(I>0){var ce=this.cells[I-1];re=ce.x+ce.size.outerWidth}for(var we=this.cells.length,_=I;_<we;_++){var pe=this.cells[_];pe.setPosition(re),re+=pe.size.outerWidth,this.maxCellHeight=Math.max(pe.size.outerHeight,this.maxCellHeight)}this.slideableWidth=re,this.updateSlides(),this._containSlides(),this.slidesWidth=we?this.getLastSlide().target-this.slides[0].target:0},X._sizeCells=function(I){I.forEach(function(re){re.getSize()})},X.updateSlides=function(){if(this.slides=[],this.cells.length){var I=new S(this);this.slides.push(I);var ce="left"==this.originSide?"marginRight":"marginLeft",we=this._getCanCellFit();this.cells.forEach(function(_,pe){I.cells.length?(we.call(this,pe,I.outerWidth-I.firstMargin+(_.size.outerWidth-_.size[ce]))||(I.updateTarget(),I=new S(this),this.slides.push(I)),I.addCell(_)):I.addCell(_)},this),I.updateTarget(),this.updateSelectedSlide()}},X._getCanCellFit=function(){var I=this.options.groupCells;if(!I)return function(){return!1};if("number"==typeof I){var re=parseInt(I,10);return function(_){return _%re!=0}}var ce="string"==typeof I&&I.match(/^(\d+)%$/),we=ce?parseInt(ce[1],10)/100:1;return function(_,pe){return pe<=(this.size.innerWidth+1)*we}},X._init=X.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},X.getSize=function(){this.size=E(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var te={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return X.setCellAlign=function(){var I=te[this.options.cellAlign];this.cellAlign=I?I[this.originSide]:this.options.cellAlign},X.setGallerySize=function(){this.options.setGallerySize&&(this.viewport.style.height=(this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight)+"px")},X._getWrapShiftCells=function(){if(this.options.wrapAround){this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells);var I=this.cursorPosition;this.beforeShiftCells=this._getGapCells(I,this.cells.length-1,-1),this.afterShiftCells=this._getGapCells(I=this.size.innerWidth-this.cursorPosition,0,1)}},X._getGapCells=function(I,re,ce){for(var we=[];I>0;){var _=this.cells[re];if(!_)break;we.push(_),re+=ce,I-=_.size.outerWidth}return we},X._containSlides=function(){if(this.options.contain&&!this.options.wrapAround&&this.cells.length){var I=this.options.rightToLeft,re=I?"marginRight":"marginLeft",ce=I?"marginLeft":"marginRight",we=this.slideableWidth-this.getLastCell().size[ce],_=we<this.size.innerWidth,pe=this.cursorPosition+this.cells[0].size[re],me=we-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(ze){_?ze.target=we*this.cellAlign:(ze.target=Math.max(ze.target,pe),ze.target=Math.min(ze.target,me))},this)}},X.dispatchEvent=function(I,re,ce){var we=re?[re].concat(ce):ce;if(this.emitEvent(I,we),l&&this.$element){var _=I+=this.options.namespaceJQueryEvents?".flickity":"";if(re){var pe=new l.Event(re);pe.type=I,_=pe}this.$element.trigger(_,ce)}},X.select=function(I,re,ce){if(this.isActive&&(I=parseInt(I,10),this._wrapSelect(I),(this.options.wrapAround||re)&&(I=g.modulo(I,this.slides.length)),this.slides[I])){var we=this.selectedIndex;this.selectedIndex=I,this.updateSelectedSlide(),ce?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[I]),I!=we&&this.dispatchEvent("change",null,[I]),this.dispatchEvent("cellSelect")}},X._wrapSelect=function(I){var re=this.slides.length;if(!(this.options.wrapAround&&re>1))return I;var we=g.modulo(I,re),_=Math.abs(we-this.selectedIndex),pe=Math.abs(we+re-this.selectedIndex),me=Math.abs(we-re-this.selectedIndex);!this.isDragSelect&&pe<_?I+=re:!this.isDragSelect&&me<_&&(I-=re),I<0?this.x-=this.slideableWidth:I>=re&&(this.x+=this.slideableWidth)},X.previous=function(I,re){this.select(this.selectedIndex-1,I,re)},X.next=function(I,re){this.select(this.selectedIndex+1,I,re)},X.updateSelectedSlide=function(){var I=this.slides[this.selectedIndex];!I||(this.unselectSelectedSlide(),this.selectedSlide=I,I.select(),this.selectedCells=I.cells,this.selectedElements=I.getCellElements(),this.selectedCell=I.cells[0],this.selectedElement=this.selectedElements[0])},X.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},X.selectInitialIndex=function(){var I=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(I&&"string"==typeof I&&this.queryCell(I))return void this.selectCell(I,!1,!0);var ce=0;I&&this.slides[I]&&(ce=I),this.select(ce,!1,!0)}},X.selectCell=function(I,re,ce){var we=this.queryCell(I);if(we){var _=this.getCellSlideIndex(we);this.select(_,re,ce)}},X.getCellSlideIndex=function(I){for(var re=0;re<this.slides.length;re++)if(-1!=this.slides[re].cells.indexOf(I))return re},X.getCell=function(I){for(var re=0;re<this.cells.length;re++){var ce=this.cells[re];if(ce.element==I)return ce}},X.getCells=function(I){I=g.makeArray(I);var re=[];return I.forEach(function(ce){var we=this.getCell(ce);we&&re.push(we)},this),re},X.getCellElements=function(){return this.cells.map(function(I){return I.element})},X.getParentCell=function(I){return this.getCell(I)||(I=g.getParent(I,".flickity-slider > *"),this.getCell(I))},X.getAdjacentCellElements=function(I,re){if(!I)return this.selectedSlide.getCellElements();re=void 0===re?this.selectedIndex:re;var ce=this.slides.length;if(1+2*I>=ce)return this.getCellElements();for(var we=[],_=re-I;_<=re+I;_++){var pe=this.options.wrapAround?g.modulo(_,ce):_,me=this.slides[pe];me&&(we=we.concat(me.getCellElements()))}return we},X.queryCell=function(I){if("number"==typeof I)return this.cells[I];if("string"==typeof I){if(I.match(/^[#.]?[\d/]/))return;I=this.element.querySelector(I)}return this.getCell(I)},X.uiChange=function(){this.emitEvent("uiChange")},X.childUIPointerDown=function(I){"touchstart"!=I.type&&I.preventDefault(),this.focus()},X.onresize=function(){this.watchCSS(),this.resize()},g.debounceMethod(R,"onresize",150),X.resize=function(){!this.isActive||this.isAnimating||this.isDragging||(this.getSize(),this.options.wrapAround&&(this.x=g.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize"),this.selectCell(this.selectedElements&&this.selectedElements[0],!1,!0))},X.watchCSS=function(){this.options.watchCSS&&(-1!=m(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},X.onkeydown=function(I){var re=document.activeElement&&document.activeElement!=this.element;if(this.options.accessibility&&!re){var ce=R.keyboardHandlers[I.keyCode];ce&&ce.call(this)}},R.keyboardHandlers={37:function(){var I=this.options.rightToLeft?"next":"previous";this.uiChange(),this[I]()},39:function(){var I=this.options.rightToLeft?"previous":"next";this.uiChange(),this[I]()}},X.focus=function(){var I=M.pageYOffset;this.element.focus({preventScroll:!0}),M.pageYOffset!=I&&M.scrollTo(M.pageXOffset,I)},X.deactivate=function(){!this.isActive||(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(I){I.destroy()}),this.element.removeChild(this.viewport),b(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},X.destroy=function(){this.deactivate(),M.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),l&&this.$element&&l.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete L[this.guid]},g.extend(X,w),R.data=function(I){var re=(I=g.getQueryElement(I))&&I.flickityGUID;return re&&L[re]},g.htmlInit(R,"flickity"),l&&l.bridget&&l.bridget("flickity",R),R.setJQuery=function(I){l=I},R.Cell=V,R.Slide=S,R}),function(e,M){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(k){return M(e,k)}):"object"==typeof module&&module.exports?module.exports=M(e,require("ev-emitter")):e.Unipointer=M(e,e.EvEmitter)}(window,function(M,k){function g(){}var V=g.prototype=Object.create(k.prototype);V.bindStartEvent=function(w){this._bindStartEvent(w,!0)},V.unbindStartEvent=function(w){this._bindStartEvent(w,!1)},V._bindStartEvent=function(w,l){var v="mousedown";"ontouchstart"in M?v="touchstart":M.PointerEvent&&(v="pointerdown"),w[(l=void 0===l||l)?"addEventListener":"removeEventListener"](v,this)},V.handleEvent=function(w){var l="on"+w.type;this[l]&&this[l](w)},V.getTouch=function(w){for(var l=0;l<w.length;l++){var m=w[l];if(m.identifier==this.pointerIdentifier)return m}},V.onmousedown=function(w){var l=w.button;l&&0!==l&&1!==l||this._pointerDown(w,w)},V.ontouchstart=function(w){this._pointerDown(w,w.changedTouches[0])},V.onpointerdown=function(w){this._pointerDown(w,w)},V._pointerDown=function(w,l){w.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==l.pointerId?l.pointerId:l.identifier,this.pointerDown(w,l))},V.pointerDown=function(w,l){this._bindPostStartEvents(w),this.emitEvent("pointerDown",[w,l])};var S={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return V._bindPostStartEvents=function(w){if(w){var l=S[w.type];l.forEach(function(m){M.addEventListener(m,this)},this),this._boundPointerEvents=l}},V._unbindPostStartEvents=function(){!this._boundPointerEvents||(this._boundPointerEvents.forEach(function(w){M.removeEventListener(w,this)},this),delete this._boundPointerEvents)},V.onmousemove=function(w){this._pointerMove(w,w)},V.onpointermove=function(w){w.pointerId==this.pointerIdentifier&&this._pointerMove(w,w)},V.ontouchmove=function(w){var l=this.getTouch(w.changedTouches);l&&this._pointerMove(w,l)},V._pointerMove=function(w,l){this.pointerMove(w,l)},V.pointerMove=function(w,l){this.emitEvent("pointerMove",[w,l])},V.onmouseup=function(w){this._pointerUp(w,w)},V.onpointerup=function(w){w.pointerId==this.pointerIdentifier&&this._pointerUp(w,w)},V.ontouchend=function(w){var l=this.getTouch(w.changedTouches);l&&this._pointerUp(w,l)},V._pointerUp=function(w,l){this._pointerDone(),this.pointerUp(w,l)},V.pointerUp=function(w,l){this.emitEvent("pointerUp",[w,l])},V._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},V._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},V.pointerDone=function E(){},V.onpointercancel=function(w){w.pointerId==this.pointerIdentifier&&this._pointerCancel(w,w)},V.ontouchcancel=function(w){var l=this.getTouch(w.changedTouches);l&&this._pointerCancel(w,l)},V._pointerCancel=function(w,l){this._pointerDone(),this.pointerCancel(w,l)},V.pointerCancel=function(w,l){this.emitEvent("pointerCancel",[w,l])},g.getPointerPoint=function(w){return{x:w.pageX,y:w.pageY}},g}),function(e,M){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(k){return M(e,k)}):"object"==typeof module&&module.exports?module.exports=M(e,require("unipointer")):e.Unidragger=M(e,e.Unipointer)}(window,function(M,k){function E(){}var g=E.prototype=Object.create(k.prototype);g.bindHandles=function(){this._bindHandles(!0)},g.unbindHandles=function(){this._bindHandles(!1)},g._bindHandles=function(w){for(var l=(w=void 0===w||w)?"addEventListener":"removeEventListener",m=w?this._touchActionValue:"",v=0;v<this.handles.length;v++){var b=this.handles[v];this._bindStartEvent(b,w),b[l]("click",this),M.PointerEvent&&(b.style.touchAction=m)}},g._touchActionValue="none",g.pointerDown=function(w,l){!this.okayPointerDown(w)||(this.pointerDownPointer={pageX:l.pageX,pageY:l.pageY},w.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(w),this.emitEvent("pointerDown",[w,l]))};var V={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},S={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return g.okayPointerDown=function(w){var v=!V[w.target.nodeName]||S[w.target.type];return v||this._pointerReset(),v},g.pointerDownBlur=function(){var w=document.activeElement;w&&w.blur&&w!=document.body&&w.blur()},g.pointerMove=function(w,l){var m=this._dragPointerMove(w,l);this.emitEvent("pointerMove",[w,l,m]),this._dragMove(w,l,m)},g._dragPointerMove=function(w,l){var m={x:l.pageX-this.pointerDownPointer.pageX,y:l.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(m)&&this._dragStart(w,l),m},g.hasDragStarted=function(w){return Math.abs(w.x)>3||Math.abs(w.y)>3},g.pointerUp=function(w,l){this.emitEvent("pointerUp",[w,l]),this._dragPointerUp(w,l)},g._dragPointerUp=function(w,l){this.isDragging?this._dragEnd(w,l):this._staticClick(w,l)},g._dragStart=function(w,l){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(w,l)},g.dragStart=function(w,l){this.emitEvent("dragStart",[w,l])},g._dragMove=function(w,l,m){!this.isDragging||this.dragMove(w,l,m)},g.dragMove=function(w,l,m){w.preventDefault(),this.emitEvent("dragMove",[w,l,m])},g._dragEnd=function(w,l){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(w,l)},g.dragEnd=function(w,l){this.emitEvent("dragEnd",[w,l])},g.onclick=function(w){this.isPreventingClicks&&w.preventDefault()},g._staticClick=function(w,l){this.isIgnoringMouseUp&&"mouseup"==w.type||(this.staticClick(w,l),"mouseup"!=w.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},g.staticClick=function(w,l){this.emitEvent("staticClick",[w,l])},E.getPointerPoint=k.getPointerPoint,E}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(k,E,g){return M(e,k,E,g)}):"object"==typeof module&&module.exports?module.exports=M(e,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):e.Flickity=M(e,e.Flickity,e.Unidragger,e.fizzyUIUtils)}(window,function(M,k,E,g){g.extend(k.defaults,{draggable:">1",dragThreshold:3}),k.createMethods.push("_createDrag");var V=k.prototype;g.extend(V,E.prototype),V._touchActionValue="pan-y",V._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable)},V.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},V.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},V.updateDraggable=function(){this.isDraggable=">1"==this.options.draggable?this.slides.length>1:this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},V.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},V.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},V._uiChangeDrag=function(){delete this.isFreeScrolling},V.pointerDown=function(l,m){this.isDraggable?!this.okayPointerDown(l)||(this._pointerDownPreventDefault(l),this.pointerDownFocus(l),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=w(),M.addEventListener("scroll",this),this._pointerDownDefault(l,m)):this._pointerDownDefault(l,m)},V._pointerDownDefault=function(l,m){this.pointerDownPointer={pageX:m.pageX,pageY:m.pageY},this._bindPostStartEvents(l),this.dispatchEvent("pointerDown",l,[m])};var S={INPUT:!0,TEXTAREA:!0,SELECT:!0};function w(){return{x:M.pageXOffset,y:M.pageYOffset}}return V.pointerDownFocus=function(l){S[l.target.nodeName]||this.focus()},V._pointerDownPreventDefault=function(l){"touchstart"!=l.type&&"touch"!=l.pointerType&&!S[l.target.nodeName]&&l.preventDefault()},V.hasDragStarted=function(l){return Math.abs(l.x)>this.options.dragThreshold},V.pointerUp=function(l,m){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",l,[m]),this._dragPointerUp(l,m)},V.pointerDone=function(){M.removeEventListener("scroll",this),delete this.pointerDownScroll},V.dragStart=function(l,m){!this.isDraggable||(this.dragStartPosition=this.x,this.startAnimation(),M.removeEventListener("scroll",this),this.dispatchEvent("dragStart",l,[m]))},V.pointerMove=function(l,m){var v=this._dragPointerMove(l,m);this.dispatchEvent("pointerMove",l,[m,v]),this._dragMove(l,m,v)},V.dragMove=function(l,m,v){if(this.isDraggable){l.preventDefault(),this.previousDragX=this.dragX;var b=this.options.rightToLeft?-1:1;this.options.wrapAround&&(v.x%=this.slideableWidth);var C=this.dragStartPosition+v.x*b;if(!this.options.wrapAround&&this.slides.length){var L=Math.max(-this.slides[0].target,this.dragStartPosition);C=C>L?.5*(C+L):C;var R=Math.min(-this.getLastSlide().target,this.dragStartPosition);C=C<R?.5*(C+R):C}this.dragX=C,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",l,[m,v])}},V.dragEnd=function(l,m){if(this.isDraggable){this.options.freeScroll&&(this.isFreeScrolling=!0);var v=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var b=this.getRestingPosition();this.isFreeScrolling=-b>this.slides[0].target&&-b<this.getLastSlide().target}else!this.options.freeScroll&&v==this.selectedIndex&&(v+=this.dragEndBoostSelect());delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(v),delete this.isDragSelect,this.dispatchEvent("dragEnd",l,[m])}},V.dragEndRestingSelect=function(){var l=this.getRestingPosition(),m=Math.abs(this.getSlideDistance(-l,this.selectedIndex)),v=this._getClosestResting(l,m,1),b=this._getClosestResting(l,m,-1);return v.distance<b.distance?v.index:b.index},V._getClosestResting=function(l,m,v){for(var b=this.selectedIndex,C=1/0,L=this.options.contain&&!this.options.wrapAround?function(R,X){return R<=X}:function(R,X){return R<X};L(m,C)&&(C=m,null!==(m=this.getSlideDistance(-l,b+=v)));)m=Math.abs(m);return{distance:C,index:b-v}},V.getSlideDistance=function(l,m){var v=this.slides.length,b=this.options.wrapAround&&v>1,C=b?g.modulo(m,v):m,L=this.slides[C];if(!L)return null;var R=b?this.slideableWidth*Math.floor(m/v):0;return l-(L.target+R)},V.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||new Date-this.dragMoveTime>100)return 0;var l=this.getSlideDistance(-this.dragX,this.selectedIndex),m=this.previousDragX-this.dragX;return l>0&&m>0?1:l<0&&m<0?-1:0},V.staticClick=function(l,m){var v=this.getParentCell(l.target),b=v&&v.element,C=v&&this.cells.indexOf(v);this.dispatchEvent("staticClick",l,[m,b,C])},V.onscroll=function(){var l=w(),v=this.pointerDownScroll.y-l.y;(Math.abs(this.pointerDownScroll.x-l.x)>3||Math.abs(v)>3)&&this._pointerDone()},k}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(k,E,g){return M(0,k,E,g)}):"object"==typeof module&&module.exports?module.exports=M(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):M(0,e.Flickity,e.Unipointer,e.fizzyUIUtils)}(window,function(M,k,E,g){"use strict";var V="http://www.w3.org/2000/svg";function S(m,v){this.direction=m,this.parent=v,this._create()}(S.prototype=Object.create(E.prototype))._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction,this.isLeft=this.direction==(this.parent.options.rightToLeft?1:-1);var v=this.element=document.createElement("button");v.className="flickity-button flickity-prev-next-button",v.className+=this.isPrevious?" previous":" next",v.setAttribute("type","button"),this.disable(),v.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var b=this.createSVG();v.appendChild(b),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},S.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},S.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},S.prototype.createSVG=function(){var m=document.createElementNS(V,"svg");m.setAttribute("class","flickity-button-icon"),m.setAttribute("viewBox","0 0 100 100");var v=document.createElementNS(V,"path"),b=function w(m){return"string"==typeof m?m:"M "+m.x0+",50 L "+m.x1+","+(m.y1+50)+" L "+m.x2+","+(m.y2+50)+" L "+m.x3+",50  L "+m.x2+","+(50-m.y2)+" L "+m.x1+","+(50-m.y1)+" Z"}(this.parent.options.arrowShape);return v.setAttribute("d",b),v.setAttribute("class","arrow"),this.isLeft||v.setAttribute("transform","translate(100, 100) rotate(180) "),m.appendChild(v),m},S.prototype.handleEvent=g.handleEvent,S.prototype.onclick=function(){this.isEnabled&&(this.parent.uiChange(),this.parent[this.isPrevious?"previous":"next"]())},S.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},S.prototype.disable=function(){!this.isEnabled||(this.element.disabled=!0,this.isEnabled=!1)},S.prototype.update=function(){var m=this.parent.slides;this.parent.options.wrapAround&&m.length>1?this.enable():this[this.parent.selectedIndex==(this.isPrevious?0:m.length?m.length-1:0)?"disable":"enable"]()},S.prototype.destroy=function(){this.deactivate(),this.allOff()},g.extend(k.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),k.createMethods.push("_createPrevNextButtons");var l=k.prototype;return l._createPrevNextButtons=function(){!this.options.prevNextButtons||(this.prevButton=new S(-1,this),this.nextButton=new S(1,this),this.on("activate",this.activatePrevNextButtons))},l.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},l.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},k.PrevNextButton=S,k}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(k,E,g){return M(0,k,E,g)}):"object"==typeof module&&module.exports?module.exports=M(0,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):M(0,e.Flickity,e.Unipointer,e.fizzyUIUtils)}(window,function(M,k,E,g){function V(w){this.parent=w,this._create()}(V.prototype=Object.create(E.prototype))._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},V.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},V.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},V.prototype.setDots=function(){var w=this.parent.slides.length-this.dots.length;w>0?this.addDots(w):w<0&&this.removeDots(-w)},V.prototype.addDots=function(w){for(var l=document.createDocumentFragment(),m=[],v=this.dots.length,b=v+w,C=v;C<b;C++){var L=document.createElement("li");L.className="dot",L.setAttribute("aria-label","Page dot "+(C+1)),l.appendChild(L),m.push(L)}this.holder.appendChild(l),this.dots=this.dots.concat(m)},V.prototype.removeDots=function(w){this.dots.splice(this.dots.length-w,w).forEach(function(m){this.holder.removeChild(m)},this)},V.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},V.prototype.onTap=V.prototype.onClick=function(w){var l=w.target;if("LI"==l.nodeName){this.parent.uiChange();var m=this.dots.indexOf(l);this.parent.select(m)}},V.prototype.destroy=function(){this.deactivate(),this.allOff()},k.PageDots=V,g.extend(k.defaults,{pageDots:!0}),k.createMethods.push("_createPageDots");var S=k.prototype;return S._createPageDots=function(){!this.options.pageDots||(this.pageDots=new V(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},S.activatePageDots=function(){this.pageDots.activate()},S.updateSelectedPageDots=function(){this.pageDots.updateSelected()},S.updatePageDots=function(){this.pageDots.setDots()},S.deactivatePageDots=function(){this.pageDots.deactivate()},k.PageDots=V,k}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],function(k,E,g){return M(k,E,g)}):"object"==typeof module&&module.exports?module.exports=M(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):M(e.EvEmitter,e.fizzyUIUtils,e.Flickity)}(window,function(M,k,E){function g(S){this.parent=S,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}(g.prototype=Object.create(M.prototype)).play=function(){if("playing"!=this.state){if(document.hidden)return void document.addEventListener("visibilitychange",this.onVisibilityPlay);this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()}},g.prototype.tick=function(){if("playing"==this.state){var S=this.parent.options.autoPlay;S="number"==typeof S?S:3e3;var w=this;this.clear(),this.timeout=setTimeout(function(){w.parent.next(!0),w.tick()},S)}},g.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},g.prototype.clear=function(){clearTimeout(this.timeout)},g.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},g.prototype.unpause=function(){"paused"==this.state&&this.play()},g.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},g.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},k.extend(E.defaults,{pauseAutoPlayOnHover:!0}),E.createMethods.push("_createPlayer");var V=E.prototype;return V._createPlayer=function(){this.player=new g(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},V.activatePlayer=function(){!this.options.autoPlay||(this.player.play(),this.element.addEventListener("mouseenter",this))},V.playPlayer=function(){this.player.play()},V.stopPlayer=function(){this.player.stop()},V.pausePlayer=function(){this.player.pause()},V.unpausePlayer=function(){this.player.unpause()},V.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},V.onmouseenter=function(){!this.options.pauseAutoPlayOnHover||(this.player.pause(),this.element.addEventListener("mouseleave",this))},V.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},E.Player=g,E}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(k,E){return M(0,k,E)}):"object"==typeof module&&module.exports?module.exports=M(0,require("./flickity"),require("fizzy-ui-utils")):M(0,e.Flickity,e.fizzyUIUtils)}(window,function(M,k,E){var V=k.prototype;return V.insert=function(S,w){var l=this._makeCells(S);if(l&&l.length){var m=this.cells.length;w=void 0===w?m:w;var v=function g(S){var w=document.createDocumentFragment();return S.forEach(function(l){w.appendChild(l.element)}),w}(l),b=w==m;if(b?this.slider.appendChild(v):this.slider.insertBefore(v,this.cells[w].element),0===w)this.cells=l.concat(this.cells);else if(b)this.cells=this.cells.concat(l);else{var L=this.cells.splice(w,m-w);this.cells=this.cells.concat(l).concat(L)}this._sizeCells(l),this.cellChange(w,!0)}},V.append=function(S){this.insert(S,this.cells.length)},V.prepend=function(S){this.insert(S,0)},V.remove=function(S){var w=this.getCells(S);if(w&&w.length){var l=this.cells.length-1;w.forEach(function(m){m.remove();var v=this.cells.indexOf(m);l=Math.min(v,l),E.removeFrom(this.cells,m)},this),this.cellChange(l,!0)}},V.cellSizeChange=function(S){var w=this.getCell(S);if(w){w.getSize();var l=this.cells.indexOf(w);this.cellChange(l)}},V.cellChange=function(S,w){var l=this.selectedElement;this._positionCells(S),this._getWrapShiftCells(),this.setGallerySize();var m=this.getCell(l);m&&(this.selectedIndex=this.getCellSlideIndex(m)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[S]),this.select(this.selectedIndex),w&&this.positionSliderAtSelected()},k}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(k,E){return M(0,k,E)}):"object"==typeof module&&module.exports?module.exports=M(0,require("./flickity"),require("fizzy-ui-utils")):M(0,e.Flickity,e.fizzyUIUtils)}(window,function(M,k,E){"use strict";k.createMethods.push("_createLazyload");var g=k.prototype;function S(w,l){this.img=w,this.flickity=l,this.load()}return g._createLazyload=function(){this.on("select",this.lazyLoad)},g.lazyLoad=function(){var w=this.options.lazyLoad;if(w){var m=this.getAdjacentCellElements("number"==typeof w?w:0),v=[];m.forEach(function(b){var C=function V(w){if("IMG"==w.nodeName){var l=w.getAttribute("data-flickity-lazyload"),m=w.getAttribute("data-flickity-lazyload-src"),v=w.getAttribute("data-flickity-lazyload-srcset");if(l||m||v)return[w]}var C=w.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]");return E.makeArray(C)}(b);v=v.concat(C)}),v.forEach(function(b){new S(b,this)},this)}},S.prototype.handleEvent=E.handleEvent,S.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var w=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),l=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=w,l&&this.img.setAttribute("srcset",l),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},S.prototype.onload=function(w){this.complete(w,"flickity-lazyloaded")},S.prototype.onerror=function(w){this.complete(w,"flickity-lazyerror")},S.prototype.complete=function(w,l){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var m=this.flickity.getParentCell(this.img),v=m&&m.element;this.flickity.cellSizeChange(v),this.img.classList.add(l),this.flickity.dispatchEvent("lazyLoad",w,v)},k.LazyLoader=S,k}),function(e,M){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],M):"object"==typeof module&&module.exports&&(module.exports=M(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}(window,function(M){return M}),function(e,M){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],M):"object"==typeof module&&module.exports?module.exports=M(require("flickity"),require("fizzy-ui-utils")):e.Flickity=M(e.Flickity,e.fizzyUIUtils)}(window,function(M,k){M.createMethods.push("_createAsNavFor");var E=M.prototype;return E._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var V=this.options.asNavFor;if(V){var S=this;setTimeout(function(){S.setNavCompanion(V)})}},E.setNavCompanion=function(V){V=k.getQueryElement(V);var S=M.data(V);if(S&&S!=this){this.navCompanion=S;var w=this;this.onNavCompanionSelect=function(){w.navCompanionSelect()},S.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0)}},E.navCompanionSelect=function(V){var S=this.navCompanion&&this.navCompanion.selectedCells;if(S){var l=this.navCompanion.cells.indexOf(S[0]),m=l+S.length-1,v=Math.floor(function g(V,S,w){return(S-V)*w+V}(l,m,this.navCompanion.cellAlign));if(this.selectCell(v,!1,V),this.removeNavSelectedElements(),!(v>=this.cells.length)){var b=this.cells.slice(l,m+1);this.navSelectedElements=b.map(function(C){return C.element}),this.changeNavSelectedClass("add")}}},E.changeNavSelectedClass=function(V){this.navSelectedElements.forEach(function(S){S.classList[V]("is-nav-selected")})},E.activateAsNavFor=function(){this.navCompanionSelect(!0)},E.removeNavSelectedElements=function(){!this.navSelectedElements||(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},E.onNavStaticClick=function(V,S,w,l){"number"==typeof l&&this.navCompanion.selectCell(l)},E.deactivateAsNavFor=function(){this.removeNavSelectedElements()},E.destroyAsNavFor=function(){!this.navCompanion||(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},M}),function(e,M){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(k){return M(e,k)}):"object"==typeof module&&module.exports?module.exports=M(e,require("ev-emitter")):e.imagesLoaded=M(e,e.EvEmitter)}(typeof window<"u"?window:this,function(M,k){var E=M.jQuery,g=M.console;function V(C,L){for(var R in L)C[R]=L[R];return C}var S=Array.prototype.slice;function l(C,L,R){if(!(this instanceof l))return new l(C,L,R);var X=C;"string"==typeof C&&(X=document.querySelectorAll(C)),X?(this.elements=function w(C){return Array.isArray(C)?C:"object"==typeof C&&"number"==typeof C.length?S.call(C):[C]}(X),this.options=V({},this.options),"function"==typeof L?R=L:V(this.options,L),R&&this.on("always",R),this.getImages(),E&&(this.jqDeferred=new E.Deferred),setTimeout(this.check.bind(this))):g.error("Bad element for imagesLoaded "+(X||C))}(l.prototype=Object.create(k.prototype)).options={},l.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},l.prototype.addElementImages=function(C){"IMG"==C.nodeName&&this.addImage(C),!0===this.options.background&&this.addElementBackgroundImages(C);var L=C.nodeType;if(L&&m[L]){for(var R=C.querySelectorAll("img"),X=0;X<R.length;X++)this.addImage(R[X]);if("string"==typeof this.options.background){var I=C.querySelectorAll(this.options.background);for(X=0;X<I.length;X++)this.addElementBackgroundImages(I[X])}}};var m={1:!0,9:!0,11:!0};function v(C){this.img=C}function b(C,L){this.url=C,this.element=L,this.img=new Image}return l.prototype.addElementBackgroundImages=function(C){var L=getComputedStyle(C);if(L)for(var R=/url\((['"])?(.*?)\1\)/gi,X=R.exec(L.backgroundImage);null!==X;){var te=X&&X[2];te&&this.addBackground(te,C),X=R.exec(L.backgroundImage)}},l.prototype.addImage=function(C){var L=new v(C);this.images.push(L)},l.prototype.addBackground=function(C,L){var R=new b(C,L);this.images.push(R)},l.prototype.check=function(){var C=this;function L(R,X,te){setTimeout(function(){C.progress(R,X,te)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(R){R.once("progress",L),R.check()}):this.complete()},l.prototype.progress=function(C,L,R){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!C.isLoaded,this.emitEvent("progress",[this,C,L]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,C),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&g&&g.log("progress: "+R,C,L)},l.prototype.complete=function(){var C=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(C,[this]),this.emitEvent("always",[this]),this.jqDeferred&&this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)},(v.prototype=Object.create(k.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},v.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},v.prototype.confirm=function(C,L){this.isLoaded=C,this.emitEvent("progress",[this,this.img,L])},v.prototype.handleEvent=function(C){var L="on"+C.type;this[L]&&this[L](C)},v.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},v.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},v.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(b.prototype=Object.create(v.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},b.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},b.prototype.confirm=function(C,L){this.isLoaded=C,this.emitEvent("progress",[this,this.element,L])},l.makeJQueryPlugin=function(C){(C=C||M.jQuery)&&((E=C).fn.imagesLoaded=function(L,R){return new l(this,L,R).jqDeferred.promise(E(this))})},l.makeJQueryPlugin(),l}),function(e,M){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(k,E){return M(0,k,E)}):"object"==typeof module&&module.exports?module.exports=M(0,require("flickity"),require("imagesloaded")):e.Flickity=M(0,e.Flickity,e.imagesLoaded)}(window,function(M,k,E){"use strict";k.createMethods.push("_createImagesLoaded");var g=k.prototype;return g._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},g.imagesLoaded=function(){if(this.options.imagesLoaded){var V=this;E(this.slider).on("progress",function S(w,l){var m=V.getParentCell(l.img);V.cellSizeChange(m&&m.element),V.options.freeScroll||V.positionSliderAtSelected()})}},k});let isMobile=!1;function handleEventListeners(e){document.getElementById("carousel-picker-logger").innerHTML=e.target.getAttribute("id")}function handleNavbarMaskAnim(e){e.target.velocity({opacity:0},{display:"none"})}function closeMenuUI(){$menuVizInterfaceUI.removeClass("menu-visualization-interface-bg-show"),$(".navbar").css("bottom","0px")}function animateSelector(e,M,k){e.animate({opacity:1,bottom:0,left:M,easing:"easein",duration:"slow"},30,function(){})}function animateShutter(e){$("#shutter-image-"+e).addClass("image-shutter-open")}(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))&&(isMobile=!0),isMobile&&($(".branding-text").css("display","none"),$("#menu-viz-horizontal-labels-container").css("display","none"),$("#close-menu-bt").click(()=>{closeMenuUI()}));const carouselCells=document.getElementsByClassName("carousel-cell");for(let e=0;e<carouselCells.length;e++)carouselCells[e].addEventListener("mouseenter",handleEventListeners);const $menuVizInterfaceUI=$("#menu-viz");let count=0;const horizontalMenuItemWidth=$(".menu-viz-horizontal-row-container").width(),horizontalMenuFlexGap=parseInt($("#menu-viz-horizontal-labels-container").css("gap"));$(".navbar").click(function(e){$("#menu-viz-horizontal-labels-container").css("transform","translateX("+window.innerWidth/2-horizontalMenuItemWidth/2+"px)"),$menuVizInterfaceUI.toggleClass("menu-visualization-interface-bg-show",!0),++count,$(".navbar").css("bottom","-100px")}),$menuVizInterfaceUI.click(function(e){isMobile||closeMenuUI()});let $sel=$(".selection-indicator");$sel.css("opacity",0);const containerOriginY=-768,currentPositionBottom=containerOriginY,centerOfScreen=window.innerWidth/2,indicatorOffsetWidth=200,$rotatedBoxContainer=$("#menu-viz-rotated-boxes-container");let aspectRatio=1;window.addEventListener("resize",()=>{aspectRatio=(window.outerWidth-8)/window.innerWidth}),$(".keyboard-rectangle").each(function(e){const M=$(this),k=M[0].getBoundingClientRect().x,E=M[0].getAttribute("id"),g=E.charAt(E.length-1);let V;isMobile?M.click(()=>{V=currentPositionBottom+g*indicatorOffsetWidth,$("#menu-viz-rotated-boxes-container").css("transform","translateY("+V+"px)"),animateSelector($sel,k,g),animateShutter(g),setTimeout(()=>{$("#shutter-image-"+g).removeClass("image-shutter-open")},3e3),clearTimeout()}):(M.mouseover(S=>{V=currentPositionBottom+g*indicatorOffsetWidth,$("#menu-viz-rotated-boxes-container").css("transform","rotate(35deg) translateY("+V+"px)");const v=window.innerWidth/2-horizontalMenuItemWidth/2-horizontalMenuItemWidth*g-horizontalMenuFlexGap*g;$("#menu-viz-horizontal-labels-container").animate({opacity:1,bottom:"42vh",left:v,easing:"easein",duration:"slow"},100,function(){}),animateSelector($sel,k,g),animateShutter(g)}),M.mouseout(()=>{$("#shutter-image-"+g).removeClass("image-shutter-open")}))});const $mainUnit=$(".main-unit"),$identityEl=$(".identity-el");let globalUnityInstance;function sendMessageToUnity(){const e=document.getElementById("txtMessage"),M=e.value;e.value="",void 0!==unityInstance?unityInstance.SendMessage("[Bridge]","ReceiveMessageFromPage",M):console.log("Unity instance is undefined.")}var pl,pl,pl,pl,pl,pl,pl,pl,pl,pl;$(".home-screen-calendar").click(function(e){e.stopImmediatePropagation(),$(".main-unit").removeClass("is-translatingY-down"),$(".main-unit").addClass("is-translatingY-up"),$(".vertical-slide-target").removeClass("set-opacity-down"),$(".vertical-slide-target").addClass("set-opacity-up"),$(".main-carousel").one("click",function(M){$(".main-unit").removeClass("is-translatingY-up"),$(".main-unit").addClass("is-translatingY-down"),$(".vertical-slide-target").removeClass("set-opacity-up"),$(".vertical-slide-target").addClass("set-opacity-down")})}),$identityEl.hover(function(e){$(this).addClass("identity-el-animate")}),$identityEl.mouseout(function(e){$(this).removeClass("identity-el-animate")}),window.addEventListener("DOMContentLoaded",e=>{console.log("DOM fully loaded and parsed");var M=document.querySelector("#the-carousel"),k=document.getElementById("page-turn");M.addEventListener("mouseup",function(X){X.stopImmediatePropagation(),k.play()});var E=document.querySelector("#unity-container"),g=document.querySelector("#unity-canvas"),V=document.querySelector("#unity-loading-bar"),S=document.querySelector("#unity-progress-bar-full"),w=document.querySelector("#unity-fullscreen-button"),l=document.querySelector("#unity-warning");function m(X,te){function I(){l.style.display=l.children.length?"block":"none"}var re=document.createElement("div");re.innerHTML=X,l.appendChild(re),"error"==te?re.style="background: red; padding: 10px;":("warning"==te&&(re.style="background: yellow; padding: 10px;"),setTimeout(function(){l.removeChild(re),I()},5e3)),I()}var v="./assets/chathomes/Build",C={dataUrl:v+"/v0.2.data.unityweb",frameworkUrl:v+"/v0.2.framework.js.unityweb",codeUrl:v+"/v0.2.wasm.unityweb",streamingAssetsUrl:"StreamingAssets",companyName:"DefaultCompany",productName:"ChatHomes3D",productVersion:"0.1",showBanner:m};if(null!==g){if(/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)){var L=document.createElement("meta");L.name="viewport",L.content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes",document.getElementsByTagName("head")[0].appendChild(L),E.className="unity-mobile",g.style.width=window.innerWidth+"px",g.style.height=window.innerHeight+"px",m("WebGL builds are not supported on mobile devices.")}else g.style.width="960px",g.style.height="600px";V.style.display="block";var R=document.createElement("script");R.src="./assets/chathomes/Build/v0.2.loader.js",R.onload=()=>{createUnityInstance(g,C,X=>{S.style.width=100*X+"%"}).then(X=>{V.style.display="none",w.onclick=()=>{X.SetFullscreen(1),globalUnityInstance=X,console.log(globalUnityInstance),globalUnityInstance.SendMessage()}}).catch(X=>{alert(X)})},document.body.appendChild(R)}}),function(){var E,e={major:0,minor:3,patch:4,status:"beta"};function M(t,a,n,s){s=void 0===s?"":s,this.name=t,this.type=a,this.parent=n,this.text=s,this.created=Date.now()/1e3,this.modified=this.created}function k(t,a){this.name=t,this.parent=a,this.files={},this.length=0,this.created=Date.now()/1e3,this.modified=this.created}M.prototype.get=function(t,a){return a===this.text.length||a>this.text.length?"end_of_stream":this.text.substring(a,a+t)},M.prototype.eof=function(t){return t===this.text.length},M.prototype.put=function(t,a){return"end_of_stream"===a?(this.text+=t,!0):"past_end_of_stream"===a?null:(this.text=this.text.substring(0,a)+t+this.text.substring(a+t.length),!0)},M.prototype.get_byte=function(t){if("end_of_stream"===t)return-1;var a=Math.floor(t/2);if(this.text.length<=a)return-1;var n=w(this.text[Math.floor(t/2)],0);return t%2==0?255&n:n/256>>>0},M.prototype.put_byte=function(t,a){var n="end_of_stream"===a?this.text.length:Math.floor(a/2);if(this.text.length<n)return null;var s=this.text.length===n?-1:w(this.text[Math.floor(a/2)],0);return s=a%2==0?(255&(s=s/256>>>0))<<8|255&t:(255&t)<<8|255&(s&=255),this.text.length===n?this.text+=l(s):this.text=this.text.substring(0,n)+l(s)+this.text.substring(n+1),!0},M.prototype.flush=function(){return!0},M.prototype.close=function(){return this.modified=Date.now()/1e3,!0},M.prototype.size=function(){return this.text.length},k.prototype.lookup=function(t){return this.files.hasOwnProperty(t)?this.files[t]:null},k.prototype.push=function(t,a){this.files.hasOwnProperty(t)||this.length++,this.files[t]=a,this.modified=Date.now()/1e3},k.prototype.remove=function(t){this.files.hasOwnProperty(t)&&(this.length--,delete this.files[t],this.modified=Date.now()/1e3)},k.prototype.empty=function(){return 0===this.length},k.prototype.size=function(){return 4096},tau_file_system={files:new k("/","/",null),open:function(t,a,n){for(var s=t.replace(/\/$/,"").split("/"),c=tau_file_system.files,f=s[s.length-1],d=1;d<s.length-1;d++)if(c=c.lookup(s[d]),!r.type.is_directory(c))return null;var T=c.lookup(f);if(null===T){if("read"===n)return null;T=new M(f,a,c),c.push(f,T)}else if(!r.type.is_file(T))return null;return"write"===n&&(T.text=""),T},get:function(t){for(var a=t.replace(/\/$/,"").split("/"),n=tau_file_system.files,s=1;s<a.length;s++){if(!r.type.is_directory(n))return null;n=n.lookup(a[s])}return n}},tau_user_input={buffer:"",get:function(t,a){for(var n;tau_user_input.buffer.length<t;){if(0===(n=window.prompt()).length)return"end_of_stream";n&&(tau_user_input.buffer+=n)}return n=tau_user_input.buffer.substr(0,t),tau_user_input.buffer=tau_user_input.buffer.substr(t),n},eof:function(t){return!1}},tau_user_output={put:function(t,a){return console.log(t),!0},flush:function(){return!0}},tau_user_error={put:function(t,a){return(console.error||console.log)(t),!0},flush:function(){return!0}},nodejs_file_system={open:function(t,a,n){var s,c=require("fs");if("read"===n&&!c.existsSync(t))return null;try{s=c.openSync(t,n[0])}catch{return!1}return{get:function(f,d){var T=new Buffer(f);c.readSync(s,T,0,f,d);for(var O=!0,F=T.toString(),j=0;j<f&&O;j++)O="\0"===F[j];return O?"end_of_stream":T.toString()},eof:function(f){return f===c.statSync(t).size},put:function(f,d){var T=Buffer.from(f);if("end_of_stream"===d)c.writeSync(s,T);else{if("past_end_of_stream"===d)return null;c.writeSync(s,T,0,T.length,d)}return!0},get_byte:function(f){try{var d=Buffer.alloc(1);return c.readSync(s,d,0,1,f)<1?"end_of_stream":d.readUInt8(0)}catch{return"end_of_stream"}},put_byte:function(f,d){var T=Buffer.from([f]);if("end_of_stream"===d)c.writeSync(s,T);else{if("past_end_of_stream"===d)return null;c.writeSync(s,T,0,T.length,d)}return!0},flush:function(){return!0},close:function(){return c.closeSync(s),!0}}}},nodejs_user_input={buffer:"",get:function(t,a){for(var n,s=require("readline-sync");nodejs_user_input.buffer.length<t;)nodejs_user_input.buffer+=s.question("",{keepWhitespace:!0})+"\n";return n=nodejs_user_input.buffer.substr(0,t),nodejs_user_input.buffer=nodejs_user_input.buffer.substr(t),n},eof:function(t){return!1}},nodejs_user_output={put:function(t,a){return process.stdout.write(t),!0},flush:function(){return!0}},nodejs_user_error={put:function(t,a){return process.stderr.write(t),!0},flush:function(){return!0}},E=Array.prototype.indexOf?function(t,a){return t.indexOf(a)}:function(t,a){for(var n=t.length,s=0;s<n;s++)if(a===t[s])return s;return-1};var V,S,w,l,g=function(t,a){if(0!==t.length){for(var n=t[0],s=t.length,c=1;c<s;c++)n=a(n,t[c]);return n}};V=Array.prototype.map?function(t,a){return t.map(a)}:function(t,a){for(var n=[],s=t.length,c=0;c<s;c++)n.push(a(t[c]));return n},S=Array.prototype.filter?function(t,a){return t.filter(a)}:function(t,a){for(var n=[],s=t.length,c=0;c<s;c++)a(t[c])&&n.push(t[c]);return n},w=String.prototype.codePointAt?function(t,a){return t.codePointAt(a)}:function(t,a){return t.charCodeAt(a)},l=String.fromCodePoint?function(){return String.fromCodePoint.apply(null,arguments)}:function(){return String.fromCharCode.apply(null,arguments)};var m,v=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;m=Array.from?function(t){return Array.from(t).length}:function(t){return t.replace(v,"_").length};var L=/(\\a)|(\\b)|(\\d)|(\\e)|(\\f)|(\\n)|(\\r)|(\\s)|(\\t)|(\\v)|\\x([0-9a-fA-F]+)\\|\\([0-7]+)\\|(\\\\)|(\\')|('')|(\\")|(\\`)|(\\.)|(.)/g,R={"\\a":7,"\\b":8,"\\d":127,"\\e":27,"\\f":12,"\\n":10,"\\r":13,"\\s":32,"\\t":9,"\\v":11};function te(t,a){var n="";if("\\"===t)return null;if(t.length<2)return t;try{t=(t=(t=t.replace(/((?:\\\\)+)|\\([0-7]+)\\/g,function(d,T,O){return T||l(parseInt(O,8))})).replace(/((?:\\\\)+)|\\x([0-9a-fA-F]+)\\/g,function(d,T,O){return T||l(parseInt(O,16))})).replace(/((?:\\\\)+)|\\u([0-9a-fA-F]{4})/g,function(d,T,O){return T||l(parseInt(O,16))})}catch{return null}for(var s=0;s<t.length;s++){var c=t.charAt(s),f=t.charAt(s+1);if(c===a&&f===a)s++,n+=a;else if("\\"===c){if(-1===["a","b","f","n","r","t","v","'",'"',"\\","a","\b","\f","\n","\r","\t","\v"].indexOf(f))return null;switch(s+=1,f){case"a":n+="a";break;case"b":n+="\b";break;case"f":n+="\f";break;case"n":n+="\n";break;case"r":n+="\r";break;case"t":n+="\t";break;case"v":n+="\v";break;case"'":n+="'";break;case'"':n+='"';break;case"\\":n+="\\"}}else n+=c}return n}function re(t){var a=t.substr(2);switch(t.substr(0,2).toLowerCase()){case"0x":return parseInt(a,16);case"0b":return parseInt(a,2);case"0o":return parseInt(a,8);case"0'":return function X(t){var a=[],n=!1;return t.replace(L,function(s,c,f,d,T,O,F,j,G,K,fe,se,Te,qe,Ve,$e,tt,We,Ue,it){switch(!0){case void 0!==se:return a.push(parseInt(se,16)),"";case void 0!==Te:return a.push(parseInt(Te,8)),"";case void 0!==qe:case void 0!==Ve:case void 0!==$e:case void 0!==tt:case void 0!==We:return a.push(w(s.substr(1),0)),"";case void 0!==it:return a.push(w(it,0)),"";case void 0!==Ue:n=!0;default:return a.push(R[s]),""}}),n?null:a}(a)[0];default:return parseFloat(t)}}function ce(t){return/^[#\$\&\*\+\-\.\/\:\<\=\>\?\@\^\~\\]+/.test(t)}var we={whitespace:/^\s*(?:(?:%.*)|(?:\/\*(?:\n|\r|.)*?(?:\*\/|$))|(?:\s+))\s*/,variable:/^(?:[A-Z_][a-zA-Z0-9_]*)/,atom:/^(\!|,|;|[a-z][0-9a-zA-Z_]*|[#\$\&\*\+\-\.\/\:\<\=\>\?\@\^\~\\]+|'(?:(?:'')|(?:\\\\)|(?:\\')|[^'])*')/,number:/^(?:0o[0-7]+|0x[0-9a-fA-F]+|0b[01]+|0'(?:''|\\[abdefnrstv\\'"`]|\\x?\d+\\|[^\\])|\d+(?:\.\d+(?:[eE][+-]?\d+)?)?)/,string:/^(?:"([^"]|""|\\")*"|`([^`]|``|\\`)*`)/,l_brace:/^(?:\[)/,r_brace:/^(?:\])/,l_bracket:/^(?:\{)/,r_bracket:/^(?:\})/,bar:/^(?:\|)/,l_paren:/^(?:\()/,r_paren:/^(?:\))/};function pe(t){this.thread=t,this.text="",this.tokens=[]}function me(t,a,n,s,c){if(!a[n])return{type:0,value:r.error.syntax(a[n-1],"expression expected",!0)};if("0"===s){switch((d=a[n]).name){case"number":return{type:1,len:n+1,value:new r.type.Num(d.value,d.float)};case"variable":return{type:1,len:n+1,value:new r.type.Var(d.value)};case"string":var T;switch(t.get_flag("double_quotes").id){case"atom":T=new u(d.value,[]);break;case"codes":T=new u("[]",[]);for(var O=d.value.length-1;O>=0;O--)T=new u(".",[new r.type.Num(w(d.value,O),!1),T]);break;case"chars":for(T=new u("[]",[]),O=d.value.length-1;O>=0;O--)T=new u(".",[new r.type.Term(d.value.charAt(O),[]),T])}return{type:1,len:n+1,value:T};case"l_paren":return 1!==(se=me(t,a,n+1,t.__get_max_priority(),!0)).type?se:a[se.len]&&"r_paren"===a[se.len].name?(se.len++,se):{type:0,derived:!0,value:r.error.syntax(a[se.len]?a[se.len]:a[se.len-1],") or operator expected",!a[se.len])};case"l_bracket":return 1!==(se=me(t,a,n+1,t.__get_max_priority(),!0)).type?se:a[se.len]&&"r_bracket"===a[se.len].name?(se.len++,se.value=new u("{}",[se.value]),se):{type:0,derived:!0,value:r.error.syntax(a[se.len]?a[se.len]:a[se.len-1],"} or operator expected",!a[se.len])}}var F=function ze(t,a,n,s){if(!a[n]||"atom"===a[n].name&&"."===a[n].raw&&!s&&(a[n].space||!a[n+1]||"l_paren"!==a[n+1].name))return{type:0,derived:!1,value:r.error.syntax(a[n-1],"unfounded token")};var c=a[n],f=[];if("atom"===a[n].name&&","!==a[n].raw){if(a[++n-1].space)return{type:1,len:n,value:new r.type.Term(c.value,f)};if(a[n]&&"l_paren"===a[n].name){if(a[n+1]&&"r_paren"===a[n+1].name)return{type:0,derived:!0,value:r.error.syntax(a[n+1],"argument expected")};var d=me(t,a,++n,"999",!0);if(0===d.type)return d.derived?d:{type:0,derived:!0,value:r.error.syntax(a[n]?a[n]:a[n-1],"argument expected",!a[n])};for(f.push(d.value),n=d.len;a[n]&&"atom"===a[n].name&&","===a[n].value;){if(0===(d=me(t,a,n+1,"999",!0)).type)return d.derived?d:{type:0,derived:!0,value:r.error.syntax(a[n+1]?a[n+1]:a[n],"argument expected",!a[n+1])};f.push(d.value),n=d.len}if(!a[n]||"r_paren"!==a[n].name)return{type:0,derived:!0,value:r.error.syntax(a[n]?a[n]:a[n-1],", or ) expected",!a[n])};n++}return{type:1,len:n,value:new r.type.Term(c.value,f)}}return{type:0,derived:!1,value:r.error.syntax(a[n],"term expected")}}(t,a,n,c);return 1===F.type||F.derived||(F=function ut(t,a,n){if(!a[n])return{type:0,derived:!1,value:r.error.syntax(a[n-1],"[ expected")};if(a[n]&&"l_brace"===a[n].name){var s=me(t,a,++n,"999",!0),c=[s.value],f=void 0;if(0===s.type)return a[n]&&"r_brace"===a[n].name?{type:1,len:n+1,value:new r.type.Term("[]",[])}:{type:0,derived:!0,value:r.error.syntax(a[n],"] expected")};for(n=s.len;a[n]&&"atom"===a[n].name&&","===a[n].value;){if(0===(s=me(t,a,n+1,"999",!0)).type)return s.derived?s:{type:0,derived:!0,value:r.error.syntax(a[n+1]?a[n+1]:a[n],"argument expected",!a[n+1])};c.push(s.value),n=s.len}var d=!1;if(a[n]&&"bar"===a[n].name){if(d=!0,0===(s=me(t,a,n+1,"999",!0)).type)return s.derived?s:{type:0,derived:!0,value:r.error.syntax(a[n+1]?a[n+1]:a[n],"argument expected",!a[n+1])};f=s.value,n=s.len}return a[n]&&"r_brace"===a[n].name?{type:1,len:n+1,value:Be(c,f)}:{type:0,derived:!0,value:r.error.syntax(a[n]?a[n]:a[n-1],d?"] expected":", or | or ] expected",!a[n])}}return{type:0,derived:!1,value:r.error.syntax(a[n],"list expected")}}(t,a,n),1===F.type||F.derived)?F:{type:0,derived:!1,value:r.error.syntax(a[n],d.error||"unexpected token")}}t.__get_max_priority();var G=t.__get_next_priority(s),K=n;if("atom"===a[n].name&&a[n+1]&&(a[n].space||"l_paren"!==a[n+1].name)){var d=a[n++];if((fe=t.__lookup_operator_classes(s,d.value))&&fe.indexOf("fy")>-1){if(0!==(se=me(t,a,n,s,c)).type)return"-"===d.value&&!d.space&&r.type.is_number(se.value)?{value:new r.type.Num(-se.value.value,se.value.is_float),len:se.len,type:1}:{value:new r.type.Term(d.value,[se.value]),len:se.len,type:1}}else if(fe&&fe.indexOf("fx")>-1){var se;if(0!==(se=me(t,a,n,G,c)).type)return{value:new r.type.Term(d.value,[se.value]),len:se.len,type:1}}}if(1===(se=me(t,a,n=K,G,c)).type){if(d=a[n=se.len],a[n]&&("atom"===a[n].name&&t.__lookup_operator_classes(s,d.value)||"bar"===a[n].name&&t.__lookup_operator_classes(s,"|"))){var Te=G,qe=s;if((fe=t.__lookup_operator_classes(s,d.value)).indexOf("xf")>-1)return{value:new r.type.Term(d.value,[se.value]),len:++se.len,type:1};if(fe.indexOf("xfx")>-1)return 1===(Ve=me(t,a,n+1,Te,c)).type?{value:new r.type.Term(d.value,[se.value,Ve.value]),len:Ve.len,type:1}:(Ve.derived=!0,Ve);if(fe.indexOf("xfy")>-1)return 1===(Ve=me(t,a,n+1,qe,c)).type?{value:new r.type.Term(d.value,[se.value,Ve.value]),len:Ve.len,type:1}:(Ve.derived=!0,Ve);if(0!==se.type)for(;;){var fe;if(!(d=a[n=se.len])||"atom"!==d.name||!t.__lookup_operator_classes(s,d.value))break;if((fe=t.__lookup_operator_classes(s,d.value)).indexOf("yf")>-1)se={value:new r.type.Term(d.value,[se.value]),len:++n,type:1};else{if(!(fe.indexOf("yfx")>-1))break;var Ve;if(0===(Ve=me(t,a,++n,Te,c)).type)return Ve.derived=!0,Ve;n=Ve.len,se={value:new r.type.Term(d.value,[se.value,Ve.value]),len:n,type:1}}}}else r.error.syntax(a[se.len-1],"operator expected");return se}return se}function nt(t,a,n){var d,s=a[n].line,c=me(t,a,n,t.__get_max_priority(),!1),f=null;if(0!==c.type){if(a[n=c.len]&&"atom"===a[n].name&&"."===a[n].raw){if(n++,r.type.is_term(c.value)){if(":-/2"===c.value.indicator)d={value:f=new r.type.Rule(c.value.args[0],at(c.value.args[1])),len:n,type:1};else if("--\x3e/2"===c.value.indicator){if(f=function dr(t,a){a.session.renamed_variables={},t=t.rename(a);var n=a.next_free_variable(),s=Dt(t.body,n,a);if(s.error)return s.value;if(t.body=s.value,",/2"===t.head.indicator){var c=t.head.args[1];t.head=t.head.args[0];var f=a.next_free_variable(),d=c;if(!r.type.is_list(d))return r.error.type("list",d,"DCG/0");if("[]/0"===d.indicator)c=s.variable;else{for(;"./2"===d.indicator&&r.type.is_list(d)&&"[]/0"!==d.args[1].indicator;)d=d.args[1];if(r.type.is_variable(d))return r.error.instantiation("DCG/0");if(!r.type.is_list(d))return r.error.type("list",c,"DCG/0");d.args[1]=s.variable}t.body=new u(",",[t.body,new u("=",[f,c])]),t.head=new u(t.head.id,t.head.args.concat([n,f]))}else{var T=t.body;r.type.is_term(T)&&",/2"===T.indicator&&(T=T.args[0]),r.type.is_term(T)&&"=/2"===T.indicator&&r.type.is_variable(T.args[0])&&T.args[0]===n&&(n=T.args[1],t.body=t.body.replace(null)),t.head=":/2"===t.head.indicator?new u(":",[new u(t.head.args[0].id,[]),new u(t.head.args[1].id,t.head.args[1].args.concat([n,s.variable]))]):new u(t.head.id,t.head.args.concat([n,s.variable]))}return t}(f=new r.type.Rule(c.value.args[0],at(c.value.args[1])),t),f.body=at(f.body),!r.type.is_rule(f))return{value:f,len:n,type:0};d={value:f,len:n,type:r.type.is_rule(f)?1:0}}else d={value:f=new r.type.Rule(c.value,null),len:n,type:1};if(f){var T=f.singleton_variables();T.length>0&&t.throw_warning(r.warning.singleton(T,f.head.indicator,s))}return d}return{type:0,value:r.error.syntax(a[n],"callable expected")}}return{type:0,value:r.error.syntax(a[n]?a[n]:a[n-1],". or operator expected")}}return c}function Le(t,a,n){var s={};s.success=(n=n||{}).success?n.success:function(){},s.error=n.error?n.error:function(){},s.from=n.from?n.from:"$tau-js",s.reconsult=void 0===n.reconsult||n.reconsult,s.reconsulted=void 0===n.reconsulted?{}:n.reconsulted,s.context_module=void 0===n.context_module?"user":n.context_module,s.initialization=void 0===n.initialization?[]:n.initialization,s.current_token=void 0===n.current_token?0:n.current_token,s.tokenizer=void 0===n.tokenizer?null:n.tokenizer,s.tokens=void 0===n.tokens?null:n.tokens,s.string=a,s.term_expansion=!1;var c=s.reconsulted,f=s.tokenizer,d=s.tokens;null===f&&((f=new pe(t)).new_text(a),s.tokenizer=f,d=f.get_tokens(0),s.tokens=d);for(var T=s.current_token;null!==d&&d[T];){var O=nt(t,d,T);if(s.current_token=O.len,0===O.type)return void(void 0!==s.error&&s.error(new u("throw",[O.value])));var F=s.context_module,j=t.session.modules[F].rules["term_expansion/2"];if(j&&j.length>0){s.term_expansion=!0;var G=new ge(t.session),K=O.value.body?new u(":-",[O.value.head,O.value.body]):O.value.head;return t.session.renamed_variables={},K=K.rename(t.session),G.query(F+":term_expansion("+K.toString({quoted:!0})+", X)."),void G.answer(function($e,tt,We,Ue){return function(it){if(it&&!r.type.is_error(it)&&r.type.is_term(it.links.X)){var yt=it.links.X,Qt=":-/2"===yt.indicator?new he(yt.args[0],yt.args[1]):new he(yt,null);Nt($e,tt,We,{value:Qt,len:Ue.len,type:Ue.type})}else Nt($e,tt,We,Ue)}}(t,s,c,O))}if(s.term_expansion=!1,Nt(t,s,c,O))return;T=O.len}for(var se=s.success,Te=new ge(t.session),qe=s.initialization.length-1;qe>0;qe--)se=function($e,tt){return function(We){null===We?Te.answer():r.type.is_error(We)?s.error(We):(Te.add_goal($e),Te.answer(tt))}}(s.initialization[qe],se);s.initialization.length>0?(Te.add_goal(s.initialization[0]),Te.answer(se)):se()}function lt(t,a,n){var s=new ge(t.session);s.__goal_expansion=!0;var c=t.next_free_variable(),f=t.next_free_variable(),d=f+" = "+n.value.head+", goal_expansion("+n.value.body.toString({quoted:!0})+", "+c.toString({quoted:!0})+").";s.query(d),s.answer(function(T){T&&!r.type.is_error(T)&&T.links[c]?(n.value.head=T.links[f],n.value.body=at(T.links[c]),lt(t,a,n)):(t.add_rule(n.value,a),Le(t,a.string,a))})}function ct(t,a,n){var s=new ge(t.session);s.__goal_expansion=!0;var c=t.next_free_variable(),f="goal_expansion("+a.toString({quoted:!0})+", "+c.toString({quoted:!0})+").";s.query(f);var d=s.head_point().substitution.domain();s.answer(function(T){if(T&&!r.type.is_error(T)&&T.links[c]){for(var O=0;O<d.length;O++)if(d[O]!==c.id&&T.links[d[O]]){var F=new ye;F.links[T.links[d[O]]]=d[O],T.links[c]=T.links[c].apply(F)}ct(t,at(T.links[c]),n)}else t.add_goal(a),n.success(a),Jt(t,n.string,n)})}function Nt(t,a,n,s){var c=!0===a.term_expansion;if(null===s.value.body&&"?-/1"===s.value.head.indicator){c=!0;var f=new ge(t.session);f.add_goal(s.value.head.args[0]),f.answer(function(K){r.type.is_error(K)?t.throw_warning(K.args[0]):(!1===K||null===K)&&t.throw_warning(r.warning.failed_goal(s.value.head.args[0],s.len)),Le(t,a.string,a)})}else if(null===s.value.body&&":-/1"===s.value.head.indicator){var d=t.run_directive(s.value.head.args[0],a);(c=c||!0===d)&&Le(t,a.string,a)}else{var T=a.context_module,O=s.value.head.indicator;if(":/2"===s.value.head.indicator&&(T=s.value.head.args[0].id,O=s.value.head.args[1].indicator),n.hasOwnProperty(T)||(n[T]={}),!1!==a.reconsult&&!0!==n[T][O]&&!t.is_multifile_predicate(O)){var F=t.session.modules[T];"system"!==T&&F&&F.rules[O]&&(F.rules[O]=S(F.rules[O],function(K){return K.dynamic}),F.update_indices_predicate(O)),n[T][O]=!0}var j=t.session.modules.user.rules["goal_expansion/2"];null!==s.value.body&&j&&j.length>0?(c=!0,t.session.renamed_variables={},lt(t,a,s,at(s.value.body))):(t.add_rule(s.value,a),c&&Le(t,a.string,a))}return c}function Jt(t,a,n){var s={},c="function"==typeof n?n:function(){};s.success=void 0===(n=void 0===n||"function"==typeof n?{}:n).success?c:n.success,s.error=void 0===n.error?c:n.error,s.tokenizer=void 0===n.tokenizer?null:n.tokenizer,s.current_token=void 0===n.current_token?0:n.current_token,s.string=a;var f=s.tokenizer,d=s.current_token;for(null===f&&(f=new pe(t),s.tokenizer=f,f.new_text(a));;){var T=f.get_tokens(d);if(null===T)break;var O=me(t,T,0,t.__get_max_priority(),!1);if(0===O.type)return void s.error(new u("throw",[O.value]));var F=O.len;if(s.current_token=d=O.len+1,!T[F]||"atom"!==T[F].name||"."!==T[F].raw){var G=T[F];return void s.error(new u("throw",[r.error.syntax(G||T[F-1],G&&G.error?G.error:". or operator expected",!G)]))}O.value=at(O.value);var j=t.session.modules.user.rules["goal_expansion/2"];if(!t.__goal_expansion&&j&&j.length>0)return void ct(t,O.value,s);t.add_goal(O.value),s.success(O.value)}}function Dt(t,a,n){var s;if(r.type.is_term(t)&&"!/0"===t.indicator)return{value:new u(",",[t,new u("=",[a,s=n.next_free_variable()])]),variable:s,error:!1};if(r.type.is_term(t)&&":/2"===t.indicator)return(c=Dt(t.args[1],a,n)).error?c:{value:new u(":",[t.args[0],c.value]),variable:c.variable,error:!1};if(r.type.is_term(t)&&"\\+/1"===t.indicator)return(f=Dt(t.args[0],a,n)).error?f:(s=n.next_free_variable(),{value:new u(",",[new u(t.id,[f.value]),new u("=",[a,s])]),variable:s,error:!1});if(!r.type.is_term(t)||",/2"!==t.indicator&&"->/2"!==t.indicator){var f,c;if(r.type.is_term(t)&&";/2"===t.indicator)return(f=Dt(t.args[0],a,n)).error?f:(c=Dt(t.args[1],a,n)).error?c:{value:new u(",",[new u(";",[f.value,c.value]),new u("=",[f.variable,c.variable])]),variable:c.variable,error:!1};if(r.type.is_term(t)&&"{}/1"===t.indicator)return s=n.next_free_variable(),{value:new u(",",[t.args[0],new u("=",[a,s])]),variable:s,error:!1};if(r.type.is_empty_list(t))return{value:new u("true",[]),variable:a,error:!1};if(r.type.is_list(t)){s=n.next_free_variable();for(var T,d=t;"./2"===d.indicator;)T=d,d.ground=!1,d=d.args[1];return r.type.is_variable(d)?{value:r.error.instantiation("DCG/0"),variable:a,error:!0}:r.type.is_empty_list(d)?(T.args[1]=s,{value:new u("=",[a,t]),variable:s,error:!1}):{value:r.error.type("list",t,"DCG/0"),variable:a,error:!0}}return r.type.is_callable(t)?(s=n.next_free_variable(),{value:t=new u(t.id,t.args.concat([a,s])),variable:s,error:!1}):{value:r.error.type("callable",t,"DCG/0"),variable:a,error:!0}}return(f=Dt(t.args[0],a,n)).error?f:(c=Dt(t.args[1],f.variable,n)).error?c:{value:new u(t.id,[f.value,c.value]),variable:c.variable,error:!1}}function at(t){if(r.type.is_variable(t))return new u("call",[t]);if(r.type.is_term(t)&&-1!==[",/2",";/2","->/2"].indexOf(t.indicator))return new u(t.id,[at(t.args[0]),at(t.args[1])]);if(r.type.is_term(t)&&":/2"===t.indicator){var a=at(t.args[1]);return new u(":",[t.args[0],a])}return t}function Be(t,a){for(var n=a||new u("[]",[]),s=t.length-1;s>=0;s--)n=new u(".",[t[s],n]);return n}function qt(t,a){for(var n=t.length-1;n>=0;n--)t[n]===a&&t.splice(n,1)}function It(t){for(var a={},n=[],s=0;s<t.length;s++)t[s]in a||(n.push(t[s]),a[t[s]]=!0);return n}function Tt(t){return function(a,n,s){var d,c=s.args[0],f=s.args.slice(1,t);if(r.type.is_term(c)&&":/2"===c.indicator){if(!r.type.is_atom(c.args[0]))return void a.throw_error(r.error.type("module",c.args[0],s.indicator));d=c.args[0],c=c.args[1]}if(r.type.is_variable(c))a.throw_error(r.error.instantiation(s.indicator));else if(r.type.is_callable(c)){var T=at(new u(c.id,c.args.concat(f)));if(!r.type.is_callable(T))return void a.throw_error(r.error.type("callable",T,s.indicator));d&&(T=new u(":",[d,T])),a.prepend([new Q(n.goal.replace(T),n.substitution,n)])}else a.throw_error(r.error.type("callable",c,s.indicator))}}function Pe(t){for(var a=t.length-1;a>=0;a--)if("/"===t.charAt(a))return new u("/",[new u(t.substring(0,a)),new ne(parseInt(t.substring(a+1)),!1)])}function bt(t,a){return 0===a?t:Math.abs(bt(a,t%a))}function P(t){this.id=t,this.ground=!1}function ne(t,a){this.is_float=void 0!==a?a:Math.trunc(t)!==t,this.value=this.is_float?t:Math.trunc(t),this.index=this.value,this.ground=!0}pe.prototype.set_last_tokens=function(t){return this.tokens=t},pe.prototype.new_text=function(t){this.text=t,this.tokens=[]},pe.prototype.get_tokens=function(t){var a,d,n=0,s=0,c=0,f=[];if(t?(n=(T=this.tokens[t-1]).len,a=function _(t,a){return"on"===t.get_flag("char_conversion").id?a.replace(/./g,function(n){return t.get_char_conversion(n)}):a}(this.thread,this.text.substr(T.len)),s=T.line,c=T.start):a=this.text,/^\s*$/.test(a))return null;for(;""!==a;){var O=[];if(d=!1,null===/^\n/.exec(a)){for(var F in we)if(we.hasOwnProperty(F)){var j=we[F].exec(a);j&&O.push({value:j[0],name:F,matches:j})}if(!O.length)return this.set_last_tokens([{value:a,matches:[],name:"lexical",line:s,start:c}]);var T;(T=g(O,function(Ve,$e){return Ve.value.length>=$e.value.length?Ve:$e})).start=c,T.line=s,a=a.replace(T.value,""),c+=T.value.length,n+=T.value.length;var G=(T.value.match(/\n/g)||[]).length;switch(s+=G,G>0&&(c=T.value.length-T.value.lastIndexOf("\n")-1),T.line_count=s,T.line_position=c,T.name){case"atom":T.raw=T.value,"'"===T.value.charAt(0)&&(T.value=te(T.value.substring(1,T.value.length-1),"'"),null===T.value&&(T.name="lexical",T.value=T.raw,T.error="unknown_escape_sequence"));break;case"number":var K=T.value.substring(0,2);T.raw=T.value,T.float="0x"!==K&&"0'"!==K&&null!==T.value.match(/[.eE]/),T.value=re(T.value),T.blank=d,!T.float&&"true/0"===r.flag.bounded.value.indicator&&T.value>r.flag.max_integer.value.value&&(T.name="lexical",T.value=T.raw,T.error="int_overflow");break;case"string":var fe=T.value.charAt(0);T.raw=T.value,T.value=te(T.value.substring(1,T.value.length-1),fe),null===T.value&&(T.name="lexical",T.value=T.raw,T.error="unknown_escape_sequence");break;case"whitespace":var se=f[f.length-1];se&&(se.space=!0),d=!0;continue;case"r_bracket":f.length>0&&"l_bracket"===f[f.length-1].name&&((T=f.pop()).name="atom",T.value="{}",T.raw="{}",T.space=!1);break;case"r_brace":f.length>0&&"l_brace"===f[f.length-1].name&&((T=f.pop()).name="atom",T.value="[]",T.raw="[]",T.space=!1)}T.len=n,f.push(T),d=!1}else s++,c=0,n++,a=a.replace(/\n/,""),d=!0}var Te=this.set_last_tokens(f);return 0===Te.length?null:Te};var Zt=0;function u(t,a,n){Zt++,this.ref=n||Zt,this.id=t,this.args=a||[],this.indicator=t+"/"+this.args.length,this.index=this.indicator,this.ground=!0;for(var s=0;s<this.args.length;s++)if(this.args[s].hasOwnProperty("ground")&&!1===this.args[s].ground){this.ground=!1;break}}var zt=0;function Fe(t,a,n,s,c,f){this.id=zt++,this.stream=t,this.mode=a,this.alias=n,this.type=void 0!==s?s:"text",this.reposition=void 0===c||c,this.eof_action=void 0!==f?f:"eof_code",this.position="append"===this.mode?"end_of_stream":0,this.output="write"===this.mode||"append"===this.mode,this.input="read"===this.mode,this.line_position=0,this.line_count=1,this.char_count=0}function ye(t,a){a=a||{},this.links=t=t||{},this.attrs=a}function Q(t,a,n){a=a||new ye,n=n||null,this.goal=t,this.substitution=a,this.parent=n}function he(t,a,n){this.head=t,this.body=a,this.dynamic=n||!1}function Se(t){t="number"==typeof t&&t>0?t:null,this.rename=0,this.modules={},this.modules.user=new Ze("user",{},"all",{session:this,dependencies:["system"]}),this.modules.system=r.modules.system,this.rules=this.modules.user.rules,this.total_threads=0,this.renamed_variables={},this.public_predicates=this.modules.user.public_predicates,this.multifile_predicates=this.modules.user.multifile_predicates,this.limit=t,this.streams={user_input:new Fe(pt?nodejs_user_input:tau_user_input,"read","user_input","text",!1,"reset"),user_output:new Fe(pt?nodejs_user_output:tau_user_output,"append","user_output","text",!1,"reset"),user_error:new Fe(pt?nodejs_user_error:tau_user_error,"append","user_error","text",!1,"reset")},this.file_system=pt?nodejs_file_system:tau_file_system,this.standard_input=this.streams.user_input,this.standard_output=this.streams.user_output,this.standard_error=this.streams.user_error,this.current_input=this.streams.user_input,this.current_output=this.streams.user_output,this.working_directory="/",this.format_success=function(a){return a.substitution},this.format_error=function(a){return a.goal},this.flag={bounded:r.flag.bounded.value,max_integer:r.flag.max_integer.value,min_integer:r.flag.min_integer.value,integer_rounding_function:r.flag.integer_rounding_function.value,char_conversion:r.flag.char_conversion.value,debug:r.flag.debug.value,max_arity:r.flag.max_arity.value,unknown:r.flag.unknown.value,double_quotes:r.flag.double_quotes.value,occurs_check:r.flag.occurs_check.value,dialect:r.flag.dialect.value,version_data:r.flag.version_data.value,nodejs:r.flag.nodejs.value,argv:r.flag.argv.value},this.__loaded_modules=[],this.__char_conversion={},this.__operators={1200:{":-":["fx","xfx"],"--\x3e":["xfx"],"?-":["fx"]},1150:{meta_predicate:["fx"]},1100:{";":["xfy"]},1050:{"->":["xfy"],"*->":["xfy"]},1e3:{",":["xfy"]},900:{"\\+":["fy"]},700:{"=":["xfx"],"\\=":["xfx"],"==":["xfx"],"\\==":["xfx"],"@<":["xfx"],"@=<":["xfx"],"@>":["xfx"],"@>=":["xfx"],"=..":["xfx"],is:["xfx"],"=:=":["xfx"],"=\\=":["xfx"],"<":["xfx"],"=<":["xfx"],">":["xfx"],">=":["xfx"]},600:{":":["xfy"]},500:{"+":["yfx"],"-":["yfx"],"/\\":["yfx"],"\\/":["yfx"]},400:{"*":["yfx"],"/":["yfx"],"//":["yfx"],rem:["yfx"],mod:["yfx"],"<<":["yfx"],">>":["yfx"],div:["yfx"]},200:{"**":["xfx"],"^":["xfy"],"-":["fy"],"+":["fy"],"\\":["fy"]}},this.thread=new ge(this)}function ge(t){this.epoch=Date.now(),this.session=t,this.session.total_threads++,this.format_success=t.format_success,this.format_error=t.format_error,this.total_steps=0,this.cpu_time=0,this.points=[],this.debugger=!1,this.debugger_states=[],this.level=new u("top_level"),this.current_limit=this.session.limit,this.has_limit=null!==this.session.limit,this.warnings=[],this.__calls=[],this.__goal_expansion=!1,this.__stacks={}}function Ze(t,a,n,s){if((s=void 0===s?{}:s).public_predicates=void 0===s.public_predicates?{}:s.public_predicates,s.multifile_predicates=void 0===s.multifile_predicates?{}:s.multifile_predicates,s.meta_predicates=void 0===s.meta_predicates?{}:s.meta_predicates,s.session=void 0===s.session?null:s.session,s.dependencies=void 0===s.dependencies?[]:s.dependencies,this.id=t,this.rules=a,this.indexed_clauses={},this.non_indexable_clauses={},this.public_predicates=s.public_predicates,this.multifile_predicates=s.multifile_predicates,this.meta_predicates=s.meta_predicates,this.src_predicates={},this.dependencies=s.dependencies,this.exports=n,this.is_library=null===s.session,this.modules={},s.session){s.session.modules[t]=this;for(var c=0;c<s.dependencies.length;c++){var f=s.dependencies[c];s.session.modules.hasOwnProperty(f)||(s.session.modules[f]=r.modules[f])}}else r.modules[t]=this;if("all"!==n)for(c=0;c<n.length;c++)this.public_predicates[n[c]]=s.public_predicates.hasOwnProperty(n[c])&&!0===s.public_predicates[n[c]];this.update_indices_clauses()}Ze.prototype.exports_predicate=function(t){return"all"===this.exports||-1!==E(this.exports,t)},Ze.prototype.is_public_predicate=function(t){return!this.public_predicates.hasOwnProperty(t)||!0===this.public_predicates[t]},Ze.prototype.is_multifile_predicate=function(t){return this.multifile_predicates.hasOwnProperty(t)&&!0===this.multifile_predicates[t]},Ze.prototype.is_meta_predicate=function(t){return this.meta_predicates.hasOwnProperty(t)?this.meta_predicates[t]:null},Ze.prototype.update_indices_clauses=function(){for(var t in this.indexed_clauses={},this.non_indexable_clauses={},this.rules)this.update_indices_predicate(t)},Ze.prototype.update_indices_predicate=function(t){if(this.indexed_clauses[t]={},this.non_indexable_clauses[t]=[],Array.isArray(this.rules[t]))for(var a=0;a<this.rules[t].length;a++)this.add_index_predicate(this.rules[t][a])},Ze.prototype.add_index_predicate=function(t){var a=t.head.indicator;if(n=t.head.args.length>0?t.head.args[0].index:void 0){if(this.indexed_clauses.hasOwnProperty(a)||(this.indexed_clauses[a]={}),!this.indexed_clauses[a].hasOwnProperty(n)&&(this.indexed_clauses[a][n]=[],this.non_indexable_clauses.hasOwnProperty(a)))for(var s=0;s<this.non_indexable_clauses[a].length;s++)this.indexed_clauses[a][n].push(this.non_indexable_clauses[a][s]);this.indexed_clauses[a][n].push(t)}else for(var n in this.non_indexable_clauses.hasOwnProperty(a)||(this.non_indexable_clauses[a]=[]),this.non_indexable_clauses[a].push(t),this.indexed_clauses[a])this.indexed_clauses[a][n].push(t)},P.prototype.unify=function(t,a){if(a&&-1!==E(t.variables(),this.id)&&!r.type.is_variable(t))return null;var n={};return n[this.id]=t,new ye(n)},ne.prototype.unify=function(t,a){return r.type.is_number(t)&&this.value===t.value&&this.is_float===t.is_float?new ye:null},u.prototype.unify=function(t,a){if(!r.type.is_term(t)&&void 0!==t.unify)return t.unify(this,a);if(r.type.is_term(t)&&this.indicator===t.indicator){for(var n=new ye,s=0;s<this.args.length;s++){var c=r.unify(this.args[s].apply(n),t.args[s].apply(n),a);if(null===c)return null;for(var f in c.links)n.links[f]=c.links[f];n=n.apply(c)}return n}return null},Fe.prototype.unify=function(t,a){return r.type.is_stream(t)&&this.id===t.id?new ye:null},Fe.prototype.compare=function(t){return this.id<t.id?-1:this.id===t.id?0:1},P.prototype.toString=function(t){if((t=void 0===t?{}:t).variable_names)for(var a=t.variable_names;r.type.is_term(a)&&"./2"===a.indicator;){var n=a.args[0];if(r.type.is_term(n)&&"=/2"===n.indicator&&r.type.is_variable(n.args[1])&&n.args[1].id===this.id&&r.type.is_atom(n.args[0]))return n.args[0].id;a=a.args[1]}return this.id},ne.prototype.toString=function(t){var a=this.value.toString();return-1!==a.indexOf("e")?-1!==a.indexOf(".")?a:a.replace("e",".0e"):this.is_float&&-1===E(a,".")?this.value+".0":a},u.prototype.toString=function(t,a,n){(t=t||{}).quoted=void 0!==t.quoted&&t.quoted,t.ignore_ops=void 0!==t.ignore_ops&&t.ignore_ops,t.numbervars=void 0!==t.numbervars&&t.numbervars,t.variable_names=void 0!==t.variable_names&&t.variable_names,a=void 0===a?{priority:1200,class:"",indicator:""}:a,n=void 0===n?"":n;var s={priority:999,class:"",indicator:""};if(t.numbervars&&"$VAR/1"===this.indicator&&r.type.is_integer(this.args[0])&&this.args[0].value>=0){var c=this.args[0].value,f=Math.floor(c/26);return"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[c%26]+(0!==f?f:"")}switch(this.indicator){case"[]/0":case"{}/0":case"!/0":return this.id;case"{}/1":return!1===t.ignore_ops?"{"+this.args[0].toString(t)+"}":"{}("+this.args[0].toString(t)+")";case"./2":if(!1===t.ignore_ops){for(var T="["+this.args[0].toString(t,s),O=this.args[1];"./2"===O.indicator;)T+=","+O.args[0].toString(t,s),O=O.args[1];return"[]/0"!==O.indicator&&(T+="|"+O.toString(t,s)),T+"]"}default:var F=this.id,j=t.session?t.session.lookup_operator(this.id,this.args.length):null;if(void 0===t.session||t.ignore_ops||null===j)return t.quoted&&(!/^(!|[a-z][0-9a-zA-Z_]*|[#\$\&\*\+\-\.\/\:\<\=\>\?\@\^\~\\]+)$/.test(F)&&"{}"!==F&&"[]"!==F||-1!==E([".",",",";"],F)||"/*"===F.substring(0,2))&&(F="'"+function I(t){for(var a="",n=0;n<t.length;n++)switch(t.charAt(n)){case"'":a+="\\'";break;case"\\":a+="\\\\";break;case"\b":a+="\\b";break;case"\f":a+="\\f";break;case"\n":a+="\\n";break;case"\r":a+="\\r";break;case"\t":a+="\\t";break;case"\v":a+="\\v";break;default:a+=t.charAt(n)}return a}(F)+"'"),0===this.args.length&&ce(this.id)&&""!==a.indicator?"("+F+")":F+(this.args.length>0?"("+V(this.args,function(Ve){return Ve.toString(t,s)}).join(",")+")":"");var G=parseInt(j.priority),K=parseInt(a.priority),fe=G>K||G===K&&("xfx"===j.class||"xfy"===j.class&&this.indicator!==a.indicator||"yfx"===j.class&&this.indicator!==a.indicator||this.indicator===a.indicator&&"yfx"===j.class&&"right"===n||this.indicator===a.indicator&&"xfy"===j.class&&"left"===n||this.indicator===a.indicator&&"xf"===j.class&&"left"===n||this.indicator===a.indicator&&"fx"===j.class&&"right"===n);j.indicator=this.indicator;var se=fe?"(":"",Te=fe?")":"",qe=!ce(this.id)&&","!==this.id&&";"!==this.id||2===j.class.length||3===j.class.length&&r.type.is_number(this.args[1])&&this.args[1].value<0?" ":"";return 0===this.args.length?se+this.id+Te:-1!==["fy","fx"].indexOf(j.class)?se+F+qe+this.args[0].toString(t,j,"right")+Te:-1!==["yf","xf"].indexOf(j.class)?se+this.args[0].toString(t,j,"left")+qe+F+Te:se+this.args[0].toString(t,j,"left")+qe+this.id+qe+this.args[1].toString(t,j,"right")+Te}},Fe.prototype.toString=function(t){return"<stream>("+this.id+")"},ye.prototype.toString=function(t){var a="{";for(var n in this.links)!this.links.hasOwnProperty(n)||("{"!==a&&(a+=", "),a+=n+"/"+this.links[n].toString(t));return a+"}"},Q.prototype.toString=function(t){return null===this.goal?"<"+this.substitution.toString(t)+">":"<"+this.goal.toString(t)+", "+this.substitution.toString(t)+">"},he.prototype.toString=function(t){return this.body?this.head.toString(t,1200,"left")+" :- "+this.body.toString(t,1200,"right")+".":this.head.toString(t)+"."},Se.prototype.toString=function(t){var a="";for(var n in this.modules)this.modules.hasOwnProperty(n)&&this.modules[n].is_library&&(a+=":- use_module(library("+this.modules[n]+")).\n");for(var s in a+="\n",this.modules.user.rules)if(this.modules.user.rules.hasOwnProperty(s))for(i=0;i<this.modules.user.rules[s].length;i++)a+=this.modules.user.rules[s][i].toString(t),a+="\n";return a},P.prototype.clone=function(){return new P(this.id)},ne.prototype.clone=function(){return new ne(this.value,this.is_float)},u.prototype.clone=function(){var t=new u(this.id,V(this.args,function(a){return a.clone()}));return this.definition_module&&(t.definition_module=this.definition_module),t},Fe.prototype.clone=function(){return new Fe(this.stream,this.mode,this.alias,this.type,this.reposition,this.eof_action)},ye.prototype.clone=function(){var t={},a={};for(var n in this.links)!this.links.hasOwnProperty(n)||(t[n]=this.links[n].clone());for(var s in this.attrs)if(this.attrs.hasOwnProperty(a))for(var c in a[s]={},this.attrs[s])!this.attrs[s].hasOwnProperty(c)||(a[s][c]=this.attrs[s][c].clone());return new ye(t,a)},Q.prototype.clone=function(){return new Q(this.goal.clone(),this.substitution.clone(),this.parent)},he.prototype.clone=function(){return new he(this.head.clone(),null!==this.body?this.body.clone():null)},P.prototype.equals=function(t){return r.type.is_variable(t)&&this.id===t.id},ne.prototype.equals=function(t){return r.type.is_number(t)&&this.value===t.value&&this.is_float===t.is_float},u.prototype.equals=function(t){if(!r.type.is_term(t)||this.indicator!==t.indicator)return!1;for(var a=0;a<this.args.length;a++)if(!this.args[a].equals(t.args[a]))return!1;return!0},Fe.prototype.equals=function(t){return r.type.is_stream(t)&&this.id===t.id},ye.prototype.equals=function(t){var a;if(!r.type.is_substitution(t))return!1;for(a in this.links)if(this.links.hasOwnProperty(a)&&(!t.links[a]||!this.links[a].equals(t.links[a])))return!1;for(a in t.links)if(t.links.hasOwnProperty(a)&&!this.links[a])return!1;return!0},Q.prototype.equals=function(t){return r.type.is_state(t)&&this.goal.equals(t.goal)&&this.substitution.equals(t.substitution)&&this.parent===t.parent},he.prototype.equals=function(t){return r.type.is_rule(t)&&this.head.equals(t.head)&&(null===this.body&&null===t.body||null!==this.body&&this.body.equals(t.body))},P.prototype.rename=function(t){return t.get_free_variable(this)},ne.prototype.rename=function(t){return this},u.prototype.rename=function(t){if(this.ground)return new u(this.id,this.args);if("./2"===this.indicator){for(var a=[],n=this;"./2"===n.indicator&&!n.ground;){var s=n.args[0].rename(t);a.push(s),n=n.args[1]}for(var c=n.rename(t),f=a.length-1;f>=0;f--)c=new u(".",[a[f],c]);return c}var d=[];for(f=0;f<this.args.length;f++)s=this.args[f].rename(t),d.push(s);return new u(this.id,d)},Fe.prototype.rename=function(t){return this},he.prototype.rename=function(t){return new he(this.head.rename(t),null!==this.body?this.body.rename(t):null)},P.prototype.is_rename=function(t,a){return a=a||{},!(!r.type.is_variable(t)||a.hasOwnProperty(this.id)&&a[this.id]!==t.id||a.hasOwnProperty(t.id)&&a[t.id]!==this.id||(a[this.id]=t.id,a[t.id]=this.id,0))},ne.prototype.is_rename=function(t,a){return this.equals(t)},u.prototype.is_rename=function(t,a){if(a=a||{},!r.type.is_term(t)||this.indicator!==t.indicator)return!1;for(var n=0;n<this.args.length;n++)if(!r.is_rename(this.args[n],t.args[n],a))return!1;return!0},Fe.prototype.is_rename=function(t,a){return this.equals(t)},P.prototype.variables=function(){return[this.id]},ne.prototype.variables=function(){return[]},u.prototype.variables=function(){return this.ground?[]:[].concat.apply([],V(this.args,function(t){return t.variables()}))},Fe.prototype.variables=function(){return[]},he.prototype.variables=function(){return null===this.body?this.head.variables():this.head.variables().concat(this.body.variables())},P.prototype.apply=function(t){return t.lookup(this.id)?t.lookup(this.id):this},ne.prototype.apply=function(t){return this},u.prototype.apply=function(t){if(this.ground)return this;if("./2"===this.indicator){for(var a=[],n=this;"./2"===n.indicator&&!n.ground;){var s=n.args[0].apply(t);a.push(s),n=n.args[1]}for(var c=n.apply(t),f=a.length-1;f>=0;f--)c=new u(".",[a[f],c]);return c}var d=[];for(f=0;f<this.args.length;f++)s=this.args[f].apply(t),d.push(s);return new u(this.id,d,this.ref)},Fe.prototype.apply=function(t){return this},he.prototype.apply=function(t){return new he(this.head.apply(t),null!==this.body?this.body.apply(t):null)},ye.prototype.apply=function(t){var a,s,f,n={},c={};for(a in this.links)!this.links.hasOwnProperty(a)||(n[a]=this.links[a].apply(t));for(s in this.attrs)if(this.attrs.hasOwnProperty(s))for(f in c[s]={},this.attrs[s])!this.attrs[s].hasOwnProperty(f)||(c[s][f]=this.attrs[s][f].apply(t));return new ye(n,c)},u.prototype.select=function(){for(var t=this;r.type.is_term(t)&&",/2"===t.indicator;)t=t.args[0];return t},u.prototype.replace=function(t){return",/2"===this.indicator?",/2"===this.args[0].indicator?new u(",",[this.args[0].replace(t),this.args[1]]):null===t?this.args[1]:new u(",",[t,this.args[1]]):t},u.prototype.search=function(t){if(this==t||this.ref===t.ref)return!0;for(var a=0;a<this.args.length;a++)if(r.type.is_term(this.args[a])&&this.args[a].search(t))return!0;return!1},Se.prototype.push_global_stack=function(t,a){return this.thread.push_global_stack(t,a)},ge.prototype.push_global_stack=function(t,a){this.__stacks.hasOwnProperty(t)||(this.__stacks[t]=[]),this.__stacks[t].push(a)},Se.prototype.flush_global_stack=function(t,a){return this.thread.push_global_stack(t,a)},ge.prototype.flush_global_stack=function(t,a){var n=a||new u("[]",[]);if(this.__stacks.hasOwnProperty(t)){for(;this.__stacks[t].length>0;)n=new u(".",[this.__stacks[t].pop(),n]);delete this.__stacks[t]}return n},Se.prototype.setMaxInferences=function(t){this.limit="number"==typeof t&&t>0?t:null},ge.prototype.setMaxInferences=function(t){this.session.setMaxInferences(t),this.current_limit=this.session.limit,this.has_limit=null!==this.session.limit},Se.prototype.format_answer=function(t,a){return this.thread.format_answer(t,a)},ge.prototype.format_answer=function(t,a){return r.format_answer(t,this,a)},Se.prototype.get_current_input=function(){return this.current_input},ge.prototype.get_current_input=function(){return this.session.get_current_input()},Se.prototype.get_current_output=function(){return this.current_output},ge.prototype.get_current_output=function(){return this.session.get_current_output()},Se.prototype.set_current_input=function(t){this.current_input=t},ge.prototype.set_current_input=function(t){return this.session.set_current_input(t)},Se.prototype.set_current_output=function(t){this.current_output=t},ge.prototype.set_current_output=function(t){return this.session.set_current_output(t)},Se.prototype.get_stream_by_alias=function(t){return this.streams[t]},ge.prototype.get_stream_by_alias=function(t){return this.session.get_stream_by_alias(t)},Se.prototype.file_system_open=function(t,a,n){return"false/0"===this.get_flag("nodejs").indicator&&(t=this.absolute_file_name(t)),this.file_system.open(t,a,n)},ge.prototype.file_system_open=function(t,a,n){return this.session.file_system_open(t,a,n)},Se.prototype.absolute_file_name=function(t){var a;if("true/0"===this.get_flag("nodejs").indicator){var n=require("path");for(var s in a=t,process.env)!process.env.hasOwnProperty(s)||(a=a.replace(new RegExp("\\$"+s,"g"),process.env[s]));return n.resolve(a)}for(var c=this.working_directory,f=(a=(a="/"===t[0]?t:c+("/"===c[c.length-1]?t:"/"+t)).replace(/\/\.\//g,"/")).split("/"),d=[],T=0;T<f.length;T++)".."!==f[T]?d.push(f[T]):0!==d.length&&d.pop();return d.join("/").replace(/\/\.$/,"/")},ge.prototype.absolute_file_name=function(t,a){return this.session.absolute_file_name(t,a)},Se.prototype.get_char_conversion=function(t){return this.__char_conversion[t]||t},ge.prototype.get_char_conversion=function(t){return this.session.get_char_conversion(t)},Se.prototype.parse=function(t){return this.thread.parse(t)},ge.prototype.parse=function(t){var a=new pe(this);a.new_text(t);var n=a.get_tokens();if(null===n)return!1;var s=me(this,n,0,this.__get_max_priority(),!1);return s.len===n.length&&{value:s.value,expr:s,tokens:n}},Se.prototype.get_flag=function(t){return this.flag[t]},ge.prototype.get_flag=function(t){return this.session.get_flag(t)},Se.prototype.add_rule=function(t,a){return this.thread.add_rule(t,a)},ge.prototype.add_rule=function(t,a){var n,s;if((a=a||{}).from=a.from?a.from:"$tau-js",r.type.is_term(t.head)&&":/2"===t.head.indicator){if(!r.type.is_atom(t.head.args[0]))return void this.throw_warning(r.error.type("module",t.head.args[0],"top_level/0"));n=t.head.args[0].id,t.head=t.head.args[1]}return n?r.type.is_module(s=this.session.modules[n])||(s=new Ze(n,{},"all",{session:this.session}),this.session.modules[n]=s):s=this.session.modules[a.context_module],s.src_predicates[t.head.indicator]=a.from,s.rules.hasOwnProperty(t.head.indicator)||(s.rules[t.head.indicator]=[]),s.rules[t.head.indicator].push(t),s.public_predicates.hasOwnProperty(t.head.indicator)||(s.public_predicates[t.head.indicator]=!1),s.add_index_predicate(t),!0},Se.prototype.run_directive=function(t,a){return this.thread.run_directive(t,a)},ge.prototype.run_directive=function(t,a){return!!r.type.is_directive(t)&&(r.directive[t.indicator]?r.directive[t.indicator](this,t,a):r.directive[t.id+"/*"](this,t,a))},Se.prototype.__get_max_priority=function(){return"1200"},ge.prototype.__get_max_priority=function(){return this.session.__get_max_priority()},Se.prototype.__get_next_priority=function(t){var a=0;for(var n in t=parseInt(t),this.__operators)if(this.__operators.hasOwnProperty(n)){var s=parseInt(n);s>a&&s<t&&(a=s)}return a.toString()},ge.prototype.__get_next_priority=function(t){return this.session.__get_next_priority(t)},Se.prototype.__lookup_operator_classes=function(t,a){return this.__operators.hasOwnProperty(t)&&this.__operators[t][a]instanceof Array&&this.__operators[t][a]||!1},ge.prototype.__lookup_operator_classes=function(t,a){return this.session.__lookup_operator_classes(t,a)},Se.prototype.lookup_operator=function(t,a){for(var n in this.__operators)if(this.__operators[n][t])for(var s=0;s<this.__operators[n][t].length;s++)if(this.__operators[n][t][s].length===a+1)return{priority:n,class:this.__operators[n][t][s]};return null},ge.prototype.lookup_operator=function(t,a){return this.session.lookup_operator(t,a)},Se.prototype.throw_warning=function(t){this.thread.throw_warning(t)},ge.prototype.throw_warning=function(t){this.warnings.push(t)},Se.prototype.get_warnings=function(){return this.thread.get_warnings()},ge.prototype.get_warnings=function(){return this.warnings},Se.prototype.add_goal=function(t,a){this.thread.add_goal(t,a)},ge.prototype.add_goal=function(t,a,n){n=n||null,!0===a&&(this.points=[]);for(var s=t.variables(),c={},f=0;f<s.length;f++)c[s[f]]=new P(s[f]);this.points.push(new Q(t,new ye(c),n))},Se.prototype.consult=function(t,a){return this.thread.consult(t,a)},ge.prototype.consult=function(t,a){var n="",s=!1,c={},f="function"==typeof a?a:function(){};if(c.context_module=void 0===(a=void 0===a||"function"==typeof a?{}:a).context_module?"user":a.context_module,c.text=void 0===a.text||a.text,c.html=void 0===a.html||a.html,c.url=void 0===a.url||a.url,c.file=void 0===a.file||a.file,c.script=void 0===a.script||a.script,c.success=void 0===a.success?f:a.success,c.error=void 0===a.error?f:a.error,"string"==typeof t){if(n=t,c.script&&"false/0"===this.get_flag("nodejs").indicator&&""!=t&&document.getElementById(n)){var d=document.getElementById(n),T=d.getAttribute("type");null!==T&&"text/prolog"===T.replace(/ /g,"").toLowerCase()&&(n=d.text,s=!0)}if(!s&&c.file&&"true/0"===this.get_flag("nodejs").indicator){var O=require("fs"),F=this;return void O.readFile(t,function(G,K){G?(c.file=!1,F.consult(t,c)):Le(F,K.toString(),c)})}if(!s&&"false/0"===this.get_flag("nodejs").indicator&&c.url&&""!==t&&!/\s/.test(t))try{var j=new XMLHttpRequest;return F=this,j.onreadystatechange=function(){4==this.readyState&&(200==this.status?(s=!0,Le(F,n=j.responseText,c)):(c.url=!1,F.consult(t,c)))},j.open("GET",t,!0),void j.send()}catch(G){return void c.error(G)}!s&&c.text&&(s=!0)}else if(c.html&&t.nodeName)switch(t.nodeName.toLowerCase()){case"input":case"textarea":n=t.value,s=!0;break;default:n=t.innerHTML,s=!0}else c.error(r.error.existence("source_sink",new u(n),"top_level/0"));this.warnings=[],Le(this,n,c)},Se.prototype.query=function(t,a){return this.thread.query(t,a)},ge.prototype.query=function(t,a){return this.points=[],this.debugger_states=[],this.level=new u("top_level"),Jt(this,t,a)},Se.prototype.head_point=function(){return this.thread.head_point()},ge.prototype.head_point=function(){return this.points[this.points.length-1]},Se.prototype.get_free_variable=function(t){return this.thread.get_free_variable(t)},ge.prototype.get_free_variable=function(t){var a=[];if("_"===t.id||void 0===this.session.renamed_variables[t.id]){for(this.session.rename++,this.current_point&&(a=this.current_point.substitution.domain());-1!==E(a,r.format_variable(this.session.rename,t.id));)this.session.rename++;if("_"===t.id)return new P(r.format_variable(this.session.rename,t.id));this.session.renamed_variables[t.id]=r.format_variable(this.session.rename,t.id)}return new P(this.session.renamed_variables[t.id])},Se.prototype.next_free_variable=function(){return this.thread.next_free_variable()},ge.prototype.next_free_variable=function(){this.session.rename++;var t=[];for(this.current_point&&(t=this.current_point.substitution.domain());-1!==E(t,r.format_variable(this.session.rename));)this.session.rename++;return new P(r.format_variable(this.session.rename))},Se.prototype.is_public_predicate=function(t,a){return r.type.is_module(this.modules[a=void 0===a?"user":a])&&this.modules[a].is_public_predicate(t)},ge.prototype.is_public_predicate=function(t,a){return this.session.is_public_predicate(t,a)},Se.prototype.is_multifile_predicate=function(t,a){return r.type.is_module(this.modules[a=void 0===a?"user":a])&&this.modules[a].is_multifile_predicate(t)},ge.prototype.is_multifile_predicate=function(t,a){return this.session.is_multifile_predicate(t,a)},Se.prototype.is_meta_predicate=function(t,a){return r.type.is_module(this.modules[a=void 0===a?"user":a])?this.modules[a].is_meta_predicate(t):null},ge.prototype.is_meta_predicate=function(t,a){return this.session.is_meta_predicate(t,a)},Se.prototype.prepend=function(t){return this.thread.prepend(t)},ge.prototype.prepend=function(t){for(var a=t.length-1;a>=0;a--)this.points.push(t[a])},Se.prototype.success=function(t,a){return this.thread.success(t,a)},ge.prototype.success=function(t,n){n=typeof n>"u"?t:n,this.prepend([new Q(t.goal.replace(null),t.substitution,n)])},Se.prototype.throw_error=function(t){return this.thread.throw_error(t)},ge.prototype.throw_error=function(t){r.type.is_variable(t)&&(t=r.error.instantiation(this.level.indicator));var a=new Q(new u("throw",[t]),new ye,null);a.error=!0,this.prepend([a])},Se.prototype.lookup_module=function(t,a){return this.thread.lookup_module(t,a)},ge.prototype.lookup_module=function(t,a){if(r.type.is_module(n=this.session.modules[a])||(n=this.session.modules.user),n.rules.hasOwnProperty(t.indicator)&&(n.exports_predicate(t.indicator)||n.rules.hasOwnProperty(this.level.indicator)||a===n.id))return n;for(var s in n.modules.system=r.modules.system,n.modules.user=this.session.modules.user,n.modules)if(this.session.modules.hasOwnProperty(s)){var n;if((n=this.session.modules[s]).rules.hasOwnProperty(t.indicator)&&(n.exports_predicate(t.indicator)||n.rules.hasOwnProperty(this.level.indicator)||a===n.id))return n}return null},Se.prototype.expand_meta_predicate=function(t,a,n){return this.thread.expand_meta_predicate(t,a,n)},ge.prototype.expand_meta_predicate=function(t,a,n){var s=this.session.modules[a];if(s){var c=s.is_meta_predicate(t.indicator);if(c)for(var f=0;f<c.args.length;f++)if(r.type.is_integer(c.args[f])||r.type.is_atom(c.args[f])&&-1!==E([":"],c.args[f].id))(!r.type.is_term(t.args[f])||":/2"!==t.args[f].indicator)&&(t.args[f]=new u(":",[new u(n),t.args[f]]));else if(r.type.is_atom(c.args[f])&&"^"===c.args[f].id){for(var d=t,T=f,O=t.args[f];r.type.is_term(O)&&"^/2"===O.indicator;)d=O,T=1,O=O.args[1];(!r.type.is_term(O)||":/2"!==O.indicator)&&(d.args[T]=new u(":",[new u(n),O]))}}},Se.prototype.step=function(){return this.thread.step()},ge.prototype.step=function(){if(0!==this.points.length){var t=!1,a=this.points.pop();this.current_point=a,this.debugger&&this.debugger_states.push(a);var n=r.type.is_term(a.goal)?a.goal.select():a.goal;if(r.type.is_term(n)&&(":/2"!==n.indicator||r.type.is_term(n.args[1]))){var s=null,c=[];if(null!==n){this.total_steps++;for(var f=a;null!==f.parent&&f.parent.goal.search(n);)f=f.parent;if(null===f.parent?this.level=new u("top_level"):(this.level=f.parent.goal.select(),":/2"===this.level.indicator&&(this.level=this.level.args[1])),r.type.is_term(n)&&":/2"===n.indicator){if(s=n.args[0],n=n.args[1],!r.type.is_atom(s))return void this.throw_error(r.error.type("module",s,this.level.indicator));s=s.id}else s=this.level.definition_module?this.level.definition_module:"user";if(n.context_module=s,",/2"===n.indicator)return void this.prepend([new Q(a.goal.replace(new u(",",[new u(":",[new u(s),n.args[0]]),new u(":",[new u(s),n.args[1]])])),a.substitution,a)]);this.__call_indicator=n.indicator;var d=this.lookup_module(n,s);n.definition_module=r.type.is_module(d)?d.id:"user",this.expand_meta_predicate(n,n.definition_module,s);var T=null;if(null===(T=d&&n.args.length>0&&n.args[0].index&&d.indexed_clauses.hasOwnProperty(n.indicator)&&d.indexed_clauses[n.indicator].hasOwnProperty(n.args[0].index)?d.indexed_clauses[n.indicator][n.args[0].index]:null===d?null:d.rules[n.indicator]))this.session.modules.user.rules.hasOwnProperty(n.indicator)||("error"===this.get_flag("unknown").id?this.throw_error(r.error.existence("procedure",n.indicator,this.level.indicator)):"warning"===this.get_flag("unknown").id&&this.throw_warning("unknown procedure "+n.indicator+" (from "+this.level.indicator+")"));else if(T instanceof Function)t=T(this,a,n);else{this.__goal_expansion&&"goal_expansion/2"===n.indicator&&(T=T.concat(r.builtin.rules["goal_expansion/2"]));for(var O=0;O<T.length;O++){this.session.renamed_variables={};var F=T[O].rename(this),j="true/0"===this.get_flag("occurs_check").indicator,G=r.unify(n,F.head,j);if(null!==G){var K=new Q;K.goal=a.goal.replace(F.body),null!==K.goal&&(K.goal=K.goal.apply(G)),K.substitution=a.substitution.apply(G),K.parent=a,c.push(K)}}this.prepend(c)}}}else{var fe=r.type.is_term(n)&&":/2"===n.indicator?n.args[1]:n;r.type.is_variable(fe)?this.throw_error(r.error.instantiation(this.level.indicator)):this.throw_error(r.error.type("callable",fe,this.level.indicator))}return t}},Se.prototype.answer=function(t){return this.thread.answer(t)},ge.prototype.answer=function(t){var a={};"function"==typeof(t=t||function(){})?a={success:t,error:t,fail:t,limit:t}:(a.success=void 0===t.success?function(){}:t.success,a.error=void 0===t.error?function(){}:t.error,a.fail=void 0===t.fail?function(){}:t.fail,a.limit=void 0===t.limit?function(){}:t.limit),this.__calls.push(a),!(this.__calls.length>1)&&this.again()},Se.prototype.answers=function(t,a,n){return this.thread.answers(t,a,n)},ge.prototype.answers=function(t,a,n){var s=void 0===a?1e3:a,c=this;s<=0?n&&n():this.answer(function(f){t(f),!1!==f?setTimeout(function(){c.answers(t,s-1,n)},0):n&&n()})},Se.prototype.again=function(t){return this.thread.again(t)},ge.prototype.again=function(t){for(;this.__calls.length>0;){for(this.warnings=[],!1!==t&&(this.current_limit=this.session.limit);(!this.has_limit||this.current_limit>0)&&this.points.length>0&&null!==this.head_point().goal&&!r.type.is_error_state(this.head_point());){this.has_limit&&this.current_limit--;var a=Date.now(),n=this.step(),s=Date.now();if(this.cpu_time+=s-a,!0===n)return}var c=this.__calls.shift();if(this.has_limit&&this.current_limit<=0)!function(T){setTimeout(function(){T.limit(null)},0)}(c);else if(0===this.points.length)!function(T){setTimeout(function(){T.fail(!1)},0)}(c);else if(r.type.is_error(this.head_point().goal)){var f=this.format_error(this.points.pop());this.points=[],function(T,O){setTimeout(function(){O.error(T)},0)}(f,c)}else this.debugger&&this.debugger_states.push(this.head_point()),function(T,O){setTimeout(function(){O.success(T)},0)}(this.format_success(this.points.pop()),c)}},Se.prototype.unfold=function(t){if(null===t.body)return!1;var a=t.head,n=t.body,s=n.select(),c=new ge(this),f=[];c.add_goal(s),c.step();for(var d=c.points.length-1;d>=0;d--){var T=c.points[d],O=a.apply(T.substitution),F=n.replace(T.goal);null!==F&&(F=F.apply(T.substitution)),f.push(new he(O,F))}var j=this.modules.user.rules[a.indicator],G=E(j,t);return f.length>0&&-1!==G&&(j.splice.apply(j,[G,1].concat(f)),!0)},ge.prototype.unfold=function(t){return this.session.unfold(t)},P.prototype.interpret=function(t){return r.error.instantiation(t.level.indicator)},ne.prototype.interpret=function(t){return this},u.prototype.interpret=function(t){return r.type.is_unitary_list(this)?this.args[0].interpret(t):r.operate(t,this)},P.prototype.compare=function(t){return this.id<t.id?-1:this.id>t.id?1:0},ne.prototype.compare=function(t){return this.value===t.value&&this.is_float===t.is_float?0:this.value<t.value||this.value===t.value&&this.is_float&&!t.is_float?-1:this.value>t.value?1:void 0},u.prototype.compare=function(t){if(this.args.length<t.args.length||this.args.length===t.args.length&&this.id<t.id)return-1;if(this.args.length>t.args.length||this.args.length===t.args.length&&this.id>t.id)return 1;for(var a=0;a<this.args.length;a++){var n=r.compare(this.args[a],t.args[a]);if(0!==n)return n}return 0},ye.prototype.lookup=function(t){return this.links[t]?this.links[t]:null},ye.prototype.filter=function(t){var a={};for(var n in this.links)if(this.links.hasOwnProperty(n)){var s=this.links[n];t(n,s)&&(a[n]=s)}return new ye(a,this.attrs)},ye.prototype.exclude=function(t){var a={};for(var n in this.links)!this.links.hasOwnProperty(n)||-1===E(t,n)&&(a[n]=this.links[n]);return new ye(a,this.attrs)},ye.prototype.add=function(t,a){this.links[t]=a},ye.prototype.domain=function(t){var a=!0===t?function(c){return c}:function(c){return new P(c)},n=[];for(var s in this.links)n.push(a(s));return n},ye.prototype.get_attribute=function(t,a){if(this.attrs[t])return this.attrs[t][a]},ye.prototype.set_attribute=function(t,a,n){var s=new ye(this.links);for(var c in this.attrs)if(c===t)for(var f in s.attrs[c]={},this.attrs[c])s.attrs[c][f]=this.attrs[c][f];else s.attrs[c]=this.attrs[c];return s.attrs[t]||(s.attrs[t]={}),s.attrs[t][a]=n,s},ye.prototype.has_attributes=function(t){return this.attrs[t]&&this.attrs[t]!=={}},P.prototype.compile=function(){return'new pl.type.Var("'+this.id.toString()+'")'},ne.prototype.compile=function(){return"new pl.type.Num("+this.value.toString()+", "+this.is_float.toString()+")"},u.prototype.compile=function(){return'new pl.type.Term("'+this.id.replace(/"/g,'\\"')+'", ['+V(this.args,function(t){return t.compile()})+"])"},he.prototype.compile=function(){return"new pl.type.Rule("+this.head.compile()+", "+(null===this.body?"null":this.body.compile())+")"},Se.prototype.compile=function(){var t,n,a=[];for(var s in this.modules.user.rules)if(this.modules.user.rules.hasOwnProperty(s)){var c=this.modules.user.rules[s];n=[],t='"'+s+'": [';for(var f=0;f<c.length;f++)n.push(c[f].compile());t+=n.join(),a.push(t+="]")}return"{"+a.join()+"};"},Ze.prototype.compile=function(){var t=0,a=0,n="var pl;\n";for(var s in n+="(function(pl) {\n",n+='\tvar name = "'+this.id+'";\n',n+="\tvar predicates = function() {\n",n+="\t\treturn {\n",this.rules){if(t>0&&(n+=",\n"),n+='\t\t\t"'+s+'": ',"function"==typeof this.rules[s])n+=this.rules[s];else{n+="[\n";for(var c=0;c<this.rules[s].length;c++)n+="\t\t\t\t"+this.rules[s][c].compile(),c<this.rules[s].length-1&&(n+=","),n+="\n";n+="\t\t\t]"}t++}for(n+="\n\t\t};\n",n+="\t};\n",n+="\tvar exports = [",c=0;c<this.exports.length;c++)c>0&&(n+=", "),n+='"'+this.exports[c]+'"';for(var s in n+="];\n",n+="\tvar options = function() {\n",n+="\t\treturn {\n",n+="\t\t\tdependencies: [",this.modules)a>0&&(n+=", "),n+='"'+s+'"',a++;return n+="]\n",n+="\t\t};\n",n+="};\n",n+="\tif(typeof module !== 'undefined') {\n",n+="\t\tmodule.exports = function(p) {\n",n+="\t\t\tpl = p;\n",n+="\t\t\tnew pl.type.Module(name, predicates(), exports, options());\n",n+="\t\t};\n",n+="\t} else {\n",n+="\t\tnew pl.type.Module(name, predicates(), exports, options());\n",(n+="\t}\n")+"})(pl);\n"},P.prototype.toJavaScript=function(){return this.toString()},ne.prototype.toJavaScript=function(){return this.value},u.prototype.toJavaScript=function(t){if(0===this.args.length&&"[]/0"!==this.indicator)return this.toString(t);if(r.type.is_list(this)){for(var f,a=!0,n=[],s={},c=this;"./2"===c.indicator;)f=c.args[0].toJavaScript(t),n.push(f),(a=a&&r.type.is_term(c.args[0])&&"-/2"===c.args[0].indicator&&r.type.is_atom(c.args[0].args[0]))&&(s[c.args[0].args[0].id]=c.args[0].args[1].toJavaScript(t)),c=c.args[1];if("[]/0"===c.indicator)return a&&n.length>0?s:n}return this.toString(t)},he.prototype.singleton_variables=function(t){t=t||!1;var a=this.head.variables(),n={},s=[];null!==this.body&&(a=a.concat(this.body.variables()));for(var c=0;c<a.length;c++)void 0===n[a[c]]&&(n[a[c]]=0),n[a[c]]++;for(var f in n)if(n.hasOwnProperty(f)&&1===n[f]){var d=w(f,1);if((!t||"_"===f)&&("_"===f||"_"===f[0]&&(95===d||d>=65&&d<=90)))continue;s.push(f)}return s};var pt=typeof process<"u"&&!process.browser,Vt=pt?Be(V(process.argv.slice(1),function(t){return new u(t)})):new u("[]",[]),r={__env:pt?global:window,modules:{},version:e,parser:{tokenizer:pe,expression:me},utils:{str_indicator:Pe,codePointAt:w,fromCodePoint:l,stringLength:m},statistics:{getCountTerms:function(){return Zt}},fromJavaScript:{test:{boolean:function(t,a){return!0===t||!1===t},number:function(t,a){return"number"==typeof t},string:function(t,a){return"string"==typeof t},list:function(t,a){return t instanceof Array},variable:function(t,a){return void 0===t},object:function(t,a){return(a=void 0!==a&&a)&&!(t instanceof Array)&&"object"==typeof t},any:function(t,a){return!0}},conversion:{boolean:function(t,a){return new u(t?"true":"false",[])},number:function(t,a){return new ne(t,t%1!=0)},string:function(t,a){return new u(t,[])},list:function(t,a){a=void 0!==a&&a;for(var s,n=[],c=0;c<t.length;c++){if(void 0===(s=r.fromJavaScript.apply(t[c],a)))return;n.push(s)}return Be(n)},variable:function(t,a){return new P("_")},object:function(t,a){a=void 0!==a&&a,new u("[]",[]);var s=[];for(var c in t)!t.hasOwnProperty(c)||s.push(new u("-",[r.fromJavaScript.apply(c,a),r.fromJavaScript.apply(t[c],a)]));return Be(s)},any:function(t,a){}},apply:function(t,a){for(var n in a=void 0!==a&&a,r.fromJavaScript.test)if("any"!==n&&r.fromJavaScript.test[n](t,a))return r.fromJavaScript.conversion[n](t,a);return r.fromJavaScript.conversion.any(t,a)}},type:{Var:P,Num:ne,Term:u,Rule:he,State:Q,Stream:Fe,Module:Ze,Thread:ge,Session:Se,Substitution:ye,File:M,Directory:k,order:[P,ne,u,Fe],compare:function(t,a){var n=E(r.type.order,t.constructor),s=E(r.type.order,a.constructor);if(n<s)return-1;if(n>s)return 1;if(t.constructor===ne){if(t.is_float&&a.is_float)return 0;if(t.is_float)return-1;if(a.is_float)return 1}return 0},is_substitution:function(t){return t instanceof ye},is_state:function(t){return t instanceof Q},is_rule:function(t){return t instanceof he},is_variable:function(t){return t instanceof P},is_stream:function(t){return t instanceof Fe},is_anonymous_var:function(t){return t instanceof P&&"_"===t.id},is_callable:function(t){return t instanceof u&&(-1===E([",/2",";/2","->/2"],t.indicator)||r.type.is_callable(t.args[0])&&r.type.is_callable(t.args[1]))||t instanceof P},is_number:function(t){return t instanceof ne},is_integer:function(t){return t instanceof ne&&!t.is_float},is_float:function(t){return t instanceof ne&&t.is_float},is_term:function(t){return t instanceof u},is_atom:function(t){return t instanceof u&&0===t.args.length},is_ground:function(t){if(t instanceof P)return!1;if(t instanceof u)for(var a=0;a<t.args.length;a++)if(!r.type.is_ground(t.args[a]))return!1;return!0},is_atomic:function(t){return t instanceof u&&0===t.args.length||t instanceof ne},is_compound:function(t){return t instanceof u&&t.args.length>0},is_list:function(t){return t instanceof u&&("[]/0"===t.indicator||"./2"===t.indicator)},is_empty_list:function(t){return t instanceof u&&"[]/0"===t.indicator},is_non_empty_list:function(t){return t instanceof u&&"./2"===t.indicator},is_fully_list:function(t){for(;t instanceof u&&"./2"===t.indicator;)t=t.args[1];return t instanceof P||t instanceof u&&"[]/0"===t.indicator},is_instantiated_list:function(t){for(;t instanceof u&&"./2"===t.indicator;)t=t.args[1];return t instanceof u&&"[]/0"===t.indicator},is_unitary_list:function(t){return t instanceof u&&"./2"===t.indicator&&t.args[1]instanceof u&&"[]/0"===t.args[1].indicator},is_character:function(t){return t instanceof u&&0===t.args.length&&(1===t.id.length||t.id.length>0&&t.id.length<=2&&w(t.id,0)>=65536)},is_in_character:function(t){return t instanceof u&&("end_of_file/0"===t.indicator||1===t.id.length||t.id.length>0&&t.id.length<=2&&w(t.id,0)>=65536)},is_character_code:function(t){return t instanceof ne&&!t.is_float&&t.value>=0&&t.value<=1114111},is_in_character_code:function(t){return t instanceof ne&&!t.is_float&&t.value>=-1&&t.value<=1114111},is_byte:function(t){return t instanceof ne&&!t.is_float&&t.value>=0&&t.value<=255},is_in_byte:function(t){return t instanceof ne&&!t.is_float&&t.value>=-1&&t.value<=255},is_operator:function(t){return t instanceof u&&r.arithmetic.evaluation[t.indicator]},is_directive:function(t){return t instanceof u&&(void 0!==r.directive[t.indicator]||void 0!==r.directive[t.id+"/*"])},is_builtin:function(t){return t instanceof u&&r.builtin.rules.hasOwnProperty(t.indicator)&&"goal_expansion/2"!==t.indicator},is_error:function(t){return t instanceof u&&"throw/1"===t.indicator},is_error_state:function(t){return r.type.is_state(t)&&t.error&&!0===t.error},is_predicate_indicator:function(t){return t instanceof u&&"//2"===t.indicator&&t.args[0]instanceof u&&0===t.args[0].args.length&&t.args[1]instanceof ne&&!1===t.args[1].is_float},is_flag:function(t){return t instanceof u&&0===t.args.length&&void 0!==r.flag[t.id]},is_value_flag:function(t,a){if(!r.type.is_flag(t))return!1;for(var n in r.flag[t.id].allowed)if(r.flag[t.id].allowed.hasOwnProperty(n)&&r.flag[t.id].allowed[n].equals(a))return!0;return!1},is_io_mode:function(t){return r.type.is_atom(t)&&-1!==["read","write","append"].indexOf(t.id)},is_stream_option:function(t){return r.type.is_term(t)&&("alias/1"===t.indicator&&r.type.is_atom(t.args[0])||"reposition/1"===t.indicator&&r.type.is_atom(t.args[0])&&("true"===t.args[0].id||"false"===t.args[0].id)||"type/1"===t.indicator&&r.type.is_atom(t.args[0])&&("text"===t.args[0].id||"binary"===t.args[0].id)||"eof_action/1"===t.indicator&&r.type.is_atom(t.args[0])&&("error"===t.args[0].id||"eof_code"===t.args[0].id||"reset"===t.args[0].id))},is_stream_position:function(t){return r.type.is_term(t)&&("end_of_stream/0"===t.indicator||"past_end_of_stream/0"===t.indicator||"position/3"===t.indicator&&r.type.is_integer(t.args[0])&&r.type.is_integer(t.args[1])&&r.type.is_integer(t.args[2]))},is_stream_property:function(t){return r.type.is_term(t)&&("input/0"===t.indicator||"output/0"===t.indicator||"alias/1"===t.indicator&&(r.type.is_variable(t.args[0])||r.type.is_atom(t.args[0]))||"file_name/1"===t.indicator&&(r.type.is_variable(t.args[0])||r.type.is_atom(t.args[0]))||"reposition/1"===t.indicator&&(r.type.is_variable(t.args[0])||r.type.is_atom(t.args[0])&&("true"===t.args[0].id||"false"===t.args[0].id))||"type/1"===t.indicator&&(r.type.is_variable(t.args[0])||r.type.is_atom(t.args[0])&&("text"===t.args[0].id||"binary"===t.args[0].id))||"mode/1"===t.indicator&&(r.type.is_variable(t.args[0])||r.type.is_atom(t.args[0])&&("read"===t.args[0].id||"write"===t.args[0].id||"append"===t.args[0].id))||"eof_action/1"===t.indicator&&(r.type.is_variable(t.args[0])||r.type.is_atom(t.args[0])&&("error"===t.args[0].id||"eof_code"===t.args[0].id||"reset"===t.args[0].id))||"end_of_stream/1"===t.indicator&&(r.type.is_variable(t.args[0])||r.type.is_atom(t.args[0])&&("at"===t.args[0].id||"past"===t.args[0].id||"not"===t.args[0].id))||"position/1"===t.indicator&&(r.type.is_variable(t.args[0])||r.type.is_term(t.args[0])&&"position/3"===t.args[0].indicator&&(r.type.is_variable(t.args[0].args[0])||r.type.is_integer(t.args[0].args[0]))&&(r.type.is_variable(t.args[0].args[1])||r.type.is_integer(t.args[0].args[1]))&&(r.type.is_variable(t.args[0].args[2])||r.type.is_integer(t.args[0].args[2]))))},is_streamable:function(t){return void 0!==t.__proto__.stream},is_read_option:function(t){return r.type.is_term(t)&&-1!==["variables/1","variable_names/1","singletons/1"].indexOf(t.indicator)},is_write_option:function(t){return r.type.is_term(t)&&("quoted/1"===t.indicator&&r.type.is_atom(t.args[0])&&("true"===t.args[0].id||"false"===t.args[0].id)||"ignore_ops/1"===t.indicator&&r.type.is_atom(t.args[0])&&("true"===t.args[0].id||"false"===t.args[0].id)||"numbervars/1"===t.indicator&&r.type.is_atom(t.args[0])&&("true"===t.args[0].id||"false"===t.args[0].id)||"variable_names/1"===t.indicator&&r.type.is_fully_list(t.args[0]))},is_close_option:function(t){return r.type.is_term(t)&&"force/1"===t.indicator&&r.type.is_atom(t.args[0])&&("true"===t.args[0].id||"false"===t.args[0].id)},is_modifiable_flag:function(t){return r.type.is_flag(t)&&r.flag[t.id].changeable},is_module:function(t){return t instanceof Ze},is_file:function(t){return t instanceof M},is_directory:function(t){return t instanceof k},is_predicate_property:function(t){return r.type.is_term(t)&&("built_in/0"===t.indicator||"static/0"===t.indicator||"dynamic/0"===t.indicator||"native_code/0"===t.indicator||"multifile/0"===t.indicator||"meta_predicate/1"===t.indicator)},is_meta_argument_specifier:function(t){return r.type.is_integer(t)&&t.value>=0||r.type.is_atom(t)&&-1!==E(["+","-","?","*","^",":","//"],t.id)},is_time_property:function(t){return r.type.is_term(t)&&1===t.args.length&&(r.type.is_variable(t.args[0])||r.type.is_integer(t.args[0]))&&-1!==E(["year","month","day","hours","minutes","seconds","milliseconds","weekday"],t.id)}},arithmetic:{evaluation:{"e/0":{type_args:null,type_result:!0,fn:function(t){return Math.E}},"pi/0":{type_args:null,type_result:!0,fn:function(t){return Math.PI}},"tau/0":{type_args:null,type_result:!0,fn:function(t){return 2*Math.PI}},"epsilon/0":{type_args:null,type_result:!0,fn:function(t){return Number.EPSILON}},"+/1":{type_args:null,type_result:null,fn:function(t,a){return t}},"-/1":{type_args:null,type_result:null,fn:function(t,a){return-t}},"\\/1":{type_args:!1,type_result:!1,fn:function(t,a){return~t}},"abs/1":{type_args:null,type_result:null,fn:function(t,a){return Math.abs(t)}},"sign/1":{type_args:null,type_result:null,fn:function(t,a){return Math.sign(t)}},"float_integer_part/1":{type_args:!0,type_result:!1,fn:function(t,a){return parseInt(t)}},"float_fractional_part/1":{type_args:!0,type_result:!0,fn:function(t,a){return t-parseInt(t)}},"float/1":{type_args:null,type_result:!0,fn:function(t,a){return parseFloat(t)}},"floor/1":{type_args:!0,type_result:!1,fn:function(t,a){return Math.floor(t)}},"truncate/1":{type_args:!0,type_result:!1,fn:function(t,a){return parseInt(t)}},"round/1":{type_args:!0,type_result:!1,fn:function(t,a){return Math.round(t)}},"ceiling/1":{type_args:!0,type_result:!1,fn:function(t,a){return Math.ceil(t)}},"sin/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.sin(t)}},"cos/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.cos(t)}},"tan/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.tan(t)}},"asin/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.abs(t)<=1?Math.asin(t):r.error.evaluation("undefined",a.__call_indicator)}},"acos/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.abs(t)<=1?Math.acos(t):r.error.evaluation("undefined",a.__call_indicator)}},"atan/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.atan(t)}},"atan2/2":{type_args:null,type_result:!0,fn:function(t,a,n){return 0===t&&0===a?r.error.evaluation("undefined",n.__call_indicator):Math.atan2(t,a)}},"acosh/1":{type_args:null,type_result:!0,fn:function(t,a){return t>=1?Math.acosh(t):r.error.evaluation("undefined",a.__call_indicator)}},"asinh/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.asinh(t)}},"atanh/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.abs(t)<1?Math.atanh(t):r.error.evaluation("undefined",a.__call_indicator)}},"cosh/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.cosh(t)}},"sinh/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.sinh(t)}},"tanh/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.tanh(t)}},"exp/1":{type_args:null,type_result:!0,fn:function(t,a){return Math.exp(t)}},"sqrt/1":{type_args:null,type_result:!0,fn:function(t,a){return t>=0?Math.sqrt(t):r.error.evaluation("undefined",a.__call_indicator)}},"log/1":{type_args:null,type_result:!0,fn:function(t,a){return t>0?Math.log(t):r.error.evaluation("undefined",a.__call_indicator)}},"log/2":{type_args:null,type_result:!0,fn:function(t,a,n){return t>0&&a>0?Math.log(a)/Math.log(t):r.error.evaluation("undefined",n.__call_indicator)}},"log10/1":{type_args:null,type_result:!0,fn:function(t,a){return t>0?Math.log(t)/Math.log(10):r.error.evaluation("undefined",a.__call_indicator)}},"+/2":{type_args:null,type_result:null,fn:function(t,a,n){return t+a}},"-/2":{type_args:null,type_result:null,fn:function(t,a,n){return t-a}},"*/2":{type_args:null,type_result:null,fn:function(t,a,n){return t*a}},"//2":{type_args:null,type_result:!0,fn:function(t,a,n){return a?t/a:r.error.evaluation("zero_divisor",n.__call_indicator)}},"///2":{type_args:!1,type_result:!1,fn:function(t,a,n){return a?Math.trunc(t/a):r.error.evaluation("zero_divisor",n.__call_indicator)}},"div/2":{type_args:!1,type_result:!1,fn:function(t,a,n){return a?Math.floor(t/a):r.error.evaluation("zero_divisor",n.__call_indicator)}},"**/2":{type_args:null,type_result:!0,fn:function(t,a,n){return 0==t&&a<0?r.error.evaluation("zero_divisor",n.__call_indicator):Math.pow(t,a)}},"^/2":{type_args:null,type_result:null,fn:function(t,a,n){return 0==t&&a<0?r.error.evaluation("zero_divisor",n.__call_indicator):Math.pow(t,a)}},"<</2":{type_args:!1,type_result:!1,fn:function(t,a,n){return t<<a}},">>/2":{type_args:!1,type_result:!1,fn:function(t,a,n){return t>>a}},"/\\/2":{type_args:!1,type_result:!1,fn:function(t,a,n){return t&a}},"\\//2":{type_args:!1,type_result:!1,fn:function(t,a,n){return t|a}},"xor/2":{type_args:!1,type_result:!1,fn:function(t,a,n){return t^a}},"rem/2":{type_args:!1,type_result:!1,fn:function(t,a,n){return a?t%a:r.error.evaluation("zero_divisor",n.__call_indicator)}},"mod/2":{type_args:!1,type_result:!1,fn:function(t,a,n){return a?t-Math.floor(t/a)*a:r.error.evaluation("zero_divisor",n.__call_indicator)}},"max/2":{type_args:null,type_result:null,fn:function(t,a,n){return Math.max(t,a)}},"min/2":{type_args:null,type_result:null,fn:function(t,a,n){return Math.min(t,a)}},"gcd/2":{type_args:!1,type_result:!1,fn:function(t,a,n){return bt(t,a)}}}},directive:{"dynamic/1":function(t,a,n){var s=a.args[0];r.type.is_list(s)||(s=Be([s]));for(var c=s;r.type.is_term(c)&&"./2"===c.indicator;){if(indicator=c.args[0],r.type.is_variable(indicator))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_compound(indicator)&&"//2"===indicator.indicator)if(r.type.is_variable(indicator.args[0])||r.type.is_variable(indicator.args[1]))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_atom(indicator.args[0]))if(r.type.is_integer(indicator.args[1])){var f=indicator.args[0].id+"/"+indicator.args[1].value,d=t.session.modules[n.context_module];d.public_predicates[f]=!0,d.rules[f]||(d.rules[f]=[])}else t.throw_warning(r.error.type("integer",indicator.args[1],a.indicator));else t.throw_warning(r.error.type("atom",indicator.args[0],a.indicator));else t.throw_warning(r.error.type("predicate_indicator",indicator,a.indicator));c=c.args[1]}r.type.is_variable(c)?t.throw_warning(r.error.instantiation(a.indicator)):(!r.type.is_term(c)||"[]/0"!==c.indicator)&&t.throw_warning(r.error.type("predicate_indicator",indicator,a.indicator))},"dynamic/*":function(t,a){for(var n=0;n<a.args.length;n++)r.directive["dynamic/1"](t,new u("dynamic",[a.args[n]]))},"multifile/1":function(t,a,n){var s=a.args[0];if(r.type.is_variable(s))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_compound(s)&&"//2"===s.indicator)if(r.type.is_variable(s.args[0])||r.type.is_variable(s.args[1]))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_atom(s.args[0]))if(r.type.is_integer(s.args[1])){var c=a.args[0].args[0].id+"/"+a.args[0].args[1].value,f=t.session.modules[n.context_module];f.multifile_predicates[c]=!0,f.rules.hasOwnProperty(c)||(f.rules[c]=[],f.public_predicates[c]=!1)}else t.throw_warning(r.error.type("integer",s.args[1],a.indicator));else t.throw_warning(r.error.type("atom",s.args[0],a.indicator));else t.throw_warning(r.error.type("predicate_indicator",s,a.indicator))},"meta_predicate/1":function(t,a,s){s=void 0===s?{}:s;var c=a.args[0];if(r.type.is_variable(c))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_callable(c)){for(var f=0;f<c.args.length;f++){var d=c.args[f];if(!r.type.is_meta_argument_specifier(d))return void t.throw_warning(r.error.type("meta_argument_specifier",d,a.indicator))}t.session.modules[s.context_module].meta_predicates[c.indicator]=c}else t.throw_warning(r.error.type("callable",c,a.indicator))},"set_prolog_flag/2":function(t,a){var n=a.args[0],s=a.args[1];r.type.is_variable(n)||r.type.is_variable(s)?t.throw_warning(r.error.instantiation(a.indicator)):r.type.is_atom(n)?r.type.is_flag(n)?r.type.is_modifiable_flag(n)?r.type.is_value_flag(n,s)?t.session.flag[n.id]=s:t.throw_warning(r.error.domain("flag_value",new u("+",[n,s]),a.indicator)):t.throw_warning(r.error.permission("modify","flag",n,a.indicator)):t.throw_warning(r.error.domain("prolog_flag",n,a.indicator)):t.throw_warning(r.error.type("atom",n,a.indicator))},"module/2":function(t,a,s){(s=void 0===s?{}:s).context_module=void 0===s.context_module?"user":s.context_module;var c=a.args[0],f=a.args[1];if(r.type.is_variable(c)||r.type.is_variable(f))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_atom(c))if(r.type.is_list(f))if(r.type.is_module(t.session.modules[c.indicator]))t.throw_warning(r.error.permission("create","module",c,a.indicator));else{for(var d=f,T=[];r.type.is_term(d)&&"./2"===d.indicator;){var O=d.args[0];r.type.is_predicate_indicator(O)?T.push(O.args[0].id+"/"+O.args[1].value):t.throw_warning(r.error.type("predicate_indicator",O,a.indicator)),d=d.args[1]}r.type.is_variable(d)?t.throw_warning(r.error.instantiation(a.indicator)):r.type.is_empty_list(d)||t.throw_warning(r.error.type("list",f,a.indicator));var F=new Ze(c.id,{},T,{session:t.session});t.session.modules[c.id]=F,t.session.modules[s.context_module].modules[c.id]=F,s.context_module=c.id}else t.throw_warning(r.error.type("list",f,a.indicator));else t.throw_warning(r.error.type("atom",c,a.indicator))},"use_module/1":function(t,a,s){(s=void 0===s?{}:s).context_module=void 0===s.context_module?"user":s.context_module;var c=a.args[0];if(r.type.is_variable(c))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_term(c)){if("library/1"!==c.indicator)return t.consult(f=c.id,{context_module:s.context_module,text:!1,success:function(){Le(t,s.string,s)},error:function(){s.error(r.error.existence("module",c,a.indicator))}}),!0;var f,d=r.modules[f=c.args[0].id];if(r.type.is_module(d)){if(!t.session.modules[s.context_module].modules.hasOwnProperty(f)){t.session.modules[f]=d,t.session.modules[s.context_module].modules[f]=d;for(var T=0;T<d.dependencies.length;T++){var O=new u("use_module",[new u("library",[new u(d.dependencies[T])])]);r.directive["use_module/1"](t,O,{context_module:f})}}}else t.throw_warning(r.error.existence("module",c,a.indicator))}else t.throw_warning(r.error.type("term",c,a.indicator))},"char_conversion/2":function(t,a,n){var s=a.args[0],c=a.args[1];if(r.type.is_variable(s)||r.type.is_variable(c))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_character(s)){if(r.type.is_character(c))return s.id===c.id?delete t.session.__char_conversion[s.id]:t.session.__char_conversion[s.id]=c.id,n.tokens=n.tokenizer.get_tokens(n.current_token),n.current_token=0,!0;t.throw_warning(r.error.type("character",c,a.indicator))}else t.throw_warning(r.error.type("character",s,a.indicator))},"op/3":function(t,a){var n=a.args[0],s=a.args[1],c=a.args[2];if(r.type.is_atom(c)&&(c=new u(".",[c,new u("[]")])),r.type.is_variable(n)||r.type.is_variable(s)||r.type.is_variable(c))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_integer(n))if(r.type.is_atom(s))if(r.type.is_list(c))if(r.type.is_empty_list(c))t.throw_warning(r.error.permission("create","operator",c,a.indicator));else{for(var f=c;r.type.is_term(f)&&"./2"===f.indicator;){var d=f.args[0];if(f=f.args[1],r.type.is_variable(d))t.throw_warning(r.error.instantiation(a.indicator));else if(r.type.is_atom(d))if(n.value<0||n.value>1200)t.throw_warning(r.error.domain("operator_priority",n,a.indicator));else if(","===d.id)t.throw_error(r.error.permission("modify","operator",d,a.indicator));else if("{}"===d.id)t.throw_warning(r.error.permission("create","operator",d,a.indicator));else if("[]"===d.id)t.throw_warning(r.error.permission("create","operator",d,a.indicator));else if("|"===d.id&&0!==n.value&&(n.value<1001||3!==s.id.length))t.throw_warning(r.error.permission("create","operator",d,a.indicator));else if(-1===["fy","fx","yf","xf","xfx","yfx","xfy"].indexOf(s.id))t.throw_warning(r.error.domain("operator_specifier",s,a.indicator));else{var j,T={prefix:null,infix:null,postfix:null};for(var O in t.session.__operators)if(t.session.__operators.hasOwnProperty(O)){var F=t.session.__operators[O][d.id];F&&(-1!==E(F,"fx")&&(T.prefix={priority:O,type:"fx"}),-1!==E(F,"fy")&&(T.prefix={priority:O,type:"fy"}),-1!==E(F,"xf")&&(T.postfix={priority:O,type:"xf"}),-1!==E(F,"yf")&&(T.postfix={priority:O,type:"yf"}),-1!==E(F,"xfx")&&(T.infix={priority:O,type:"xfx"}),-1!==E(F,"xfy")&&(T.infix={priority:O,type:"xfy"}),-1!==E(F,"yfx")&&(T.infix={priority:O,type:"yfx"}))}switch(s.id){case"fy":case"fx":j="prefix";break;case"yf":case"xf":j="postfix";break;default:j="infix"}T.infix&&"postfix"===j||T.postfix&&"infix"===j?t.throw_warning(r.error.permission("create","operator",d,a.indicator)):(T[j]&&(qt(t.session.__operators[T[j].priority][d.id],T[j].type),0===t.session.__operators[T[j].priority][d.id].length&&delete t.session.__operators[T[j].priority][d.id]),n.value>0&&(t.session.__operators[n.value]||(t.session.__operators[n.value.toString()]={}),t.session.__operators[n.value][d.id]||(t.session.__operators[n.value][d.id]=[]),t.session.__operators[n.value][d.id].push(s.id)))}else t.throw_warning(r.error.type("atom",d,a.indicator))}if(r.type.is_variable(f))return void t.throw_warning(r.error.instantiation(a.indicator));if(!r.type.is_term(f)||"[]/0"!==f.indicator)return void t.throw_warning(r.error.type("list",c,a.indicator))}else t.throw_warning(r.error.type("list",c,a.indicator));else t.throw_warning(r.error.type("atom",s,a.indicator));else t.throw_warning(r.error.type("integer",n,a.indicator))},"initialization/1":function(t,a,n){n.initialization.push(a.args[0])}},flag:{bounded:{allowed:[new u("true"),new u("false")],value:new u("true"),changeable:!1},max_integer:{allowed:[new ne(Number.MAX_SAFE_INTEGER)],value:new ne(Number.MAX_SAFE_INTEGER),changeable:!1},min_integer:{allowed:[new ne(Number.MIN_SAFE_INTEGER)],value:new ne(Number.MIN_SAFE_INTEGER),changeable:!1},integer_rounding_function:{allowed:[new u("down"),new u("toward_zero")],value:new u("toward_zero"),changeable:!1},char_conversion:{allowed:[new u("on"),new u("off")],value:new u("on"),changeable:!0},debug:{allowed:[new u("on"),new u("off")],value:new u("off"),changeable:!0},max_arity:{allowed:[new u("unbounded")],value:new u("unbounded"),changeable:!1},unknown:{allowed:[new u("error"),new u("fail"),new u("warning")],value:new u("error"),changeable:!0},double_quotes:{allowed:[new u("chars"),new u("codes"),new u("atom")],value:new u("chars"),changeable:!0},occurs_check:{allowed:[new u("false"),new u("true")],value:new u("false"),changeable:!0},dialect:{allowed:[new u("tau")],value:new u("tau"),changeable:!1},version_data:{allowed:[new u("tau",[new ne(e.major,!1),new ne(e.minor,!1),new ne(e.patch,!1),new u(e.status)])],value:new u("tau",[new ne(e.major,!1),new ne(e.minor,!1),new ne(e.patch,!1),new u(e.status)]),changeable:!1},nodejs:{allowed:[new u("true"),new u("false")],value:new u(pt?"true":"false"),changeable:!1},argv:{allowed:[Vt],value:Vt,changeble:!1}},unify:function(t,a,n){n=void 0!==n&&n;var s=Array.isArray(t)?t:[t],c=Array.isArray(a)?a:[a];if(s.length!==c.length)return null;for(var f=new ye;s.length>0;){var d=s.pop(),T=c.pop();if(r.type.is_variable(d)&&(d=d.apply(f)),r.type.is_variable(T)&&(T=T.apply(f)),d!=T)if(r.type.is_term(d)&&r.type.is_term(T)){if(d.indicator!==T.indicator)return null;for(var O=d.args.length-1;O>=0;O--)s.push(d.args[O]),c.push(T.args[O])}else if(r.type.is_number(d)&&r.type.is_number(T)){if(d.value!==T.value||d.is_float!==T.is_float)return null}else if(r.type.is_variable(d)){if(T=T.apply(f),r.type.is_variable(T)&&d.id===T.id)continue;if(!0===n&&-1!==E(T.variables(),d.id))return null;"_"!==d.id&&f.add(d.id,T)}else if(r.type.is_variable(T))s.push(T),c.push(d);else{if(void 0===d.unify)return null;var F=d.apply(f).unify(T.apply(f),n);if(null==F)return null;for(var O in F.links)f.add(O,F.links[O])}}return f.apply(f)},is_rename:function(t,a,n){return n=n||{},t.is_rename&&a.is_rename?t.is_rename(a,n):!(!t.equals||!a.equals)&&t.equals(a)},compare:function(t,a){var n=r.type.compare(t,a);return 0!==n?n:t.compare(a)},arithmetic_compare:function(t,a,n){var s=a.interpret(t);if(r.type.is_number(s)){var c=n.interpret(t);return r.type.is_number(c)?s.value<c.value?-1:s.value>c.value?1:0:c}return s},operate:function(t,a){if(r.type.is_operator(a)){for(var c,n=r.type.is_operator(a),s=[],f=!1,d=0;d<a.args.length;d++){if(c=a.args[d].interpret(t),!r.type.is_number(c))return c;if(null!==n.type_args&&c.is_float!==n.type_args)return r.error.type(n.type_args?"float":"integer",c,t.__call_indicator);s.push(c.value),f=f||c.is_float}return s.push(t),c=r.arithmetic.evaluation[a.indicator].fn.apply(this,s),"^/2"!==a.indicator||f||c===parseInt(c,10)?(f=null===n.type_result?f:n.type_result,r.type.is_term(c)?c:c===Number.POSITIVE_INFINITY||c===Number.NEGATIVE_INFINITY?r.error.evaluation("float_overflow",t.__call_indicator):!1===f&&"true"===t.get_flag("bounded").id&&(c>t.get_flag("max_integer").value||c<t.get_flag("min_integer").value)?r.error.evaluation("int_overflow",t.__call_indicator):new ne(c,f)):r.error.type("float",new ne(s[0],!1),t.__call_indicator)}return r.error.type("evaluable",Pe(a.indicator),t.__call_indicator)},error:{existence:function(t,a,n){return"string"==typeof a&&(a=Pe(a)),new u("error",[new u("existence_error",[new u(t),a]),Pe(n)])},type:function(t,a,n){return new u("error",[new u("type_error",[new u(t),a]),Pe(n)])},instantiation:function(t){return new u("error",[new u("instantiation_error"),Pe(t)])},uninstantiation:function(t,a){return new u("error",[new u("uninstantiation_error",[new u(t)]),Pe(a)])},domain:function(t,a,n){return new u("error",[new u("domain_error",[new u(t),a]),Pe(n)])},representation:function(t,a){return new u("error",[new u("representation_error",[new u(t)]),Pe(a)])},permission:function(t,a,n,s){return new u("error",[new u("permission_error",[new u(t),new u(a),n]),Pe(s)])},evaluation:function(t,a){return new u("error",[new u("evaluation_error",[new u(t)]),Pe(a)])},syntax:function(t,a,n){t=t||{value:"",line:0,column:0,matches:[""],start:0};var s=n&&t.matches.length>0?t.start+t.matches[0].length:t.start,c=n?new u("token_not_found"):new u("found",[new u(t.value.toString())]),f=new u(".",[new u("line",[new ne(t.line+1)]),new u(".",[new u("column",[new ne(s)]),new u(".",[c,new u("[]",[])])])]);return new u("error",[new u("syntax_error",[new u(a)]),f])},syntax_by_predicate:function(t,a){return new u("error",[new u("syntax_error",[new u(t)]),Pe(a)])}},warning:{singleton:function(t,a,n){for(var s=new u("[]"),c=t.length-1;c>=0;c--)s=new u(".",[new P(t[c]),s]);return new u("warning",[new u("singleton_variables",[s,Pe(a)]),new u(".",[new u("line",[new ne(n,!1)]),new u("[]")])])},failed_goal:function(t,a){return new u("warning",[new u("failed_goal",[t]),new u(".",[new u("line",[new ne(a,!1)]),new u("[]")])])}},format_variable:function(t,a){var n=a&&a.length>0?w(a,1):0;return"_"===a||a&&"_"===a[0]&&(95===n||n>=65&&n<=90)?"__"+t:"_"+t},format_answer:function(t,a,s){if(a instanceof Se&&(a=a.thread),(s=s||{}).session=a?a.session:void 0,r.type.is_error(t))return"uncaught exception: "+t.args[0].toString(s);if(!1===t)return"false";if(null===t)return"limit exceeded";var c=0,f="";if(r.type.is_substitution(t)){var d=t.domain(!0);for(var T in t.links)if(t.links.hasOwnProperty(T)&&r.type.is_variable(t.links[T])){var O={};O[t.links[T].id]=new P(T),t=t.apply(new ye(O))}t=t.filter(function(G,K){return!r.type.is_variable(K)||r.type.is_variable(K)&&t.has_attributes(G)||-1!==E(d,K.id)&&G!==K.id})}for(var T in t.links)if(t.links.hasOwnProperty(T))if(r.type.is_variable(t.links[T])&&T===t.links[T].id){var F=t.attrs[T];for(var j in F)!F.hasOwnProperty(j)||(c++,""!==f&&(f+=", "),f+="put_attr("+T+", "+j+", "+F[j].toString(s)+")")}else c++,""!==f&&(f+=", "),f+=T.toString(s)+" = "+t.links[T].toString(s,{priority:"700",class:"xfx",indicator:"=/2"},"right");return 0===c?"true":f},flatten_error:function(t){if(!r.type.is_error(t))return null;var a={};return a.type=(t=t.args[0]).args[0].id,a.thrown="syntax_error"===a.type?null:t.args[1].id,a.expected=null,a.found=null,a.representation=null,a.existence=null,a.existence_type=null,a.line=null,a.column=null,a.permission_operation=null,a.permission_type=null,a.evaluation_type=null,"type_error"===a.type||"domain_error"===a.type?(a.expected=t.args[0].args[0].id,a.found=t.args[0].args[1].toString()):"syntax_error"===a.type?"./2"===t.args[1].indicator?(a.expected=t.args[0].args[0].id,a.found=t.args[1].args[1].args[1].args[0],a.found="token_not_found"===a.found.id?a.found.id:a.found.args[0].id,a.line=t.args[1].args[0].args[0].value,a.column=t.args[1].args[1].args[0].args[0].value):a.thrown=t.args[1].id:"permission_error"===a.type?(a.found=t.args[0].args[2].toString(),a.permission_operation=t.args[0].args[0].id,a.permission_type=t.args[0].args[1].id):"evaluation_error"===a.type?a.evaluation_type=t.args[0].args[0].id:"representation_error"===a.type?a.representation=t.args[0].args[0].id:"existence_error"===a.type&&(a.existence=t.args[0].args[1].toString(),a.existence_type=t.args[0].args[0].id),a},create:function(t){return new r.type.Session(t)}};r.builtin=new Ze("system",{"goal_expansion/2":[new he(new u("goal_expansion",[new u(",",[new P("X"),new P("Y")]),new u(",",[new P("X_"),new P("Y_")])]),new u(";",[new u(",",[new u("goal_expansion",[new P("X"),new P("X_")]),new u(";",[new u("goal_expansion",[new P("Y"),new P("Y_")]),new u("=",[new P("Y_"),new P("Y")])])]),new u(",",[new u("=",[new P("X"),new P("X_")]),new u("goal_expansion",[new P("Y"),new P("Y_")])])])),new he(new u("goal_expansion",[new u(";",[new P("X"),new P("Y")]),new u(";",[new P("X_"),new P("Y_")])]),new u(";",[new u(",",[new u("goal_expansion",[new P("X"),new P("X_")]),new u(";",[new u("goal_expansion",[new P("Y"),new P("Y_")]),new u("=",[new P("Y_"),new P("Y")])])]),new u(",",[new u("=",[new P("X"),new P("X_")]),new u("goal_expansion",[new P("Y"),new P("Y_")])])])),new he(new u("goal_expansion",[new u("->",[new P("X"),new P("Y")]),new u("->",[new P("X_"),new P("Y_")])]),new u(";",[new u(",",[new u("goal_expansion",[new P("X"),new P("X_")]),new u(";",[new u("goal_expansion",[new P("Y"),new P("Y_")]),new u("=",[new P("Y_"),new P("Y")])])]),new u(",",[new u("=",[new P("X"),new P("X_")]),new u("goal_expansion",[new P("Y"),new P("Y_")])])])),new he(new u("goal_expansion",[new u("catch",[new P("X"),new P("Y"),new P("Z")]),new u("catch",[new P("X_"),new P("Y"),new P("Z_")])]),new u(";",[new u(",",[new u("goal_expansion",[new P("X"),new P("X_")]),new u(";",[new u("goal_expansion",[new P("Z"),new P("Z_")]),new u("=",[new P("Z_"),new P("Z")])])]),new u(",",[new u("=",[new P("X_"),new P("X")]),new u("goal_expansion",[new P("Z"),new P("Z_")])])])),new he(new u("goal_expansion",[new u("\\+",[new P("X")]),new u("\\+",[new P("X_")])]),new u(",",[new u("nonvar",[new P("X")]),new u("goal_expansion",[new P("X"),new P("X_")])])),new he(new u("goal_expansion",[new u("once",[new P("X")]),new u("once",[new P("X_")])]),new u(",",[new u("nonvar",[new P("X")]),new u("goal_expansion",[new P("X"),new P("X_")])])),new he(new u("goal_expansion",[new u("findall",[new P("X"),new P("Y"),new P("Z")]),new u("findall",[new P("X"),new P("Y_"),new P("Z")])]),new u("goal_expansion",[new P("Y"),new P("Y_")])),new he(new u("goal_expansion",[new u("setof",[new P("X"),new P("Y"),new P("Z")]),new u("findall",[new P("X"),new P("Y_"),new P("Z")])]),new u("goal_expansion",[new P("Y"),new P("Y_")])),new he(new u("goal_expansion",[new u("bagof",[new P("X"),new P("Y"),new P("Z")]),new u("findall",[new P("X"),new P("Y_"),new P("Z")])]),new u("goal_expansion",[new P("Y"),new P("Y_")])),new he(new u("goal_expansion",[new u("call",[new P("X")]),new u("call",[new P("X_")])]),new u(",",[new u("nonvar",[new P("X")]),new u("goal_expansion",[new P("X"),new P("X_")])])),new he(new u("goal_expansion",[new u("call",[new P("X"),new P("A1")]),new u("call",[new P("F_")])]),new u(",",[new u("=..",[new P("F"),new u(".",[new P("X"),new u(".",[new P("A1"),new u("[]",[])])])]),new u("goal_expansion",[new P("F"),new P("F_")])])),new he(new u("goal_expansion",[new u("call",[new P("X"),new P("A1"),new P("A2")]),new u("call",[new P("F_")])]),new u(",",[new u("=..",[new P("F"),new u(".",[new P("X"),new u(".",[new P("A1"),new u(".",[new P("A2"),new u("[]",[])])])])]),new u("goal_expansion",[new P("F"),new P("F_")])])),new he(new u("goal_expansion",[new u("call",[new P("X"),new P("A1"),new P("A2"),new P("A3")]),new u("call",[new P("F_")])]),new u(",",[new u("=..",[new P("F"),new u(".",[new P("X"),new u(".",[new P("A1"),new u(".",[new P("A2"),new u(".",[new P("A3"),new u("[]",[])])])])])]),new u("goal_expansion",[new P("F"),new P("F_")])])),new he(new u("goal_expansion",[new u("call",[new P("X"),new P("A1"),new P("A2"),new P("A3"),new P("A4")]),new u("call",[new P("F_")])]),new u(",",[new u("=..",[new P("F"),new u(".",[new P("X"),new u(".",[new P("A1"),new u(".",[new P("A2"),new u(".",[new P("A3"),new u(".",[new P("A4"),new u("[]",[])])])])])])]),new u("goal_expansion",[new P("F"),new P("F_")])])),new he(new u("goal_expansion",[new u("call",[new P("X"),new P("A1"),new P("A2"),new P("A3"),new P("A4"),new P("A5")]),new u("call",[new P("F_")])]),new u(",",[new u("=..",[new P("F"),new u(".",[new P("X"),new u(".",[new P("A1"),new u(".",[new P("A2"),new u(".",[new P("A3"),new u(".",[new P("A4"),new u(".",[new P("A5"),new u("[]",[])])])])])])])]),new u("goal_expansion",[new P("F"),new P("F_")])])),new he(new u("goal_expansion",[new u("call",[new P("X"),new P("A1"),new P("A2"),new P("A3"),new P("A4"),new P("A5"),new P("A6")]),new u("call",[new P("F_")])]),new u(",",[new u("=..",[new P("F"),new u(".",[new P("X"),new u(".",[new P("A1"),new u(".",[new P("A2"),new u(".",[new P("A3"),new u(".",[new P("A4"),new u(".",[new P("A5"),new u(".",[new P("A6"),new u("[]",[])])])])])])])])]),new u("goal_expansion",[new P("F"),new P("F_")])])),new he(new u("goal_expansion",[new u("call",[new P("X"),new P("A1"),new P("A2"),new P("A3"),new P("A4"),new P("A5"),new P("A6"),new P("A7")]),new u("call",[new P("F_")])]),new u(",",[new u("=..",[new P("F"),new u(".",[new P("X"),new u(".",[new P("A1"),new u(".",[new P("A2"),new u(".",[new P("A3"),new u(".",[new P("A4"),new u(".",[new P("A5"),new u(".",[new P("A6"),new u(".",[new P("A7"),new u("[]",[])])])])])])])])])]),new u("goal_expansion",[new P("F"),new P("F_")])]))],"$push_global_stack/2":function(t,a,n){var s=n.args[0],c=n.args[1];r.type.is_variable(s)?(t.push_global_stack(s.id,c),t.success(a)):t.throw_error(r.error.instantiation(n.indicator))},"$flush_global_stack/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_variable(s)){var d=t.flush_global_stack(s.id,f);t.prepend([new Q(a.goal.replace(new u("=",[c,d])),a.substitution,a)])}else t.throw_error(r.error.instantiation(n.indicator))},"$free_variable_set/3":function(t,a,n){for(var c=n.args[1],f=n.args[2],d=[],T=n.args[0];r.type.is_term(T)&&"^/2"===T.indicator;)d=d.concat(T.args[0].variables()),T=T.args[1];var O=T.variables(),F=Be(V(function Rt(t,a){for(var n=[],s=0;s<t.length;s++)-1===E(n,t[s])&&-1===E(a,t[s])&&n.push(t[s]);return n}(O,d),function(j){return new P(j)}));t.prepend([new Q(a.goal.replace(new u(",",[new u("=",[c,T]),new u("=",[f,F])])),a.substitution,a)])},"$member/2":[new r.type.Rule(new r.type.Term("$member",[new r.type.Var("X"),new r.type.Term(".",[new r.type.Var("X"),new r.type.Var("_")])]),null),new r.type.Rule(new r.type.Term("$member",[new r.type.Var("X"),new r.type.Term(".",[new r.type.Var("_"),new r.type.Var("Xs")])]),new r.type.Term("$member",[new r.type.Var("X"),new r.type.Var("Xs")]))],"$bind_bagof_keys/2":[new r.type.Rule(new r.type.Term("$bind_bagof_keys",[new r.type.Term("[]",[]),new r.type.Var("_")]),null),new r.type.Rule(new r.type.Term("$bind_bagof_keys",[new r.type.Term(".",[new r.type.Term("-",[new r.type.Var("Key"),new r.type.Var("_")]),new r.type.Var("Bag")]),new r.type.Var("Vars")]),new r.type.Term(",",[new r.type.Term("term_variables",[new r.type.Var("Key"),new r.type.Var("Vars"),new r.type.Var("_")]),new r.type.Term("$bind_bagof_keys",[new r.type.Var("Bag"),new r.type.Var("Vars")])]))],"$findall/4":[new r.type.Rule(new r.type.Term("$findall",[new r.type.Var("Template0"),new r.type.Var("Goal0"),new r.type.Var("Instances"),new r.type.Var("Tail")]),new r.type.Term(";",[new r.type.Term(",",[new r.type.Term("copy_term",[new r.type.Term("-",[new r.type.Var("Template0"),new r.type.Var("Goal0")]),new r.type.Term("-",[new r.type.Var("Template1"),new r.type.Var("Goal1")])]),new r.type.Term(",",[new r.type.Term("call",[new r.type.Var("Goal1")]),new r.type.Term(",",[new r.type.Term("copy_term",[new r.type.Var("Template1"),new r.type.Var("Template2")]),new r.type.Term(",",[new r.type.Term("$push_global_stack",[new r.type.Var("Var"),new r.type.Var("Template2")]),new r.type.Term("false",[])])])])]),new r.type.Term("$flush_global_stack",[new r.type.Var("Var"),new r.type.Var("Instances"),new r.type.Var("Tail")])]))],"$bagof/3":[new r.type.Rule(new r.type.Term("$bagof",[new r.type.Var("Template"),new r.type.Var("Goal0"),new r.type.Var("Answer")]),new r.type.Term(",",[new r.type.Term("$free_variable_set",[new r.type.Term("^",[new r.type.Var("Template"),new r.type.Var("Goal0")]),new r.type.Var("Goal1"),new r.type.Var("FV")]),new r.type.Term(",",[new r.type.Term("findall",[new r.type.Term("-",[new r.type.Var("FV"),new r.type.Var("Template")]),new r.type.Var("Goal1"),new r.type.Var("Answers"),new r.type.Term("[]",[])]),new r.type.Term(",",[new r.type.Term("$bind_bagof_keys",[new r.type.Var("Answers"),new r.type.Var("_")]),new r.type.Term(",",[new r.type.Term("keygroup",[new r.type.Var("Answers"),new r.type.Var("KeyGroups")]),new r.type.Term(",",[new r.type.Term("keysort",[new r.type.Var("KeyGroups"),new r.type.Var("KeySorted")]),new r.type.Term("$member",[new r.type.Term("-",[new r.type.Var("FV"),new r.type.Var("Answer")]),new r.type.Var("KeySorted")])])])])])]))],"$setof/3":[new r.type.Rule(new r.type.Term("$setof",[new r.type.Var("Template"),new r.type.Var("Goal0"),new r.type.Var("Answer")]),new r.type.Term(",",[new r.type.Term("$free_variable_set",[new r.type.Term("^",[new r.type.Var("Template"),new r.type.Var("Goal0")]),new r.type.Var("Goal1"),new r.type.Var("FV")]),new r.type.Term(",",[new r.type.Term("findall",[new r.type.Term("-",[new r.type.Var("FV"),new r.type.Var("Template")]),new r.type.Var("Goal1"),new r.type.Var("Answers"),new r.type.Term("[]",[])]),new r.type.Term(",",[new r.type.Term("$bind_bagof_keys",[new r.type.Var("Answers"),new r.type.Var("_")]),new r.type.Term(",",[new r.type.Term("keygroup",[new r.type.Var("Answers"),new r.type.Var("KeyGroups")]),new r.type.Term(",",[new r.type.Term("keysort",[new r.type.Var("KeyGroups"),new r.type.Var("KeySorted")]),new r.type.Term(",",[new r.type.Term("$member",[new r.type.Term("-",[new r.type.Var("FV"),new r.type.Var("Unsorted")]),new r.type.Var("KeySorted")]),new r.type.Term("sort",[new r.type.Var("Unsorted"),new r.type.Var("Answer")])])])])])])]))],"$if/3":[new r.type.Rule(new r.type.Term("$if",[new r.type.Var("If"),new r.type.Var("Then"),new r.type.Var("Else")]),new r.type.Term(";",[new r.type.Term(",",[new r.type.Term("call",[new r.type.Var("If")]),new r.type.Term(",",[new r.type.Term("$push_global_stack",[new r.type.Var("Stack"),new r.type.Var("_")]),new r.type.Term("call",[new r.type.Var("Then")])])]),new r.type.Term(",",[new r.type.Term("$flush_global_stack",[new r.type.Var("Stack"),new r.type.Term("[]",[]),new r.type.Term("[]",[])]),new r.type.Term("call",[new r.type.Var("Else")])])]))],"put_attr/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_variable(s))if(r.type.is_atom(c)){var d=a.substitution.set_attribute(s.id,c,f);t.prepend([new Q(a.goal.replace(null),d,a)])}else t.throw_error(r.error.type("atom",c,n.indicator));else t.throw_error(r.error.type("variable",s,n.indicator))},"get_attr/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_variable(s))if(r.type.is_atom(c)){var d=a.substitution.get_attribute(s.id,c);d&&t.prepend([new Q(a.goal.replace(new u("=",[f,d])),a.substitution,a)])}else t.throw_error(r.error.type("atom",c,n.indicator));else t.throw_error(r.error.type("variable",s,n.indicator))},"op/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_atom(f)&&(f=new u(".",[f,new u("[]")])),r.type.is_variable(s)||r.type.is_variable(c)||r.type.is_variable(f))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_integer(s))if(r.type.is_atom(c))if(r.type.is_list(f))if(r.type.is_empty_list(f))t.throw_error(r.error.permission("create","operator",f,n.indicator));else{for(var d=f;r.type.is_term(d)&&"./2"===d.indicator;){var T=d.args[0];if(d=d.args[1],r.type.is_variable(T))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_atom(T))return void t.throw_error(r.error.type("atom",T,n.indicator));if(s.value<0||s.value>1200)return void t.throw_error(r.error.domain("operator_priority",s,n.indicator));if(","===T.id)return void t.throw_error(r.error.permission("modify","operator",T,n.indicator));if("{}"===T.id)return void t.throw_error(r.error.permission("create","operator",T,n.indicator));if("[]"===T.id)return void t.throw_error(r.error.permission("create","operator",T,n.indicator));if("|"===T.id&&0!==s.value&&(s.value<1001||3!==c.id.length))return void t.throw_error(r.error.permission("create","operator",T,n.indicator));if(-1===["fy","fx","yf","xf","xfx","yfx","xfy"].indexOf(c.id))return void t.throw_error(r.error.domain("operator_specifier",c,n.indicator));var G,O={prefix:null,infix:null,postfix:null};for(var F in t.session.__operators)if(t.session.__operators.hasOwnProperty(F)){var j=t.session.__operators[F][T.id];j&&(-1!==E(j,"fx")&&(O.prefix={priority:F,type:"fx"}),-1!==E(j,"fy")&&(O.prefix={priority:F,type:"fy"}),-1!==E(j,"xf")&&(O.postfix={priority:F,type:"xf"}),-1!==E(j,"yf")&&(O.postfix={priority:F,type:"yf"}),-1!==E(j,"xfx")&&(O.infix={priority:F,type:"xfx"}),-1!==E(j,"xfy")&&(O.infix={priority:F,type:"xfy"}),-1!==E(j,"yfx")&&(O.infix={priority:F,type:"yfx"}))}switch(c.id){case"fy":case"fx":G="prefix";break;case"yf":case"xf":G="postfix";break;default:G="infix"}if(O.infix&&"postfix"===G||O.postfix&&"infix"===G)return void t.throw_error(r.error.permission("create","operator",T,n.indicator));O[G]&&(qt(t.session.__operators[O[G].priority][T.id],O[G].type),0===t.session.__operators[O[G].priority][T.id].length&&delete t.session.__operators[O[G].priority][T.id]),s.value>0&&(t.session.__operators[s.value]||(t.session.__operators[s.value.toString()]={}),t.session.__operators[s.value][T.id]||(t.session.__operators[s.value][T.id]=[]),t.session.__operators[s.value][T.id].push(c.id))}if(r.type.is_variable(d))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_term(d)||"[]/0"!==d.indicator)return void t.throw_error(r.error.type("list",f,n.indicator));t.success(a)}else t.throw_error(r.error.type("list",f,n.indicator));else t.throw_error(r.error.type("atom",c,n.indicator));else t.throw_error(r.error.type("integer",s,n.indicator))},"current_op/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2],d=[];if(r.type.is_variable(s)||r.type.is_integer(s))if(r.type.is_integer(s)&&(s.value<0||s.value>1200))t.throw_error(r.error.domain("operator_priority",s,n.indicator));else if(r.type.is_variable(c)||r.type.is_atom(c))if(r.type.is_atom(c)&&-1===E(["fy","fx","yf","xf","xfx","yfx","xfy"],c.id))t.throw_error(r.error.domain("operator_specifier",c,n.indicator));else if(r.type.is_variable(f)||r.type.is_atom(f)){for(var T in t.session.__operators)for(var O in t.session.__operators[T])for(var F=0;F<t.session.__operators[T][O].length;F++)d.push(new Q(a.goal.replace(new u(",",[new u("=",[new ne(T,!1),s]),new u(",",[new u("=",[new u(t.session.__operators[T][O][F],[]),c]),new u("=",[new u(O,[]),f])])])),a.substitution,a));t.prepend(d)}else t.throw_error(r.error.type("atom",f,n.indicator));else t.throw_error(r.error.type("atom",c,n.indicator));else t.throw_error(r.error.type("integer",s,n.indicator))},";/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=s.args[0],d=":/2"===s.indicator?s.args[1]:s;if(r.type.is_term(d)&&"->/2"===d.indicator){var T=":/2"===s.indicator?new u(":",[f,new u("call",[d.args[0]])]):d.args[0],O=":/2"===s.indicator?new u(":",[f,d.args[1]]):d.args[1],F=c,j=a.goal.replace(new u(",",[T,new u(",",[new u("!"),O])])),G=a.goal.replace(new u(",",[new u("!"),F]));t.prepend([new Q(j,a.substitution,a),new Q(G,a.substitution,a)])}else r.type.is_term(d)&&"*->/2"===d.indicator?(T=":/2"===s.indicator?new u(":",[f,d.args[0]]):d.args[0],O=":/2"===s.indicator?new u(":",[f,d.args[1]]):d.args[1],t.prepend([new Q(a.goal.replace(new u("$if",[T,O,F=c])),a.substitution,a)])):t.prepend([new Q(a.goal.replace(s),a.substitution,a),new Q(a.goal.replace(c),a.substitution,a)])},"!/0":function(t,a,n){var s,c,f=[];for(s=a,c=null;null!==s.parent&&s.parent.goal.search(n);)if(c=s,null!==(s=s.parent).goal){var d=s.goal.select();if(d&&":/2"===d.indicator&&(d=d.args[1]),d&&"call"===d.id&&d.search(n)){s=c;break}}for(var T=null,O=t.points.length-1;O>=0;O--){for(var F=t.points[O],j=F.parent;null!==j&&j!==s.parent;)j=j.parent;null===j&&j!==s.parent?f.push(F):F.setup_call_cleanup_goal&&(T=F.setup_call_cleanup_goal)}t.points=f.reverse(),t.prepend([new Q(a.goal.replace(T),a.substitution,a)])},"\\+/1":function(t,a,n){var s=n.args[0];r.type.is_variable(s)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_callable(s)?t.prepend([new Q(a.goal.replace(new u(",",[new u(",",[new u("call",[s]),new u("!",[])]),new u("fail",[])])),a.substitution,a),new Q(a.goal.replace(null),a.substitution,a)]):t.throw_error(r.error.type("callable",s,n.indicator))},"->/2":function(t,a,n){var c=n.args[1],f=a.goal.replace(new u(",",[new u("call",[n.args[0]]),new u(",",[new u("!"),c])]));t.prepend([new Q(f,a.substitution,a)])},"*->/2":function(t,a,n){var c=n.args[1],f=a.goal.replace(new u(",",[new u("call",[n.args[0]]),c]));t.prepend([new Q(f,a.substitution,a)])},"fail/0":function(t,a,n){},"false/0":function(t,a,n){},"true/0":function(t,a,n){t.success(a)},"call/1":Tt(1),"call/2":Tt(2),"call/3":Tt(3),"call/4":Tt(4),"call/5":Tt(5),"call/6":Tt(6),"call/7":Tt(7),"call/8":Tt(8),"once/1":function(t,a,n){t.prepend([new Q(a.goal.replace(new u(",",[new u("call",[n.args[0]]),new u("!",[])])),a.substitution,a)])},"forall/2":function(t,a,n){var c=n.args[1];t.prepend([new Q(a.goal.replace(new u("\\+",[new u(",",[new u("call",[n.args[0]]),new u("\\+",[new u("call",[c])])])])),a.substitution,a)])},"repeat/0":function(t,a,n){t.prepend([new Q(a.goal.replace(null),a.substitution,a),a])},"throw/1":function(t,a,n){var s=n.args[0];if(r.type.is_variable(s))t.throw_error(r.error.instantiation(t.level.indicator));else{for(var c=0;c<t.points.length;c++){var f=t.points[c];if(f.setup_call_cleanup_catch)return void(t.points=[new Q(new u(",",[new u("catch",[f.setup_call_cleanup_catch,new P("_"),new u("throw",[s])]),new u("throw",[s])]),a.substitution,a)])}t.throw_error(s)}},"catch/3":function(t,a,n){var d,s=n.args[0],c=n.args[1],f=n.args[2];return a.catch?d=a.catch:((d=new ge(t.session)).debugger=t.debugger,d.format_success=function(O){return O.substitution},d.format_error=function(O){return O.goal},d.add_goal(s,!0,a),a.catch=d),d.answer(function(O){if(r.type.is_error(O)){var F="true/0"===t.get_flag("occurs_check").indicator,j=new Q,G=r.unify(O.args[0],c,F);null!==G?(j.substitution=a.substitution.apply(G),j.goal=a.goal.replace(f).apply(G),j.parent=a,t.prepend([j])):t.throw_error(O.args[0])}else!1!==O&&null!==O?(j=null===O?[]:new Q(a.goal.apply(O).replace(null),a.substitution.apply(O),a),t.prepend([j,a])):null===O&&(t.prepend([a]),t.has_limit&&(t.current_limit=0));t.again(null!==O)}),!0},"call_cleanup/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s)||r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_callable(s)){if(r.type.is_callable(c)){var f,d;if(a.hasOwnProperty("setup_call_cleanup_thread"))f=a.setup_call_cleanup_thread,d=a.setup_call_cleanup_callback;else{var T=new u("call",[s]);(f=new ge(t.session)).add_goal(T,!0,a),d=function(O){if(null===O)(F=new Q(a.goal,a.substitution,a)).setup_call_cleanup_thread=f,F.setup_call_cleanup_callback=d,t.prepend([F]);else if(!1===O){var j=new u(",",[new u("call",[c]),new u("fail")]),F=new Q(a.goal.replace(j),a.substitution,a);t.prepend([F])}else if(r.type.is_error(O)){var G=new u(",",[new u("call",[c]),O]);F=new Q(a.goal.replace(G),a.substitution,a),t.prepend([F])}else if(0===f.points.length)F=new Q(a.goal.replace(new u("call",[c])).apply(O),a.substitution.apply(O),a),t.prepend([F]);else{var K=new Q(a.goal.apply(O).replace(null),a.substitution.apply(O),a),fe=new Q(a.goal,a.substitution,a);fe.setup_call_cleanup_thread=f,fe.setup_call_cleanup_callback=d,fe.setup_call_cleanup_goal=c.apply(O),fe.setup_call_cleanup_catch=c,t.prepend([K,fe])}t.again()}}return f.answer(d),!0}t.throw_error(r.error.type("callable",c,n.indicator))}else t.throw_error(r.error.type("callable",s,n.indicator))},"setup_call_cleanup/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];r.type.is_variable(s)||r.type.is_variable(c)||r.type.is_variable(f)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_callable(s)?r.type.is_callable(c)?r.type.is_callable(f)?t.prepend([new Q(a.goal.replace(new u(",",[new u("once",[s]),new u("call_cleanup",[c,f])])),a.substitution,a)]):t.throw_error(r.error.type("callable",f,n.indicator)):t.throw_error(r.error.type("callable",c,n.indicator)):t.throw_error(r.error.type("callable",s,n.indicator))},"=/2":function(t,a,n){var s="true/0"===t.get_flag("occurs_check").indicator,c=new Q,f=r.unify(n.args[0],n.args[1],s);null!==f&&(c.goal=a.goal.apply(f).replace(null),c.substitution=a.substitution.apply(f),c.parent=a,t.prepend([c]))},"unify_with_occurs_check/2":function(t,a,n){var s=new Q,c=r.unify(n.args[0],n.args[1],!0);null!==c&&(s.goal=a.goal.apply(c).replace(null),s.substitution=a.substitution.apply(c),s.parent=a,t.prepend([s]))},"\\=/2":function(t,a,n){var s="true/0"===t.get_flag("occurs_check").indicator;null===r.unify(n.args[0],n.args[1],s)&&t.success(a)},"subsumes_term/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=t.next_free_variable(),d=t.next_free_variable();t.prepend([new Q(a.goal.replace(new u("\\+",[new u("\\+",[new u(",",[new u("term_variables",[c,f]),new u(",",[new u("unify_with_occurs_check",[s,c]),new u(",",[new u("term_variables",[f,d]),new u("==",[f,d])])])])])])),a.substitution,a)])},"findall/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2],d=new u("[]",[]);t.prepend([new Q(a.goal.replace(new u("findall",[s,c,f,d])),a.substitution,a)])},"findall/4":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2],d=n.args[3],T=c;r.type.is_term(c)&&":/2"===c.indicator&&(T=c.args[1]),r.type.is_variable(T)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_callable(T)?r.type.is_variable(f)||r.type.is_list(f)?r.type.is_variable(d)||r.type.is_list(d)?t.prepend([new Q(a.goal.replace(new u("$findall",[s,c,f,d])),a.substitution,a)]):t.throw_error(r.error.type("list",d,n.indicator)):t.throw_error(r.error.type("list",f,n.indicator)):t.throw_error(r.error.type("callable",c,n.indicator))},"bagof/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];r.type.is_variable(c)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_callable(c)?r.type.is_variable(f)||r.type.is_list(f)?t.prepend([new Q(a.goal.replace(new u("$bagof",[s,c,f])),a.substitution,a)]):t.throw_error(r.error.type("list",f,n.indicator)):t.throw_error(r.error.type("callable",c,n.indicator))},"setof/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];r.type.is_variable(c)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_callable(c)?r.type.is_variable(f)||r.type.is_list(f)?t.prepend([new Q(a.goal.replace(new u("$setof",[s,c,f])),a.substitution,a)]):t.throw_error(r.error.type("list",f,n.indicator)):t.throw_error(r.error.type("callable",c,n.indicator))},"functor/3":function(t,a,n){var c=n.args[0],f=n.args[1],d=n.args[2];if(r.type.is_variable(c)&&(r.type.is_variable(f)||r.type.is_variable(d)))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(d)||r.type.is_integer(d))if(r.type.is_variable(f)||r.type.is_atomic(f))if(r.type.is_variable(c)&&!r.type.is_atom(f)&&r.type.is_integer(d)&&d.value>0)t.throw_error(r.error.type("atom",n.args[1],n.indicator));else if(r.type.is_variable(c)&&r.type.is_integer(d)&&d.value<0)t.throw_error(r.error.domain("not_less_than_zero",n.args[2],n.indicator));else if(r.type.is_variable(c)){if(n.args[2].value>=0){for(var T=[],O=0;O<d.value;O++)T.push(t.next_free_variable());var F=r.type.is_number(f)?f:new u(f.id,T);t.prepend([new Q(a.goal.replace(new u("=",[c,F])),a.substitution,a)])}}else{var j=r.type.is_number(c)?c:new u(c.id,[]),G=r.type.is_number(c)?new ne(0,!1):new ne(c.args.length,!1),K=new u(",",[new u("=",[j,f]),new u("=",[G,d])]);t.prepend([new Q(a.goal.replace(K),a.substitution,a)])}else t.throw_error(r.error.type("atomic",n.args[1],n.indicator));else t.throw_error(r.error.type("integer",n.args[2],n.indicator))},"arg/3":function(t,a,n){if(r.type.is_variable(n.args[0])||r.type.is_variable(n.args[1]))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_integer(n.args[0]))if(n.args[0].value<0)t.throw_error(r.error.domain("not_less_than_zero",n.args[0],n.indicator));else if(r.type.is_compound(n.args[1])){var s=n.args[0].value;if(s>0&&s<=n.args[1].args.length){var c=new u("=",[n.args[1].args[s-1],n.args[2]]);t.prepend([new Q(a.goal.replace(c),a.substitution,a)])}}else t.throw_error(r.error.type("compound",n.args[1],n.indicator));else t.throw_error(r.error.type("integer",n.args[0],n.indicator))},"=../2":function(t,a,n){var s;if(r.type.is_variable(n.args[0])&&(r.type.is_variable(n.args[1])||r.type.is_non_empty_list(n.args[1])&&r.type.is_variable(n.args[1].args[0])))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_fully_list(n.args[1]))if(r.type.is_variable(n.args[0])&&r.type.is_empty_list(n.args[1]))t.throw_error(r.error.domain("non_empty_list",n.args[1],n.indicator));else if(r.type.is_variable(n.args[0])){if(!r.type.is_variable(n.args[1])){var f=[];for(s=n.args[1].args[1];"./2"===s.indicator;)f.push(s.args[0]),s=s.args[1];r.type.is_variable(n.args[0])&&r.type.is_variable(s)?t.throw_error(r.error.instantiation(n.indicator)):0===f.length&&r.type.is_compound(n.args[1].args[0])?t.throw_error(r.error.type("atomic",n.args[1].args[0],n.indicator)):f.length>0&&(r.type.is_compound(n.args[1].args[0])||r.type.is_number(n.args[1].args[0]))?t.throw_error(r.error.type("atom",n.args[1].args[0],n.indicator)):t.prepend(0===f.length?[new Q(a.goal.replace(new u("=",[n.args[1].args[0],n.args[0]],a)),a.substitution,a)]:[new Q(a.goal.replace(new u("=",[new u(n.args[1].args[0].id,f),n.args[0]])),a.substitution,a)])}}else{if(r.type.is_term(n.args[0])&&n.args[0].args.length>0){s=new u("[]");for(var c=n.args[0].args.length-1;c>=0;c--)s=new u(".",[n.args[0].args[c],s]);s=new u(".",[new u(n.args[0].id),s])}else s=new u(".",[n.args[0],new u("[]")]);t.prepend([new Q(a.goal.replace(new u("=",[s,n.args[1]])),a.substitution,a)])}else t.throw_error(r.error.type("list",n.args[1],n.indicator))},"copy_term/2":function(t,a,n){var s=n.args[0],c=n.args[1];t.session.renamed_variables={};var f=s.rename(t);t.session.renamed_variables={},t.prepend([new Q(a.goal.replace(new u("=",[c,f])),a.substitution,a)])},"term_variables/2":[new r.type.Rule(new r.type.Term("term_variables",[new r.type.Var("Term"),new r.type.Var("Vars")]),new r.type.Term("term_variables",[new r.type.Var("Term"),new r.type.Var("Vars"),new r.type.Term("[]",[])]))],"term_variables/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_fully_list(c)){var d=Be(V(It(s.variables()),function(T){return new P(T)}),f);t.prepend([new Q(a.goal.replace(new u("=",[c,d])),a.substitution,a)])}else t.throw_error(r.error.type("list",c,n.indicator))},"numbervars/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_integer(c))if(r.type.is_variable(f)||r.type.is_integer(f)){for(var d=It(s.variables()),T=c.value,O=new u("true"),F=0;F<d.length;F++)O=new u(",",[new u("=",[new P(d[F]),new u("$VAR",[new ne(T,!1)])]),O]),T++;var j=new u("=",[f,new ne(T,!1)]);(r.type.is_variable(f)||f.value===T)&&t.prepend([new Q(a.goal.replace(new u(",",[O,j])),a.substitution,a)])}else t.throw_error(r.error.type("integer",f,n.indicator));else t.throw_error(r.error.type("integer",c,n.indicator))},"clause/2":function(t,a,n){var s=n.args[0],c=n.args[1],f="user";if(r.type.is_term(s)&&":/2"===s.indicator){if(!r.type.is_atom(s.args[0]))return void t.throw_error(r.error.type("module",s.args[0],n.indicator));f=s.args[0].id,s=s.args[1]}var d=t.session.modules[f];if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_callable(s))if(r.type.is_variable(c)||r.type.is_callable(c)){if(",/2"===s.indicator||t.session.modules.system.rules.hasOwnProperty(s.indicator))t.throw_error(r.error.permission("access","private_procedure",Pe(s.indicator),n.indicator));else if(r.type.is_module(d)&&d.rules[s.indicator])if(d.is_public_predicate(s.indicator)){var T=[];if("function"==typeof d.rules[s.indicator])return void t.throw_error(r.error.permission("modify","static_procedure",Pe(s.indicator),n.indicator));for(var O=0;O<d.rules[s.indicator].length;O++){var F=d.rules[s.indicator][O];t.session.renamed_variables={},null===(F=F.rename(t)).body&&(F.body=new u("true"));var j=new u(",",[new u("=",[F.head,s]),new u("=",[F.body,c])]);T.push(new Q(a.goal.replace(j),a.substitution,a))}t.prepend(T)}else t.throw_error(r.error.permission("access","private_procedure",Pe(s.indicator),n.indicator))}else t.throw_error(r.error.type("callable",c,n.indicator));else t.throw_error(r.error.type("callable",s,n.indicator))},"current_predicate/1":function(t,a,n){var c,s=n.args[0];if(r.type.is_term(s)&&":/2"===s.indicator){if(!r.type.is_atom(s.args[0]))return void t.throw_error(r.error.type("module",s.args[0],n.indicator));c=s.args[0].id,s=s.args[1]}else c="user";if(r.type.is_variable(s)||r.type.is_compound(s)&&"//2"===s.indicator)if(r.type.is_variable(s)||r.type.is_variable(s.args[0])||r.type.is_atom(s.args[0]))if(r.type.is_variable(s)||r.type.is_variable(s.args[1])||r.type.is_integer(s.args[1]))if(!r.type.is_variable(s)&&r.type.is_integer(s.args[1])&&s.args[1].value<0)t.throw_error(r.error.domain("not_less_than_zero",s.args[1],n.indicator));else{var f=[],d=t.session.modules[c];if(r.type.is_module(d)){for(var T in d.rules)if(d.rules.hasOwnProperty(T)){var F=new u("=",[Pe(T),s]);f.push(new Q(a.goal.replace(F),a.substitution,a))}t.prepend(f)}}else t.throw_error(r.error.type("integer",s.args[1],n.indicator));else t.throw_error(r.error.type("atom",s.args[0],n.indicator));else t.throw_error(r.error.type("predicate_indicator",s,n.indicator))},"current_module/1":function(t,a,n){var s=n.args[0];if(r.type.is_variable(s)||r.type.is_atom(s))if(r.type.is_variable(s)){var c=[];for(var f in t.session.modules)!t.session.modules.hasOwnProperty(f)||c.push(new Q(a.goal.replace(new u("=",[s,new u(f)])),a.substitution,a));t.prepend(c)}else t.session.modules.hasOwnProperty(s.id)&&t.success(a);else t.throw_error(r.error.type("atom",s,n.indicator))},"predicate_property/2":function(t,a,n){var f,s=n.args[0],c=n.args[1];if(r.type.is_term(s)&&":/2"===s.indicator){if(!r.type.is_atom(s.args[0]))return void t.throw_error(r.error.type("module",s.args[0],n.indicator));f=s.args[0].id,s=s.args[1]}if(r.type.is_variable(s)||r.type.is_callable(s))if(r.type.is_variable(c)||r.type.is_predicate_property(c)){var d=f?t.session.modules[f]:t.session.modules.user,T=[];if(r.type.is_variable(s)){if(!f)for(var O in r.builtin.rules)if(r.builtin.rules.hasOwnProperty(O)){for(var F=Pe(O),j=[],G=0;G<F.args[1].value;G++)j.push(t.next_free_variable());var K=new u(F.args[0].id,j),fe=[new u("static"),new u("built_in"),new u("native_code")];for(r.builtin.meta_predicates.hasOwnProperty(O)&&fe.push(new u("meta_predicate",[r.builtin.meta_predicates[O]])),G=0;G<fe.length;G++)(r.type.is_variable(c)||fe[G].indicator===c.indicator)&&T.push(new Q(a.goal.replace(new u(",",[new u("=",[s,K]),new u("=",[c,fe[G]])])),a.substitution,a))}if(r.type.is_module(d))for(var O in d.rules)if(d.rules.hasOwnProperty(O)){for(F=Pe(O),j=[],G=0;G<F.args[1].value;G++)j.push(t.next_free_variable());for(K=new u(F.args[0].id,j),fe=[],t.is_public_predicate(O,f)?fe.push(new u("dynamic")):fe.push(new u("static")),d.rules[O]instanceof Function&&fe.push(new u("native_code")),t.is_multifile_predicate(O,f)&&fe.push(new u("multifile")),d.meta_predicates.hasOwnProperty(O)&&fe.push(new u("meta_predicate",[d.meta_predicates[O]])),G=0;G<fe.length;G++)(r.type.is_variable(c)||fe[G].indicator===c.indicator)&&T.push(new Q(a.goal.replace(new u(",",[new u("=",[s,K]),new u("=",[c,fe[G]])])),a.substitution,a))}}else{var se=!f&&r.type.is_builtin(s),Te=se?r.builtin.rules[s.indicator]:d.rules[s.indicator];if(d=se?r.builtin:d,Te){for(se?fe=[new u("static"),new u("built_in"),new u("native_code")]:(fe=[],t.is_public_predicate(s.indicator,f)?fe.push(new u("dynamic")):fe.push(new u("static")),Te instanceof Function&&fe.push(new u("native_code")),t.is_multifile_predicate(s.indicator,f)&&fe.push(new u("multifile"))),d.meta_predicates.hasOwnProperty(s.indicator)&&fe.push(new u("meta_predicate",[d.meta_predicates[s.indicator]])),j=[],G=0;G<s.args.length;G++)j.push(t.next_free_variable());for(K=new u(s.id,j),G=0;G<fe.length;G++)(r.type.is_variable(c)||fe[G].indicator===c.indicator)&&T.push(new Q(a.goal.replace(new u(",",[new u("=",[s,K]),new u("=",[c,fe[G]])])),a.substitution,a))}}t.prepend(T)}else t.throw_error(r.error.domain("predicate_property",c,n.indicator));else t.throw_error(r.error.type("callable",s,n.indicator))},"listing/0":function(t,a,n){var s=n.context_module?n.context_module:"user",c={};r.type.is_module(t.session.modules[s])&&(c=t.session.modules[s].rules);var f="";for(var d in c)if(c.hasOwnProperty(d)){var T=c[d];if(f+="% "+d+"\n",T instanceof Array)for(var O=0;O<T.length;O++)f+=T[O].toString({session:t.session})+"\n";else f+="/*\n"+T.toString()+"\n*/";f+="\n"}t.prepend([new Q(a.goal.replace(new u("write",[new u(f,[])])),a.substitution,a)])},"listing/1":function(t,a,n){var s=n.args[0],c="user";if(":/2"===s.indicator&&(c=s.args[0].id,s=s.args[1]),r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_predicate_indicator(s)){var f={};r.type.is_module(t.session.modules[c])&&(f=t.session.modules[c].rules);var d="",T=s.args[0].id+"/"+s.args[1].value;if(f.hasOwnProperty(T)){var O=f[T];if(O instanceof Array)for(var F=0;F<O.length;F++)d+=O[F].toString({session:t.session})+"\n";else d+="/*\n"+O.toString()+"\n*/";d+="\n"}t.prepend([new Q(a.goal.replace(new u("write",[new u(d,[])])),a.substitution,a)])}else t.throw_error(r.error.type("predicate_indicator",s,n.indicator))},"sort/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_fully_list(c)){for(var f=[],d=s;"./2"===d.indicator;)f.push(d.args[0]),d=d.args[1];if(r.type.is_variable(d))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_empty_list(d)){for(var T=f.sort(r.compare),O=T.length-1;O>0;O--)T[O].equals(T[O-1])&&T.splice(O,1);var F=new u("[]");for(O=T.length-1;O>=0;O--)F=new u(".",[T[O],F]);t.prepend([new Q(a.goal.replace(new u("=",[F,c])),a.substitution,a)])}else t.throw_error(r.error.type("list",s,n.indicator))}else t.throw_error(r.error.type("list",c,n.indicator))},"keysort/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_fully_list(c)){for(var d,f=[],T=s;"./2"===T.indicator;){if(r.type.is_variable(d=T.args[0]))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_term(d)||"-/2"!==d.indicator)return void t.throw_error(r.error.type("pair",d,n.indicator));d.args[0].pair=d.args[1],f.push(d.args[0]),T=T.args[1]}if(r.type.is_variable(T))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_empty_list(T)){if(!r.type.is_variable(c)){for(T=c;r.type.is_term(T)&&"./2"===T.indicator;){var O=T.args[0];if(!(r.type.is_variable(O)||r.type.is_term(O)&&"-/2"===O.indicator))return void t.throw_error(r.error.type("pair",O,n.indicator));T=T.args[1]}if(!r.type.is_variable(T)&&!r.type.is_empty_list(T))return void t.throw_error(r.error.type("list",c,n.indicator))}for(var F=f.sort(r.compare),j=new r.type.Term("[]"),G=F.length-1;G>=0;G--)j=new r.type.Term(".",[new r.type.Term("-",[F[G],F[G].pair]),j]),delete F[G].pair;t.prepend([new r.type.State(a.goal.replace(new r.type.Term("=",[j,c])),a.substitution,a)])}else t.throw_error(r.error.type("list",s,n.indicator))}else t.throw_error(r.error.type("list",c,n.indicator))},"keygroup/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_fully_list(c)){for(var f=[],d=[],T=s;r.type.is_term(T)&&"./2"===T.indicator;){var O=T.args[0];if(r.type.is_variable(O))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_term(O)||"-/2"!==O.indicator)return void t.throw_error(r.error.type("pair",O,n.indicator));for(var F=O.args[0],j=O.args[1],G=-1,K=0;K<f.length;K++)if(0===r.compare(F,f[K])){G=K;break}-1===G&&(G=f.length,f.push(F),d.push([])),d[G].push(j),T=T.args[1]}if(r.type.is_variable(T))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_empty_list(T)){if(!r.type.is_variable(c)){for(T=c;r.type.is_term(T)&&"./2"===T.indicator;){var fe=T.args[0];if(!(r.type.is_variable(fe)||r.type.is_term(fe)&&"-/2"===fe.indicator))return void t.throw_error(r.error.type("pair",fe,n.indicator));T=T.args[1]}if(!r.type.is_variable(T)&&!r.type.is_empty_list(T))return void t.throw_error(r.error.type("list",c,n.indicator))}for(group=new u("[]",[]),K=f.length-1;K>=0;K--)group=new u(".",[new u("-",[f[K],Be(d[K])]),group]);t.prepend([new Q(a.goal.replace(new r.type.Term("=",[c,group])),a.substitution,a)])}else t.throw_error(r.error.type("list",s,n.indicator))}else t.throw_error(r.error.type("list",c,n.indicator))},"asserta/1":function(t,a,n){var s=n.args[0],c="user";if(r.type.is_term(s)&&":/2"===s.indicator&&(c=s.args[0].id,s=s.args[1]),r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_callable(s)){var f,d,T;":-/2"===s.indicator?(f=s.args[0],d=at(s.args[1])):(f=s,d=null),r.type.is_variable(f)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_callable(f)?null===d||r.type.is_callable(d)?r.type.is_module(t.session.modules[c])&&!t.is_public_predicate(f.indicator,c)||",/2"===f.indicator||t.session.modules.system.rules.hasOwnProperty(f.indicator)?t.throw_error(r.error.permission("modify","static_procedure",Pe(f.indicator),n.indicator)):(r.type.is_module(t.session.modules[c])?T=t.session.modules[c]:(T=new Ze(c,{},"all",{session:t.session}),t.session.modules[c]=T),void 0===T.rules[f.indicator]&&(T.rules[f.indicator]=[]),T.public_predicates[f.indicator]=!0,T.rules[f.indicator]=[new he(f,d,!0)].concat(T.rules[f.indicator]),T.update_indices_predicate(f.indicator),t.success(a)):t.throw_error(r.error.type("callable",d,n.indicator)):t.throw_error(r.error.type("callable",f,n.indicator))}else t.throw_error(r.error.type("callable",s,n.indicator))},"assertz/1":function(t,a,n){var s=n.args[0],c="user";if(r.type.is_term(s)&&":/2"===s.indicator&&(c=s.args[0].id,s=s.args[1]),r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_callable(s)){var f,d,T;":-/2"===s.indicator?(f=s.args[0],d=at(s.args[1])):(f=s,d=null),r.type.is_variable(f)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_callable(f)?null===d||r.type.is_callable(d)?r.type.is_module(t.session.modules[c])&&!t.is_public_predicate(f.indicator,c)||",/2"===f.indicator||t.session.modules.system.rules.hasOwnProperty(f.indicator)?t.throw_error(r.error.permission("modify","static_procedure",Pe(f.indicator),n.indicator)):(r.type.is_module(t.session.modules[c])?T=t.session.modules[c]:(T=new Ze(c,{},"all",{session:t.session}),t.session.modules[c]=T),void 0===T.rules[f.indicator]&&(T.rules[f.indicator]=[]),T.public_predicates[f.indicator]=!0,T.rules[f.indicator].push(new he(f,d,!0)),T.update_indices_predicate(f.indicator),t.success(a)):t.throw_error(r.error.type("callable",d,n.indicator)):t.throw_error(r.error.type("callable",f,n.indicator))}else t.throw_error(r.error.type("callable",s,n.indicator))},"retract/1":function(t,a,n){var s=n.args[0];if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_callable(s)){var c,f,d,T;if(":/2"===s.indicator){if(d=s.args[0],s=s.args[1],!r.type.is_atom(d))return void t.throw_error(r.error.type("module",d,n.indicator))}else d=new u("user");if(":-/2"===s.indicator?(c=s.args[0],f=s.args[1]):(c=s,f=new u("true")),r.type.is_variable(c))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_callable(c))return void t.throw_error(r.error.type("callable",c,n.indicator));var O=t.session.modules[T=d.id];if(!r.type.is_module(O))return;if(a.retract)!function mr(t,a,n,s,c){if(c.rules[n])for(var f=0;f<c.rules[n].length;f++)if(c.rules[n][f]===s){c.rules[n].splice(f,1),c.update_indices_predicate(n),t.success(a);break}}(t,a,c.indicator,a.retract,O);else if(t.is_public_predicate(c.indicator,T)&&",/2"!==c.indicator&&!t.session.modules.system.rules.hasOwnProperty(c.indicator)){if(void 0!==O.rules[c.indicator]){var F=[];if("function"==typeof O.rules[c.indicator])return void t.throw_error(r.error.permission("modify","static_procedure",Pe(c.indicator),n.indicator));for(var j=0;j<O.rules[c.indicator].length;j++){t.session.renamed_variables={};var G=O.rules[c.indicator][j],K=G.rename(t);null===K.body&&(K.body=new u("true",[]));var fe="true/0"===t.get_flag("occurs_check").indicator;if(null!==r.unify(new u(",",[c,f]),new u(",",[K.head,K.body]),fe)){var Te=new Q(a.goal.replace(new u(",",[new u(":",[d,new u("retract",[new u(":-",[c,f])])]),new u(",",[new u("=",[c,K.head]),new u("=",[f,K.body])])])),a.substitution,a);Te.retract=G,F.push(Te)}}t.prepend(F)}}else t.throw_error(r.error.permission("modify","static_procedure",Pe(c.indicator),n.indicator))}else t.throw_error(r.error.type("callable",s,n.indicator))},"retractall/1":function(t,a,n){var s=n.args[0],c="user";r.type.is_term(s)&&":/2"===s.indicator&&(c=s.args[0].id,s=s.args[1]),r.type.is_variable(s)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_callable(s)?!t.is_public_predicate(s.indicator,c)||",/2"===s.indicator||t.session.modules.system.rules.hasOwnProperty(s.indicator)?t.throw_error(r.error.permission("modify","static_procedure",Pe(s.indicator),n.indicator)):t.prepend([new Q(a.goal.replace(new u(",",[new u(":",[new u(c),new u("retract",[new r.type.Term(":-",[s,new P("_")])])]),new u("fail",[])])),a.substitution,a),new Q(a.goal.replace(null),a.substitution,a)]):t.throw_error(r.error.type("callable",s,n.indicator))},"abolish/1":function(t,a,n){var c,s=n.args[0];if(r.type.is_term(s)&&":/2"===s.indicator){if(!r.type.is_atom(s.args[0]))return void t.throw_error(r.error.type("module",s.args[0],n.indicator));c=s.args[0].id,s=s.args[1]}else c="user";if(r.type.is_variable(s)||r.type.is_term(s)&&"//2"===s.indicator&&(r.type.is_variable(s.args[0])||r.type.is_variable(s.args[1])))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_term(s)&&"//2"===s.indicator)if(r.type.is_atom(s.args[0]))if(r.type.is_integer(s.args[1]))if(s.args[1].value<0)t.throw_error(r.error.domain("not_less_than_zero",s.args[1],n.indicator));else if(r.type.is_number(t.get_flag("max_arity"))&&s.args[1].value>t.get_flag("max_arity").value)t.throw_error(r.error.representation("max_arity",n.indicator));else{var f=t.session.modules[c];if(r.type.is_module(f)){var d=s.args[0].id+"/"+s.args[1].value;t.is_public_predicate(d,c)&&",/2"!==d&&!t.session.modules.system.rules.hasOwnProperty(d)?(delete f.rules[d],delete f.indexed_clauses[d],delete f.non_indexable_clauses[d],delete f.public_predicates[d],delete f.multifile_predicates[d],t.success(a)):t.throw_error(r.error.permission("modify","static_procedure",n.args[0],n.indicator))}else t.success(a)}else t.throw_error(r.error.type("integer",s.args[1],n.indicator));else t.throw_error(r.error.type("atom",s.args[0],n.indicator));else t.throw_error(r.error.type("predicate_indicator",s,n.indicator))},"atom_length/2":function(t,a,n){if(r.type.is_variable(n.args[0]))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_atom(n.args[0]))if(r.type.is_variable(n.args[1])||r.type.is_integer(n.args[1]))if(r.type.is_integer(n.args[1])&&n.args[1].value<0)t.throw_error(r.error.domain("not_less_than_zero",n.args[1],n.indicator));else{var s=new ne(m(n.args[0].id),!1);t.prepend([new Q(a.goal.replace(new u("=",[s,n.args[1]])),a.substitution,a)])}else t.throw_error(r.error.type("integer",n.args[1],n.indicator));else t.throw_error(r.error.type("atom",n.args[0],n.indicator))},"atom_concat/3":function(t,a,n){var s,c,f=n.args[0],d=n.args[1],T=n.args[2];if(r.type.is_variable(T)&&(r.type.is_variable(f)||r.type.is_variable(d)))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(f)||r.type.is_atom(f))if(r.type.is_variable(d)||r.type.is_atom(d))if(r.type.is_variable(T)||r.type.is_atom(T)){var O=r.type.is_variable(f),F=r.type.is_variable(d);if(O||F)if(O&&!F)(s=T.id.substr(0,T.id.length-d.id.length))+d.id===T.id&&(c=new u("=",[f,new u(s)]),t.prepend([new Q(a.goal.replace(c),a.substitution,a)]));else if(F&&!O)s=T.id.substr(f.id.length),f.id+s===T.id&&(c=new u("=",[d,new u(s)]),t.prepend([new Q(a.goal.replace(c),a.substitution,a)]));else{for(var j=[],G=0;G<=T.id.length;G++){var K=new u(T.id.substr(0,G)),fe=new u(T.id.substr(G));c=new u(",",[new u("=",[K,f]),new u("=",[fe,d])]),j.push(new Q(a.goal.replace(c),a.substitution,a))}t.prepend(j)}else c=new u("=",[T,new u(f.id+d.id)]),t.prepend([new Q(a.goal.replace(c),a.substitution,a)])}else t.throw_error(r.error.type("atom",T,n.indicator));else t.throw_error(r.error.type("atom",d,n.indicator));else t.throw_error(r.error.type("atom",f,n.indicator))},"sub_atom/5":function(t,a,n){var s,c=n.args[0],f=n.args[1],d=n.args[2],T=n.args[3],O=n.args[4];if(r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_atom(c))if(r.type.is_variable(f)||r.type.is_integer(f))if(r.type.is_variable(d)||r.type.is_integer(d))if(r.type.is_variable(T)||r.type.is_integer(T))if(r.type.is_integer(f)&&f.value<0)t.throw_error(r.error.domain("not_less_than_zero",f,n.indicator));else if(r.type.is_integer(d)&&d.value<0)t.throw_error(r.error.domain("not_less_than_zero",d,n.indicator));else if(r.type.is_integer(T)&&T.value<0)t.throw_error(r.error.domain("not_less_than_zero",T,n.indicator));else if(r.type.is_variable(O)||r.type.is_atom(O)){var F=[],j=[],G=[];if(r.type.is_variable(f))for(s=0;s<=c.id.length;s++)F.push(s);else F.push(f.value);if(r.type.is_variable(d))for(s=0;s<=c.id.length;s++)j.push(s);else j.push(d.value);if(r.type.is_variable(T))for(s=0;s<=c.id.length;s++)G.push(s);else G.push(T.value);var K=[];for(var fe in F)if(F.hasOwnProperty(fe))for(var se in s=F[fe],j)if(j.hasOwnProperty(se)){var Te=j[se],qe=c.id.length-s-Te;if(-1!==E(G,qe)&&s+Te+qe===c.id.length){var Ve=c.id.substr(s,Te);if(c.id===c.id.substr(0,s)+Ve+c.id.substr(s+Te,qe)){var $e=new u("=",[new u(Ve),O]),tt=new u("=",[f,new ne(s)]),We=new u("=",[d,new ne(Te)]),Ue=new u("=",[T,new ne(qe)]),it=new u(",",[new u(",",[new u(",",[tt,We]),Ue]),$e]);K.push(new Q(a.goal.replace(it),a.substitution,a))}}}t.prepend(K)}else t.throw_error(r.error.type("atom",O,n.indicator));else t.throw_error(r.error.type("integer",T,n.indicator));else t.throw_error(r.error.type("integer",d,n.indicator));else t.throw_error(r.error.type("integer",f,n.indicator));else t.throw_error(r.error.type("atom",c,n.indicator))},"atom_chars/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s)&&r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(s)||r.type.is_atom(s))if(r.type.is_variable(s)){for(var f=c,F=r.type.is_variable(s),j="";"./2"===f.indicator;){if(r.type.is_character(f.args[0]))j+=f.args[0].id;else{if(r.type.is_variable(f.args[0])&&F)return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_variable(f.args[0]))return void t.throw_error(r.error.type("character",f.args[0],n.indicator))}f=f.args[1]}r.type.is_variable(f)&&F?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_empty_list(f)||r.type.is_variable(f)?t.prepend([new Q(a.goal.replace(new u("=",[new u(j),s])),a.substitution,a)]):t.throw_error(r.error.type("list",c,n.indicator))}else{if(!r.type.is_variable(c))for(f=c;r.type.is_term(f)&&"./2"===f.indicator;){if(!r.type.is_character(f.args[0])&&!r.type.is_variable(f.args[0]))return void t.throw_error(r.error.type("character",f.args[0],n.indicator));f=f.args[1]}for(var d=new u("[]"),O=m(s.id)-1;O>=0;O--)d=new u(".",[new u(s.id.charAt(O)),d]);t.prepend([new Q(a.goal.replace(new u("=",[c,d])),a.substitution,a)])}else t.throw_error(r.error.type("atom",s,n.indicator))},"atom_codes/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s)&&r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(s)||r.type.is_atom(s))if(r.type.is_variable(s)){for(var f=c,F=r.type.is_variable(s),j="";"./2"===f.indicator;){if(r.type.is_character_code(f.args[0]))j+=l(f.args[0].value);else{if(r.type.is_variable(f.args[0])&&F)return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_variable(f.args[0]))return void t.throw_error(r.error.representation("character_code",n.indicator))}f=f.args[1]}r.type.is_variable(f)&&F?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_empty_list(f)||r.type.is_variable(f)?t.prepend([new Q(a.goal.replace(new u("=",[new u(j),s])),a.substitution,a)]):t.throw_error(r.error.type("list",c,n.indicator))}else{if(!r.type.is_variable(c))for(f=c;r.type.is_term(f)&&"./2"===f.indicator;){if(!r.type.is_character_code(f.args[0])&&!r.type.is_variable(f.args[0]))return void t.throw_error(r.error.type("integer",f.args[0],n.indicator));f=f.args[1]}for(var d=new u("[]"),O=m(s.id)-1;O>=0;O--)d=new u(".",[new ne(w(s.id,O),!1),d]);t.prepend([new Q(a.goal.replace(new u("=",[c,d])),a.substitution,a)])}else t.throw_error(r.error.type("atom",s,n.indicator))},"char_code/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s)&&r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(s)||r.type.is_character(s))if(r.type.is_variable(c)||r.type.is_integer(c))if(r.type.is_variable(c)||r.type.is_character_code(c))if(r.type.is_variable(c)){var f=new ne(w(s.id,0),!1);t.prepend([new Q(a.goal.replace(new u("=",[f,c])),a.substitution,a)])}else{var d=new u(l(c.value));t.prepend([new Q(a.goal.replace(new u("=",[d,s])),a.substitution,a)])}else t.throw_error(r.error.representation("character_code",n.indicator));else t.throw_error(r.error.type("integer",c,n.indicator));else t.throw_error(r.error.type("character",s,n.indicator))},"number_chars/2":function(t,a,n){var s,c=n.args[0],f=n.args[1];if(r.type.is_variable(c)&&r.type.is_variable(f))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_number(c))if(r.type.is_variable(f)||r.type.is_list(f)){var d=r.type.is_variable(c);if(!r.type.is_variable(f)){var T=f,O=!0;for(s="";"./2"===T.indicator;){if(r.type.is_character(T.args[0]))s+=T.args[0].id;else if(r.type.is_variable(T.args[0]))O=!1;else if(!r.type.is_variable(T.args[0]))return void t.throw_error(r.error.type("character",T.args[0],n.indicator));T=T.args[1]}if(O=O&&r.type.is_empty_list(T),!r.type.is_empty_list(T)&&!r.type.is_variable(T))return void t.throw_error(r.error.type("list",f,n.indicator));if(!O&&d)return void t.throw_error(r.error.instantiation(n.indicator));if(O){if(r.type.is_variable(T)&&d)return void t.throw_error(r.error.instantiation(n.indicator));var F=t.parse(s),j=F.value;return void(!r.type.is_number(j)||F.tokens[F.tokens.length-1].space?t.throw_error(r.error.syntax_by_predicate("parseable_number",n.indicator)):t.prepend([new Q(a.goal.replace(new u("=",[c,j])),a.substitution,a)]))}}if(!d){s=c.toString();for(var G=new u("[]"),K=s.length-1;K>=0;K--)G=new u(".",[new u(s.charAt(K)),G]);t.prepend([new Q(a.goal.replace(new u("=",[f,G])),a.substitution,a)])}}else t.throw_error(r.error.type("list",f,n.indicator));else t.throw_error(r.error.type("number",c,n.indicator))},"number_codes/2":function(t,a,n){var s,c=n.args[0],f=n.args[1];if(r.type.is_variable(c)&&r.type.is_variable(f))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_number(c))if(r.type.is_variable(f)||r.type.is_list(f)){var d=r.type.is_variable(c);if(!r.type.is_variable(f)){var T=f,O=!0;for(s="";"./2"===T.indicator;){if(r.type.is_character_code(T.args[0]))s+=l(T.args[0].value);else if(r.type.is_variable(T.args[0]))O=!1;else if(!r.type.is_variable(T.args[0]))return void t.throw_error(r.error.representation("character_code",n.indicator));T=T.args[1]}if(O=O&&r.type.is_empty_list(T),!r.type.is_empty_list(T)&&!r.type.is_variable(T))return void t.throw_error(r.error.type("list",f,n.indicator));if(!O&&d)return void t.throw_error(r.error.instantiation(n.indicator));if(O){if(r.type.is_variable(T)&&d)return void t.throw_error(r.error.instantiation(n.indicator));var F=t.parse(s),j=F.value;return void(!r.type.is_number(j)||F.tokens[F.tokens.length-1].space?t.throw_error(r.error.syntax_by_predicate("parseable_number",n.indicator)):t.prepend([new Q(a.goal.replace(new u("=",[c,j])),a.substitution,a)]))}}if(!d){s=c.toString();for(var G=new u("[]"),K=s.length-1;K>=0;K--)G=new u(".",[new ne(w(s,K),!1),G]);t.prepend([new Q(a.goal.replace(new u("=",[f,G])),a.substitution,a)])}}else t.throw_error(r.error.type("list",f,n.indicator));else t.throw_error(r.error.type("number",c,n.indicator))},"upcase_atom/2":function(t,a,n){var s=n.args[0],c=n.args[1];r.type.is_variable(s)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_atom(s)?r.type.is_variable(c)||r.type.is_atom(c)?t.prepend([new Q(a.goal.replace(new u("=",[c,new u(s.id.toUpperCase(),[])])),a.substitution,a)]):t.throw_error(r.error.type("atom",c,n.indicator)):t.throw_error(r.error.type("atom",s,n.indicator))},"downcase_atom/2":function(t,a,n){var s=n.args[0],c=n.args[1];r.type.is_variable(s)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_atom(s)?r.type.is_variable(c)||r.type.is_atom(c)?t.prepend([new Q(a.goal.replace(new u("=",[c,new u(s.id.toLowerCase(),[])])),a.substitution,a)]):t.throw_error(r.error.type("atom",c,n.indicator)):t.throw_error(r.error.type("atom",s,n.indicator))},"atomic_concat/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_variable(s)||r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_atomic(s))if(r.type.is_atomic(c))if(r.type.is_variable(f)||r.type.is_atom(f)){var d="";r.type.is_atom(s)?d+=s.id:d+=""+s.value,r.type.is_atom(c)?d+=c.id:d+=""+c.value,n=new u(d,[]),t.prepend([new Q(a.goal.replace(new u("=",[n,f])),a.substitution,a)])}else t.throw_error(r.error.type("atom",f,n.indicator));else t.throw_error(r.error.type("atomic",c,n.indicator));else t.throw_error(r.error.type("atomic",s,n.indicator))},"atomic_list_concat/2":function(t,a,n){var c=n.args[1];t.prepend([new Q(a.goal.replace(new u("atomic_list_concat",[n.args[0],new u("",[]),c])),a.substitution,a)])},"atomic_list_concat/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_variable(c)||r.type.is_variable(s)&&r.type.is_variable(f))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(s)||r.type.is_list(s))if(r.type.is_atom(c)||r.type.is_number(c))if(r.type.is_variable(f)||r.type.is_atom(f)){for(var d="",T=s;r.type.is_term(T)&&"./2"===T.indicator;){if(r.type.is_variable(T.args[0]))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_atom(T.args[0])&&!r.type.is_number(T.args[0]))return void t.throw_error(r.error.type("atomic",T.args[0],n.indicator));""!==d&&(d+=c.id),r.type.is_atom(T.args[0])?d+=T.args[0].id:d+=""+T.args[0].value,T=T.args[1]}d=new u(d,[]),r.type.is_variable(T)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_term(T)&&"[]/0"===T.indicator?t.prepend([new Q(a.goal.replace(new u("=",[d,f])),a.substitution,a)]):t.throw_error(r.error.type("list",s,n.indicator))}else t.throw_error(r.error.type("atom",f,n.indicator));else t.throw_error(r.error.type("atomic",c,n.indicator));else t.throw_error(r.error.type("list",s,n.indicator))},"@=</2":function(t,a,n){r.compare(n.args[0],n.args[1])<=0&&t.success(a)},"==/2":function(t,a,n){0===r.compare(n.args[0],n.args[1])&&t.success(a)},"\\==/2":function(t,a,n){0!==r.compare(n.args[0],n.args[1])&&t.success(a)},"@</2":function(t,a,n){r.compare(n.args[0],n.args[1])<0&&t.success(a)},"@>/2":function(t,a,n){r.compare(n.args[0],n.args[1])>0&&t.success(a)},"@>=/2":function(t,a,n){r.compare(n.args[0],n.args[1])>=0&&t.success(a)},"compare/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_variable(s)||r.type.is_atom(s))if(r.type.is_atom(s)&&-1===["<",">","="].indexOf(s.id))t.throw_error(r.error.domain("order",s,n.indicator));else{var d=r.compare(c,f);t.prepend([new Q(a.goal.replace(new u("=",[s,new u(d=0===d?"=":-1===d?"<":">",[])])),a.substitution,a)])}else t.throw_error(r.error.type("atom",s,n.indicator))},"is/2":function(t,a,n){var s=n.args[1].interpret(t);r.type.is_number(s)?t.prepend([new Q(a.goal.replace(new u("=",[n.args[0],s],n.indicator)),a.substitution,a)]):t.throw_error(s)},"between/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_variable(s)||r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_integer(s))if(r.type.is_integer(c))if(r.type.is_variable(f)||r.type.is_integer(f))if(r.type.is_variable(f)){if(s.value<=c.value){var d=[new Q(a.goal.replace(new u("=",[f,s])),a.substitution,a)];d.push(new Q(a.goal.replace(new u("between",[new ne(s.value+1,!1),c,f])),a.substitution,a)),t.prepend(d)}}else s.value<=f.value&&c.value>=f.value&&t.success(a);else t.throw_error(r.error.type("integer",f,n.indicator));else t.throw_error(r.error.type("integer",c,n.indicator));else t.throw_error(r.error.type("integer",s,n.indicator))},"succ/2":function(t,a,n){var s=n.args[0],c=n.args[1];r.type.is_variable(s)&&r.type.is_variable(c)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_variable(s)||r.type.is_integer(s)?r.type.is_variable(c)||r.type.is_integer(c)?!r.type.is_variable(s)&&s.value<0?t.throw_error(r.error.domain("not_less_than_zero",s,n.indicator)):!r.type.is_variable(c)&&c.value<0?t.throw_error(r.error.domain("not_less_than_zero",c,n.indicator)):(r.type.is_variable(c)||c.value>0)&&(r.type.is_variable(s)?t.prepend([new Q(a.goal.replace(new u("=",[s,new ne(c.value-1,!1)])),a.substitution,a)]):t.prepend([new Q(a.goal.replace(new u("=",[c,new ne(s.value+1,!1)])),a.substitution,a)])):t.throw_error(r.error.type("integer",c,n.indicator)):t.throw_error(r.error.type("integer",s,n.indicator))},"=:=/2":function(t,a,n){var s=r.arithmetic_compare(t,n.args[0],n.args[1]);r.type.is_term(s)?t.throw_error(s):0===s&&t.success(a)},"=\\=/2":function(t,a,n){var s=r.arithmetic_compare(t,n.args[0],n.args[1]);r.type.is_term(s)?t.throw_error(s):0!==s&&t.success(a)},"</2":function(t,a,n){var s=r.arithmetic_compare(t,n.args[0],n.args[1]);r.type.is_term(s)?t.throw_error(s):s<0&&t.success(a)},"=</2":function(t,a,n){var s=r.arithmetic_compare(t,n.args[0],n.args[1]);r.type.is_term(s)?t.throw_error(s):s<=0&&t.success(a)},">/2":function(t,a,n){var s=r.arithmetic_compare(t,n.args[0],n.args[1]);r.type.is_term(s)?t.throw_error(s):s>0&&t.success(a)},">=/2":function(t,a,n){var s=r.arithmetic_compare(t,n.args[0],n.args[1]);r.type.is_term(s)?t.throw_error(s):s>=0&&t.success(a)},"var/1":function(t,a,n){r.type.is_variable(n.args[0])&&t.success(a)},"atom/1":function(t,a,n){r.type.is_atom(n.args[0])&&t.success(a)},"atomic/1":function(t,a,n){r.type.is_atomic(n.args[0])&&t.success(a)},"compound/1":function(t,a,n){r.type.is_compound(n.args[0])&&t.success(a)},"integer/1":function(t,a,n){r.type.is_integer(n.args[0])&&t.success(a)},"float/1":function(t,a,n){r.type.is_float(n.args[0])&&t.success(a)},"number/1":function(t,a,n){r.type.is_number(n.args[0])&&t.success(a)},"nonvar/1":function(t,a,n){r.type.is_variable(n.args[0])||t.success(a)},"ground/1":function(t,a,n){0===n.variables().length&&t.success(a)},"acyclic_term/1":function(t,a,n){for(var s=a.substitution.apply(a.substitution),c=n.args[0].variables(),f=0;f<c.length;f++)if(void 0!==a.substitution.links[c[f]]&&!a.substitution.links[c[f]].equals(s.links[c[f]]))return;t.success(a)},"callable/1":function(t,a,n){r.type.is_term(n.args[0])&&t.success(a)},"is_list/1":function(t,a,n){for(var s=n.args[0];r.type.is_term(s)&&"./2"===s.indicator;)s=s.args[1];r.type.is_term(s)&&"[]/0"===s.indicator&&t.success(a)},"current_input/1":function(t,a,n){var s=n.args[0];r.type.is_variable(s)||r.type.is_stream(s)&&(t.get_stream_by_alias(s.alias)||t.get_stream_by_alias(s.id))||r.type.is_atom(s)&&t.get_stream_by_alias(s.id)?(r.type.is_atom(s)&&(s=t.get_stream_by_alias(s.id)),t.prepend([new Q(a.goal.replace(new u("=",[s,t.get_current_input()])),a.substitution,a)])):t.throw_error(r.error.domain("stream",s,n.indicator))},"current_output/1":function(t,a,n){var s=n.args[0];r.type.is_variable(s)||r.type.is_stream(s)&&(t.get_stream_by_alias(s.alias)||t.get_stream_by_alias(s.id))||r.type.is_atom(s)&&t.get_stream_by_alias(s.id)?(r.type.is_atom(s)&&(s=t.get_stream_by_alias(s.id)),t.prepend([new Q(a.goal.replace(new u("=",[s,t.get_current_output()])),a.substitution,a)])):t.throw_error(r.error.domain("stream",s,n.indicator))},"set_input/1":function(t,a,n){var s=n.args[0],c=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);r.type.is_variable(s)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_stream(s)||r.type.is_atom(s)?r.type.is_stream(c)&&(t.get_stream_by_alias(s.alias)||t.get_stream_by_alias(s.id))?!0===c.output?t.throw_error(r.error.permission("input","stream",s,n.indicator)):(t.set_current_input(c),t.success(a)):t.throw_error(r.error.existence("stream",s,n.indicator)):t.throw_error(r.error.domain("stream_or_alias",s,n.indicator))},"set_output/1":function(t,a,n){var s=n.args[0],c=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);r.type.is_variable(s)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_stream(s)||r.type.is_atom(s)?r.type.is_stream(c)&&(t.get_stream_by_alias(s.alias)||t.get_stream_by_alias(s.id))?!0===c.input?t.throw_error(r.error.permission("output","stream",s,n.indicator)):(t.set_current_output(c),t.success(a)):t.throw_error(r.error.existence("stream",s,n.indicator)):t.throw_error(r.error.domain("stream_or_alias",s,n.indicator))},"open/3":function(t,a,n){t.prepend([new Q(a.goal.replace(new u("open",[n.args[0],n.args[1],n.args[2],new u("[]",[])])),a.substitution,a)])},"open/4":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2],d=n.args[3];if(r.type.is_variable(s)||r.type.is_variable(c)||r.type.is_variable(d))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_atom(c))if(r.type.is_list(d))if(r.type.is_variable(f))if(r.type.is_atom(s)||r.type.is_streamable(s))if(r.type.is_io_mode(c)){for(var F,T={},O=d;r.type.is_term(O)&&"./2"===O.indicator;){if(r.type.is_variable(F=O.args[0]))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_stream_option(F))return void t.throw_error(r.error.domain("stream_option",F,n.indicator));T[F.id]=F.args[0].id,O=O.args[1]}if("[]/0"!==O.indicator)return void(r.type.is_variable(O)?t.throw_error(r.error.instantiation(n.indicator)):t.throw_error(r.error.type("list",d,n.indicator)));var G,j=T.alias;if(j&&t.get_stream_by_alias(j))return void t.throw_error(r.error.permission("open","source_sink",new u("alias",[new u(j,[])]),n.indicator));if(T.type||(T.type="text"),!1===(G=r.type.is_atom(s)?t.file_system_open(s.id,T.type,c.id):s.stream(T.type,c.id)))return void t.throw_error(r.error.permission("open","source_sink",s,n.indicator));if(null===G)return void t.throw_error(r.error.existence("source_sink",s,n.indicator));var K=new Fe(G,c.id,T.alias,T.type,"true"===T.reposition,T.eof_action);j?t.session.streams[j]=K:t.session.streams[K.id]=K,t.prepend([new Q(a.goal.replace(new u("=",[f,K])),a.substitution,a)])}else t.throw_error(r.error.domain("io_mode",c,n.indicator));else t.throw_error(r.error.domain("source_sink",s,n.indicator));else t.throw_error(r.error.uninstantiation(f,n.indicator));else t.throw_error(r.error.type("list",d,n.indicator));else t.throw_error(r.error.type("atom",c,n.indicator))},"close/1":function(t,a,n){t.prepend([new Q(a.goal.replace(new u("close",[n.args[0],new u("[]",[])])),a.substitution,a)])},"close/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s)||r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_list(c))if(r.type.is_stream(s)||r.type.is_atom(s))if(r.type.is_stream(f)&&null!==f.stream){for(var O,d={},T=c;r.type.is_term(T)&&"./2"===T.indicator;){if(r.type.is_variable(O=T.args[0]))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_close_option(O))return void t.throw_error(r.error.domain("close_option",O,n.indicator));d[O.id]="true"===O.args[0].id,T=T.args[1]}if("[]/0"!==T.indicator)return void(r.type.is_variable(T)?t.throw_error(r.error.instantiation(n.indicator)):t.throw_error(r.error.type("list",c,n.indicator)));if(f===t.session.standard_input||f===t.session.standard_output||f===t.session.standard_error)return void t.success(a);f===t.session.current_input?t.session.current_input=t.session.standard_input:f===t.session.current_output&&(t.session.current_output=t.session.standard_output),null!=f.alias?delete t.session.streams[f.alias]:delete t.session.streams[f.id],f.output&&f.stream.flush();var F=f.stream.close();f.stream=null,(!0===d.force||!0===F)&&t.success(a)}else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream_or_alias",s,n.indicator));else t.throw_error(r.error.type("list",c,n.indicator))},"flush_output/0":[new he(new u("flush_output",[]),new u(",",[new u("current_output",[new P("S")]),new u("flush_output",[new P("S")])]))],"flush_output/1":function(t,a,n){var s=n.args[0],c=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);r.type.is_variable(s)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_stream(s)||r.type.is_atom(s)?r.type.is_stream(c)&&null!==c.stream?!0===c.input?t.throw_error(r.error.permission("output","stream",s,n.indicator)):(c.stream.flush(),t.success(a)):t.throw_error(r.error.existence("stream",s,n.indicator)):t.throw_error(r.error.domain("stream_or_alias",s,n.indicator))},"stream_property/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s)||r.type.is_stream(s))if(r.type.is_variable(s)||r.type.is_stream(f)&&null!==f.stream)if(r.type.is_variable(c)||r.type.is_stream_property(c)){var d=[],T=[],O=r.type.is_variable(c);if(r.type.is_variable(s))for(var F in t.session.streams)d.push(t.session.streams[F]);else d.push(f);for(var j=0;j<d.length;j++){var G=[];(O||"file_name/1"===c.indicator)&&d[j].filename&&G.push(new u("file_name",[new u(d[j].file_name,[])])),(O||"mode/1"===c.indicator)&&G.push(new u("mode",[new u(d[j].mode,[])])),(O||"input/0"===c.indicator||"output/0"===c.indicator)&&G.push(new u(d[j].input?"input":"output",[])),(O||"alias/1"===c.indicator)&&d[j].alias&&G.push(new u("alias",[new u(d[j].alias,[])])),(O||"position/1"===c.indicator)&&G.push(new u("position",[new u("position",[new ne(d[j].char_count,!1),new ne(d[j].line_count,!1),new ne(d[j].line_position,!1)])])),(O||"end_of_stream/1"===c.indicator)&&G.push(new u("end_of_stream",[new u("end_of_stream"===d[j].position||d[j].stream.eof&&d[j].stream.eof(d[j].position)?"at":"past_end_of_stream"===d[j].position?"past":"not",[])])),(O||"eof_action/1"===c.indicator)&&G.push(new u("eof_action",[new u(d[j].eof_action,[])])),(O||"reposition/1"===c.indicator)&&G.push(new u("reposition",[new u(d[j].reposition?"true":"false",[])])),(O||"type/1"===c.indicator)&&G.push(new u("type",[new u(d[j].type,[])]));for(var K=0;K<G.length;K++)T.push(new Q(a.goal.replace(new u(",",[new u("=",[r.type.is_variable(s)?s:f,d[j]]),new u("=",[c,G[K]])])),a.substitution,a))}t.prepend(T)}else t.throw_error(r.error.domain("stream_property",c,n.indicator));else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream",s,n.indicator))},"stream_position_data/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2];if(r.type.is_variable(c))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_term(c)&&"position/3"===c.indicator)if(r.type.is_variable(s)||r.type.is_atom(s))if(r.type.is_variable(f)||r.type.is_integer(f)){var d=["char_count","line_count","line_position"],T=[],O={char_count:0,line_count:1,line_position:2};if(r.type.is_variable(s))for(var F=0;F<d.length;F++)T.push(new Q(a.goal.replace(new u(",",[new u("=",[new u(d[F]),s]),new u("=",[f,c.args[O[d[F]]]])])),a.substitution,a));else O.hasOwnProperty(s.id)&&T.push(new Q(a.goal.replace(new u("=",[f,c.args[O[s.id]]])),a.substitution,a));t.prepend(T)}else t.throw_error(r.error.type("integer",f,n.indicator));else t.throw_error(r.error.type("atom",s,n.indicator));else t.throw_error(r.error.domain("stream_position",c,n.indicator))},"at_end_of_stream/0":[new he(new u("at_end_of_stream",[]),new r.type.Term(",",[new u("current_input",[new P("S")]),new u(",",[new u("stream_property",[new P("S"),new u("end_of_stream",[new P("E")])]),new u(",",[new u("!",[]),new u(";",[new u("=",[new P("E"),new u("at",[])]),new u("=",[new P("E"),new u("past",[])])])])])]))],"at_end_of_stream/1":function(t,a,n){var s=n.args[0],c=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_stream(c)&&null!==c.stream){var f=t.next_free_variable();t.prepend([new Q(a.goal.replace(new u(",",[new u("stream_property",[c,new u("end_of_stream",[f])]),new u(",",[new u("!",[]),new u(";",[new u("=",[f,new u("at",[])]),new u("=",[f,new u("past",[])])])])])),a.substitution,a)])}else t.throw_error(r.error.existence("stream",s,n.indicator))},"set_stream_position/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);r.type.is_variable(s)||r.type.is_variable(c)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_stream(s)||r.type.is_atom(s)?r.type.is_stream(f)&&null!==f.stream?r.type.is_stream_position(c)?!1===f.reposition?t.throw_error(r.error.permission("reposition","stream",s,n.indicator)):("position/3"===c.indicator?(f.position=c.args[0].value,f.char_count=c.args[0].value,f.line_count=c.args[1].value,f.line_position=c.args[2].value):f.position=c.id,t.success(a)):t.throw_error(r.error.domain("stream_position",c,n.indicator)):t.throw_error(r.error.existence("stream",s,n.indicator)):t.throw_error(r.error.domain("stream_or_alias",s,n.indicator))},"get_char/1":[new he(new u("get_char",[new P("C")]),new u(",",[new u("current_input",[new P("S")]),new u("get_char",[new P("S"),new P("C")])]))],"get_char/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_in_character(c))if(r.type.is_stream(s)||r.type.is_atom(s))if(r.type.is_stream(f)&&null!==f.stream)if(f.output)t.throw_error(r.error.permission("input","stream",s,n.indicator));else if("binary"===f.type)t.throw_error(r.error.permission("input","binary_stream",s,n.indicator));else if("past_end_of_stream"===f.position&&"error"===f.eof_action)t.throw_error(r.error.permission("input","past_end_of_stream",s,n.indicator));else{var d;if("end_of_stream"===f.position)d="end_of_file",f.position="past_end_of_stream";else if("past_end_of_stream"===f.position)d="end_of_file",f.position="past_end_of_stream";else{if(null===(d=f.stream.get(1,f.position)))return void t.throw_error(r.error.representation("character",n.indicator));"end_of_stream"===d?(d="end_of_file",f.position="past_end_of_stream"):(f.position++,f.char_count++,f.line_position++,"\n"===d&&(f.line_count++,f.line_position=0))}t.prepend([new Q(a.goal.replace(new u("=",[new u(d,[]),c])),a.substitution,a)])}else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream_or_alias",s,n.indicator));else t.throw_error(r.error.type("in_character",c,n.indicator))},"get_code/1":[new he(new u("get_code",[new P("C")]),new u(",",[new u("current_input",[new P("S")]),new u("get_code",[new P("S"),new P("C")])]))],"get_code/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_integer(c))if(r.type.is_integer(c)&&!r.type.is_in_character_code(c))t.throw_error(r.error.representation("in_character_code",n.indicator));else if(r.type.is_variable(s)||r.type.is_stream(s)||r.type.is_atom(s))if(r.type.is_stream(f)&&null!==f.stream)if(f.output)t.throw_error(r.error.permission("input","stream",s,n.indicator));else if("binary"===f.type)t.throw_error(r.error.permission("input","binary_stream",s,n.indicator));else if("past_end_of_stream"===f.position&&"error"===f.eof_action)t.throw_error(r.error.permission("input","past_end_of_stream",s,n.indicator));else{var d;if("end_of_stream"===f.position)d=-1,f.position="past_end_of_stream";else if("past_end_of_stream"===f.position)d=-1,f.position="past_end_of_stream";else{if(null===(d=f.stream.get(1,f.position)))return void t.throw_error(r.error.representation("character",n.indicator));"end_of_stream"===d?(d=-1,f.position="past_end_of_stream"):(d=w(d,0),f.position++,f.char_count++,f.line_position++,10===d&&(f.line_count++,f.line_position=0))}t.prepend([new Q(a.goal.replace(new u("=",[new ne(d,!1),c])),a.substitution,a)])}else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream_or_alias",s,n.indicator));else t.throw_error(r.error.type("integer",c,n.indicator))},"peek_char/1":[new he(new u("peek_char",[new P("C")]),new u(",",[new u("current_input",[new P("S")]),new u("peek_char",[new P("S"),new P("C")])]))],"peek_char/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_in_character(c))if(r.type.is_stream(s)||r.type.is_atom(s))if(r.type.is_stream(f)&&null!==f.stream)if(f.output)t.throw_error(r.error.permission("input","stream",s,n.indicator));else if("binary"===f.type)t.throw_error(r.error.permission("input","binary_stream",s,n.indicator));else if("past_end_of_stream"===f.position&&"error"===f.eof_action)t.throw_error(r.error.permission("input","past_end_of_stream",s,n.indicator));else{var d;if("end_of_stream"===f.position)d="end_of_file",f.position="past_end_of_stream";else if("past_end_of_stream"===f.position)d="end_of_file",f.position="past_end_of_stream";else{if(null===(d=f.stream.get(1,f.position)))return void t.throw_error(r.error.representation("character",n.indicator));"end_of_stream"===d&&(d="end_of_file")}t.prepend([new Q(a.goal.replace(new u("=",[new u(d,[]),c])),a.substitution,a)])}else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream_or_alias",s,n.indicator));else t.throw_error(r.error.type("in_character",c,n.indicator))},"peek_code/1":[new he(new u("peek_code",[new P("C")]),new u(",",[new u("current_input",[new P("S")]),new u("peek_code",[new P("S"),new P("C")])]))],"peek_code/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_integer(c))if(r.type.is_integer(c)&&!r.type.is_in_character_code(c))t.throw_error(r.error.representation("in_character_code",n.indicator));else if(r.type.is_variable(s)||r.type.is_stream(s)||r.type.is_atom(s))if(r.type.is_stream(f)&&null!==f.stream)if(f.output)t.throw_error(r.error.permission("input","stream",s,n.indicator));else if("binary"===f.type)t.throw_error(r.error.permission("input","binary_stream",s,n.indicator));else if("past_end_of_stream"===f.position&&"error"===f.eof_action)t.throw_error(r.error.permission("input","past_end_of_stream",s,n.indicator));else{var d;if("end_of_stream"===f.position)d=-1,f.position="past_end_of_stream";else{if(null===(d=f.stream.get(1,f.position)))return void t.throw_error(r.error.representation("character",n.indicator));d="end_of_stream"===d?-1:w(d,0)}t.prepend([new Q(a.goal.replace(new u("=",[new ne(d,!1),c])),a.substitution,a)])}else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream_or_alias",s,n.indicator));else t.throw_error(r.error.type("integer",c,n.indicator))},"put_char/1":[new he(new u("put_char",[new P("C")]),new u(",",[new u("current_output",[new P("S")]),new u("put_char",[new P("S"),new P("C")])]))],"put_char/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);r.type.is_variable(s)||r.type.is_variable(c)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_character(c)?r.type.is_variable(s)||r.type.is_stream(s)||r.type.is_atom(s)?r.type.is_stream(f)&&null!==f.stream?f.input?t.throw_error(r.error.permission("output","stream",s,n.indicator)):"binary"===f.type?t.throw_error(r.error.permission("output","binary_stream",s,n.indicator)):f.stream.put(c.id,f.position)&&("number"==typeof f.position&&f.position++,f.char_count++,f.line_position++,"\n"===c.id&&(f.line_count++,f.line_position=0),t.success(a)):t.throw_error(r.error.existence("stream",s,n.indicator)):t.throw_error(r.error.domain("stream_or_alias",s,n.indicator)):t.throw_error(r.error.type("character",c,n.indicator))},"put_code/1":[new he(new u("put_code",[new P("C")]),new u(",",[new u("current_output",[new P("S")]),new u("put_code",[new P("S"),new P("C")])]))],"put_code/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);r.type.is_variable(s)||r.type.is_variable(c)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_integer(c)?r.type.is_character_code(c)?r.type.is_variable(s)||r.type.is_stream(s)||r.type.is_atom(s)?r.type.is_stream(f)&&null!==f.stream?f.input?t.throw_error(r.error.permission("output","stream",s,n.indicator)):"binary"===f.type?t.throw_error(r.error.permission("output","binary_stream",s,n.indicator)):f.stream.put(l(c.value),f.position)&&("number"==typeof f.position&&f.position++,f.char_count++,f.line_position++,10===c.value&&(f.line_count++,f.line_position=0),t.success(a)):t.throw_error(r.error.existence("stream",s,n.indicator)):t.throw_error(r.error.domain("stream_or_alias",s,n.indicator)):t.throw_error(r.error.representation("character_code",n.indicator)):t.throw_error(r.error.type("integer",c,n.indicator))},"nl/0":[new he(new u("nl"),new u(",",[new u("current_output",[new P("S")]),new u("put_char",[new P("S"),new u("\n")])]))],"nl/1":function(t,a,n){t.prepend([new Q(a.goal.replace(new u("put_char",[n.args[0],new u("\n",[])])),a.substitution,a)])},"get_byte/1":[new he(new u("get_byte",[new P("B")]),new u(",",[new u("current_input",[new P("S")]),new u("get_byte",[new P("S"),new P("B")])]))],"get_byte/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_in_byte(c))if(r.type.is_stream(s)||r.type.is_atom(s))if(r.type.is_stream(f)&&null!==f.stream)if(f.output)t.throw_error(r.error.permission("input","stream",s,n.indicator));else if("text"===f.type)t.throw_error(r.error.permission("input","text_stream",s,n.indicator));else if("past_end_of_stream"===f.position&&"error"===f.eof_action)t.throw_error(r.error.permission("input","past_end_of_stream",s,n.indicator));else{var d;if("end_of_stream"===f.position)d=-1,f.position="past_end_of_stream";else{if(null===(d=f.stream.get_byte(f.position)))return void t.throw_error(r.error.representation("byte",n.indicator));"end_of_stream"===d?(d=-1,f.position="past_end_of_stream"):(f.position++,f.char_count++,f.line_position++)}t.prepend([new Q(a.goal.replace(new u("=",[new ne(d,!1),c])),a.substitution,a)])}else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream_or_alias",s,n.indicator));else t.throw_error(r.error.type("in_byte",c,n.indicator))},"peek_byte/1":[new he(new u("peek_byte",[new P("B")]),new u(",",[new u("current_input",[new P("S")]),new u("peek_byte",[new P("S"),new P("B")])]))],"peek_byte/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(c)||r.type.is_in_byte(c))if(r.type.is_stream(s)||r.type.is_atom(s))if(r.type.is_stream(f)&&null!==f.stream)if(f.output)t.throw_error(r.error.permission("input","stream",s,n.indicator));else if("text"===f.type)t.throw_error(r.error.permission("input","text_stream",s,n.indicator));else if("past_end_of_stream"===f.position&&"error"===f.eof_action)t.throw_error(r.error.permission("input","past_end_of_stream",s,n.indicator));else{var d;if("end_of_stream"===f.position)d=-1,f.position="past_end_of_stream";else{if(null===(d=f.stream.get_byte(f.position)))return void t.throw_error(r.error.representation("byte",n.indicator));"end_of_stream"===d&&(d=-1)}t.prepend([new Q(a.goal.replace(new u("=",[new ne(d,!1),c])),a.substitution,a)])}else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream_or_alias",s,n.indicator));else t.throw_error(r.error.type("in_byte",c,n.indicator))},"put_byte/1":[new he(new u("put_byte",[new P("B")]),new u(",",[new u("current_output",[new P("S")]),new u("put_byte",[new P("S"),new P("B")])]))],"put_byte/2":function(t,a,n){var s=n.args[0],c=n.args[1],f=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);r.type.is_variable(s)||r.type.is_variable(c)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_byte(c)?r.type.is_variable(s)||r.type.is_stream(s)||r.type.is_atom(s)?r.type.is_stream(f)&&null!==f.stream?f.input?t.throw_error(r.error.permission("output","stream",s,n.indicator)):"text"===f.type?t.throw_error(r.error.permission("output","text_stream",s,n.indicator)):f.stream.put_byte(c.value,f.position)&&("number"==typeof f.position&&f.position++,f.char_count++,f.line_position++,t.success(a)):t.throw_error(r.error.existence("stream",s,n.indicator)):t.throw_error(r.error.domain("stream_or_alias",s,n.indicator)):t.throw_error(r.error.type("byte",c,n.indicator))},"read/1":[new he(new u("read",[new P("T")]),new u(",",[new u("current_input",[new P("S")]),new u("read_term",[new P("S"),new P("T"),new u("[]")])]))],"read/2":[new he(new u("read",[new P("S"),new P("T")]),new u("read_term",[new P("S"),new P("T"),new u("[]")]))],"read_term/2":[new he(new u("read_term",[new P("T"),new P("O")]),new u(",",[new u("current_input",[new P("S")]),new u("read_term",[new P("S"),new P("T"),new P("O")])]))],"read_term/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2],d=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s)||r.type.is_variable(f))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_list(f))if(r.type.is_stream(s)||r.type.is_atom(s))if(r.type.is_stream(d)&&null!==d.stream)if(d.output)t.throw_error(r.error.permission("input","stream",s,n.indicator));else if("binary"===d.type)t.throw_error(r.error.permission("input","binary_stream",s,n.indicator));else if("past_end_of_stream"===d.position&&"error"===d.eof_action)t.throw_error(r.error.permission("input","past_end_of_stream",s,n.indicator));else if("past_end_of_stream"===d.position&&"eof_code"===d.eof_action)K={value:new u("end_of_file",[]),type:1,len:-1};else{for(var F,T={},O=f;r.type.is_term(O)&&"./2"===O.indicator;){if(r.type.is_variable(F=O.args[0]))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_read_option(F))return void t.throw_error(r.error.domain("read_option",F,n.indicator));T[F.id]=F.args[0],O=O.args[1]}if("[]/0"!==O.indicator)return void(r.type.is_variable(O)?t.throw_error(r.error.instantiation(n.indicator)):t.throw_error(r.error.type("list",f,n.indicator)));for(var j,G,K,fe="",se=[],Te=null,qe=!1;null===Te||qe||"atom"!==Te.name||"."!==Te.value||se.length>0&&0===K.type;){for(j=d.stream.get(1,d.position);null!==j&&"."!==j&&"end_of_stream"!==j&&"past_end_of_stream"!==j;)d.position++,fe+=j,j=d.stream.get(1,d.position);if(null===j)return void t.throw_error(r.error.representation("character",n.indicator));if("end_of_stream"===j||"past_end_of_stream"===j){if(null===se||0===se.length){d.position="past_end_of_stream",K={value:new u("end_of_file",[]),type:1,len:-1};break}return K?void t.throw_error(r.error.syntax(Te,"unexpected end of file",!1)):void t.throw_error(r.error.syntax(Te,"token not found",!0))}if("."===j&&(d.position++,fe+=j),(G=new pe(t)).new_text(fe),se=G.get_tokens(),num_token=null!==se&&se.length>1?se[se.length-2]:null,Te=null!==se&&se.length>0?se[se.length-1]:null,null!==se){qe=!1;for(var Ve=0;Ve<se.length&&!qe;Ve++)qe="lexical"===se[Ve].name;if(!qe&&(K=me(t,se,0,t.__get_max_priority(),!1),num_token&&"number"===num_token.name&&!num_token.float&&!num_token.blank&&"."===Te.value)){var $e=d.stream.get(1,d.position);if($e>="0"&&$e<="9"){d.position++,fe+=$e,Te=null;continue}}}}if(Te&&(Te.line_position===Te.len?d.line_position+=Te.line_position:d.line_position=Te.line_position,d.line_count+=Te.line_count,d.char_count+=Te.len),1===K.type&&(-1===K.len||K.len===se.length-1&&"."===Te.value)){t.session.renamed_variables={};var tt=new u("=",[c,K=K.value.rename(t)]);if(T.variables){var We=Be(V(It(K.variables()),function(Qt){return new P(Qt)}));tt=new u(",",[tt,new u("=",[T.variables,We])])}if(T.variable_names){We=It(K.variables());var Ue=[];for(Ve=0;Ve<We.length;Ve++){var it=We[Ve];for(var yt in t.session.renamed_variables)if(t.session.renamed_variables.hasOwnProperty(yt)&&t.session.renamed_variables[yt]===it){Ue.push(new u("=",[new u(yt,[]),new P(it)]));break}}Ue=Be(Ue),tt=new u(",",[tt,new u("=",[T.variable_names,Ue])])}if(T.singletons){for(We=It(new he(K,null).singleton_variables(!0)),Ue=[],Ve=0;Ve<We.length;Ve++)for(var yt in it=We[Ve],t.session.renamed_variables)if(t.session.renamed_variables.hasOwnProperty(yt)&&t.session.renamed_variables[yt]===it){Ue.push(new u("=",[new u(yt,[]),new P(it)]));break}Ue=Be(Ue),tt=new u(",",[tt,new u("=",[T.singletons,Ue])])}t.prepend([new Q(a.goal.replace(tt),a.substitution,a)])}else t.throw_error(1===K.type?r.error.syntax(se[K.len],"unexpected token",!1):K.value)}else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream_or_alias",s,n.indicator));else t.throw_error(r.error.type("list",f,n.indicator))},"write/1":[new he(new u("write",[new P("T")]),new u(",",[new u("current_output",[new P("S")]),new u("write",[new P("S"),new P("T")])]))],"write/2":function(t,a,n){t.prepend([new Q(a.goal.replace(new u("write_term",[n.args[0],n.args[1],new u(".",[new u("quoted",[new u("false",[])]),new u(".",[new u("ignore_ops",[new u("false")]),new u(".",[new u("numbervars",[new u("true")]),new u("[]",[])])])])])),a.substitution,a)])},"writeq/1":[new he(new u("writeq",[new P("T")]),new u(",",[new u("current_output",[new P("S")]),new u("writeq",[new P("S"),new P("T")])]))],"writeq/2":function(t,a,n){t.prepend([new Q(a.goal.replace(new u("write_term",[n.args[0],n.args[1],new u(".",[new u("quoted",[new u("true",[])]),new u(".",[new u("ignore_ops",[new u("false")]),new u(".",[new u("numbervars",[new u("true")]),new u("[]",[])])])])])),a.substitution,a)])},"write_canonical/1":[new he(new u("write_canonical",[new P("T")]),new u(",",[new u("current_output",[new P("S")]),new u("write_canonical",[new P("S"),new P("T")])]))],"write_canonical/2":function(t,a,n){t.prepend([new Q(a.goal.replace(new u("write_term",[n.args[0],n.args[1],new u(".",[new u("quoted",[new u("true",[])]),new u(".",[new u("ignore_ops",[new u("true")]),new u(".",[new u("numbervars",[new u("false")]),new u("[]",[])])])])])),a.substitution,a)])},"write_term/2":[new he(new u("write_term",[new P("T"),new P("O")]),new u(",",[new u("current_output",[new P("S")]),new u("write_term",[new P("S"),new P("T"),new P("O")])]))],"write_term/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2],d=r.type.is_stream(s)?s:t.get_stream_by_alias(s.id);if(r.type.is_variable(s)||r.type.is_variable(f))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_list(f))if(r.type.is_stream(s)||r.type.is_atom(s))if(r.type.is_stream(d)&&null!==d.stream)if(d.input)t.throw_error(r.error.permission("output","stream",s,n.indicator));else if("binary"===d.type)t.throw_error(r.error.permission("output","binary_stream",s,n.indicator));else if("past_end_of_stream"===d.position&&"error"===d.eof_action)t.throw_error(r.error.permission("output","past_end_of_stream",s,n.indicator));else{for(var F,T={},O=f;r.type.is_term(O)&&"./2"===O.indicator;){if(r.type.is_variable(F=O.args[0]))return void t.throw_error(r.error.instantiation(n.indicator));if(!r.type.is_write_option(F))return void t.throw_error(r.error.domain("write_option",F,n.indicator));T[F.id]="variable_names/1"===F.indicator?F.args[0]:"true"===F.args[0].id,O=O.args[1]}if("[]/0"!==O.indicator)return void(r.type.is_variable(O)?t.throw_error(r.error.instantiation(n.indicator)):t.throw_error(r.error.type("list",f,n.indicator)));T.session=t.session;var j=c.toString(T);d.stream.put(j,d.position),"number"==typeof d.position&&(d.position+=j.length);var G=(j.match(/\n/g)||[]).length;d.line_count+=G,G>0?d.line_position=j.length-j.lastIndexOf("\n")-1:d.line_position+=j.length,d.char_count+=j.length,t.success(a)}else t.throw_error(r.error.existence("stream",s,n.indicator));else t.throw_error(r.error.domain("stream_or_alias",s,n.indicator));else t.throw_error(r.error.type("list",f,n.indicator))},"halt/0":function(t,a,n){"true/0"===t.get_flag("nodejs").indicator&&process.exit(),t.points=[]},"halt/1":function(t,a,n){var s=n.args[0];r.type.is_variable(s)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_integer(s)?("true/0"===t.get_flag("nodejs").indicator&&process.exit(s.value),t.points=[]):t.throw_error(r.error.type("integer",s,n.indicator))},"current_prolog_flag/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s)||r.type.is_atom(s))if(r.type.is_variable(s)||r.type.is_flag(s)){var f=[];for(var d in r.flag)if(r.flag.hasOwnProperty(d)){var T=new u(",",[new u("=",[new u(d),s]),new u("=",[t.get_flag(d),c])]);f.push(new Q(a.goal.replace(T),a.substitution,a))}t.prepend(f)}else t.throw_error(r.error.domain("prolog_flag",s,n.indicator));else t.throw_error(r.error.type("atom",s,n.indicator))},"set_prolog_flag/2":function(t,a,n){var s=n.args[0],c=n.args[1];r.type.is_variable(s)||r.type.is_variable(c)?t.throw_error(r.error.instantiation(n.indicator)):r.type.is_atom(s)?r.type.is_flag(s)?r.type.is_modifiable_flag(s)?r.type.is_value_flag(s,c)?(t.session.flag[s.id]=c,t.success(a)):t.throw_error(r.error.domain("flag_value",new u("+",[s,c]),n.indicator)):t.throw_error(r.error.permission("modify","flag",s,n.indicator)):t.throw_error(r.error.domain("prolog_flag",s,n.indicator)):t.throw_error(r.error.type("atom",s,n.indicator))},"consult/1":function(t,a,n){var s=n.args[0],c="user";if(":/2"===s.indicator&&(c=s.args[0].id,s=s.args[1]),r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else{if(r.type.is_atom(s))return t.consult(s.id,{context_module:c,text:!1,html:!1,success:function(){t.success(a),t.again()},error:function(f){t.throw_error(f),t.again()}}),!0;t.throw_error(r.error.type("atom",s,n.indicator))}},"get_time/1":function(t,a,n){var s=n.args[0];if(r.type.is_variable(s)||r.type.is_number(s)){var c=new ne(Date.now(),!0);t.prepend([new Q(a.goal.replace(new u("=",[s,c])),a.substitution,a)])}else t.throw_error(r.error.type("number",s,n.indicator))},"time_property/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_variable(s)||r.type.is_number(s))if(r.type.is_variable(c)||r.type.is_time_property(c)){var f;f=r.type.is_variable(c)?["year","month","day","hours","minutes","seconds","milliseconds","weekday"]:[c.id];for(var T,d=new Date(s.value),O=[],F=0;F<f.length;F++){switch(f[F]){case"year":T=new u("year",[new ne(d.getFullYear(),!1)]);break;case"month":T=new u("month",[new ne(d.getMonth(),!1)]);break;case"day":T=new u("day",[new ne(d.getDate(),!1)]);break;case"hours":T=new u("hours",[new ne(d.getHours(),!1)]);break;case"minutes":T=new u("minutes",[new ne(d.getMinutes(),!1)]);break;case"seconds":T=new u("seconds",[new ne(d.getSeconds(),!1)]);break;case"milliseconds":T=new u("milliseconds",[new ne(d.getMilliseconds(),!1)]);break;case"weekday":T=new u("weekday",[new ne(d.getDay(),!1)])}O.push(new Q(a.goal.replace(new u("=",[c,T])),a.substitution,a))}t.prepend(O)}else t.throw_error(r.error.domain("time_property",c,n.indicator));else t.throw_error(r.error.type("number",s,n.indicator))},"time_year/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_number(s))if(r.type.is_variable(c)||r.type.is_integer(c)){var f=new ne(new Date(s.value).getFullYear(),!1);t.prepend([new Q(a.goal.replace(new u("=",[c,f])),a.substitution,a)])}else t.throw_error(r.error.type("integer",c,n.indicator));else t.throw_error(r.error.type("number",s,n.indicator))},"time_month/2":function(t,a,n){var s=n.args[0],c=n.args[1];if(r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_number(s))if(r.type.is_variable(c)||r.type.is_integer(c)){var f=new ne(new Date(s.value).getMonth(),!1);t.prepend([new Q(a.goal.replace(new u("=",[c,f])),a.substitution,a)])}else t.throw_error(r.error.type("integer",c,n.indicator));else t.throw_error(r.error.type("number",s,n.indicator))},"phrase/3":function(t,a,n){var s=n.args[0],c=n.args[1],f=n.args[2],d="user";if(":/2"===s.indicator&&(d=s.args[0].id,s=s.args[1]),r.type.is_variable(s))t.throw_error(r.error.instantiation(n.indicator));else if(r.type.is_callable(s)){var T=Dt(s.clone(),c,t);T.value=new u(":",[new u(d),new u("call",[T.value])]),null!==T&&t.prepend([new Q(a.goal.replace(new u(",",[T.value,new u("=",[T.variable,f])])),a.substitution,a)])}else t.throw_error(r.error.type("callable",s,n.indicator))},"phrase/2":function(t,a,n){t.prepend([new Q(a.goal.replace(new u("phrase",[n.args[0],n.args[1],new u("[]",[])])),a.substitution,a)])},"version/0":function(t,a,n){var s="Welcome to Tau Prolog version "+e.major+"."+e.minor+"."+e.patch+"\n";s+="Tau Prolog comes with ABSOLUTELY NO WARRANTY. This is free software.\n",s+="Please run ?- license. for legal details.\n",t.prepend([new Q(a.goal.replace(new u("write",[new u(s+="For online help and background, visit http:/tau-prolog.org",[])])),a.substitution,a)])},"license/0":function(t,a,n){t.prepend([new Q(a.goal.replace(new u("write",[new u('Tau Prolog. A Prolog interpreter in JavaScript.\nCopyright (C) 2017 - 2022 Jos\xe9 Antonio Riaza Valverde\n\nRedistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nYou should have received a copy of the BSD 3-Clause License along with this program. If not, see https://opensource.org/licenses/BSD-3-Clause',[])])),a.substitution,a)])}},"all",{meta_predicates:{"$findall/4":new u("$findall",[new u("?"),new ne(0,!1),new u("-"),new u("?")]),"$bagof/3":new u("$bagof",[new u("?"),new u("^"),new u("-")]),"$setof/3":new u("$setof",[new u("?"),new u("^"),new u("-")]),"$if/3":new u("$if",[new ne(0,!1),new ne(0,!1),new ne(0,!1)]),";/2":new u(";",[new ne(0,!1),new ne(0,!1)]),"->/2":new u("->",[new ne(0,!1),new ne(0,!1)]),"*->/2":new u("*->",[new ne(0,!1),new ne(0,!1)]),"\\+/1":new u("\\+",[new ne(0,!1)]),"abolish/1":new u("abolish",[new u(":")]),"asserta/1":new u("asserta",[new u(":")]),"assertz/1":new u("assertz",[new u(":")]),"bagof/3":new u("bagof",[new u("?"),new u("^"),new u("-")]),"call/1":new u("call",[new ne(0,!1)]),"call/2":new u("call",[new ne(1,!1),new u("?")]),"call/3":new u("call",[new ne(2,!1),new u("?"),new u("?")]),"call/4":new u("call",[new ne(3,!1),new u("?"),new u("?"),new u("?")]),"call/5":new u("call",[new ne(4,!1),new u("?"),new u("?"),new u("?"),new u("?")]),"call/6":new u("call",[new ne(5,!1),new u("?"),new u("?"),new u("?"),new u("?"),new u("?")]),"call/7":new u("call",[new ne(6,!1),new u("?"),new u("?"),new u("?"),new u("?"),new u("?"),new u("?")]),"call/8":new u("call",[new ne(6,!1),new u("?"),new u("?"),new u("?"),new u("?"),new u("?"),new u("?"),new u("?")]),"call_cleanup/2":new u("call_cleanup",[new ne(0,!1),new ne(0,!1)]),"catch/3":new u("catch",[new ne(0,!1),new u("?"),new ne(0,!1)]),"consult/1":new u("consult",[new u(":")]),"clause/2":new u("clause",[new u(":"),new u("?")]),"current_predicate/2":new u("current_predicate",[new u("?"),new u(":")]),"findall/3":new u("findall",[new u("?"),new ne(0,!1),new u("-")]),"findall/4":new u("findall",[new u("?"),new ne(0,!1),new u("-"),new u("?")]),"forall/2":new u("forall",[new ne(0,!1),new ne(0,!1)]),"listing/1":new u("listing",[new u(":")]),"once/1":new u("once",[new ne(0,!1)]),"phrase/2":new u("phrase",[new u(":"),new u("?")]),"phrase/3":new u("phrase",[new u(":"),new u("?"),new u("?")]),"retract/1":new u("retract",[new u(":")]),"retractall/1":new u("retractall",[new u(":")]),"setup_call_cleanup/3":new u("setup_call_cleanup",[new ne(0,!1),new ne(0,!1),new ne(0,!1)]),"setof/3":new u("setof",[new u("?"),new u("^"),new u("-")])}}),typeof module<"u"?module.exports=r:window.pl=r}(),function(e){var M=function(){return{"append/2":[new e.type.Rule(new e.type.Term("append",[new e.type.Var("X"),new e.type.Var("L")]),new e.type.Term("foldl",[new e.type.Term("append",[]),new e.type.Var("X"),new e.type.Term("[]",[]),new e.type.Var("L")]))],"append/3":[new e.type.Rule(new e.type.Term("append",[new e.type.Term("[]",[]),new e.type.Var("X"),new e.type.Var("X")]),null),new e.type.Rule(new e.type.Term("append",[new e.type.Term(".",[new e.type.Var("H"),new e.type.Var("T")]),new e.type.Var("X"),new e.type.Term(".",[new e.type.Var("H"),new e.type.Var("S")])]),new e.type.Term("append",[new e.type.Var("T"),new e.type.Var("X"),new e.type.Var("S")]))],"member/2":[new e.type.Rule(new e.type.Term("member",[new e.type.Var("X"),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("_")])]),null),new e.type.Rule(new e.type.Term("member",[new e.type.Var("X"),new e.type.Term(".",[new e.type.Var("_"),new e.type.Var("Xs")])]),new e.type.Term("member",[new e.type.Var("X"),new e.type.Var("Xs")]))],"permutation/2":[new e.type.Rule(new e.type.Term("permutation",[new e.type.Term("[]",[]),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("permutation",[new e.type.Term(".",[new e.type.Var("H"),new e.type.Var("T")]),new e.type.Var("S")]),new e.type.Term(",",[new e.type.Term("permutation",[new e.type.Var("T"),new e.type.Var("P")]),new e.type.Term(",",[new e.type.Term("append",[new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("P")]),new e.type.Term("append",[new e.type.Var("X"),new e.type.Term(".",[new e.type.Var("H"),new e.type.Var("Y")]),new e.type.Var("S")])])]))],"maplist/2":[new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("_"),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")])]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("P"),new e.type.Var("X")]),new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Var("Xs")])]))],"maplist/3":[new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("A"),new e.type.Var("As")]),new e.type.Term(".",[new e.type.Var("B"),new e.type.Var("Bs")])]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("P"),new e.type.Var("A"),new e.type.Var("B")]),new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Var("As"),new e.type.Var("Bs")])]))],"maplist/4":[new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("A"),new e.type.Var("As")]),new e.type.Term(".",[new e.type.Var("B"),new e.type.Var("Bs")]),new e.type.Term(".",[new e.type.Var("C"),new e.type.Var("Cs")])]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("P"),new e.type.Var("A"),new e.type.Var("B"),new e.type.Var("C")]),new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Var("As"),new e.type.Var("Bs"),new e.type.Var("Cs")])]))],"maplist/5":[new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("A"),new e.type.Var("As")]),new e.type.Term(".",[new e.type.Var("B"),new e.type.Var("Bs")]),new e.type.Term(".",[new e.type.Var("C"),new e.type.Var("Cs")]),new e.type.Term(".",[new e.type.Var("D"),new e.type.Var("Ds")])]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("P"),new e.type.Var("A"),new e.type.Var("B"),new e.type.Var("C"),new e.type.Var("D")]),new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Var("As"),new e.type.Var("Bs"),new e.type.Var("Cs"),new e.type.Var("Ds")])]))],"maplist/6":[new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("A"),new e.type.Var("As")]),new e.type.Term(".",[new e.type.Var("B"),new e.type.Var("Bs")]),new e.type.Term(".",[new e.type.Var("C"),new e.type.Var("Cs")]),new e.type.Term(".",[new e.type.Var("D"),new e.type.Var("Ds")]),new e.type.Term(".",[new e.type.Var("E"),new e.type.Var("Es")])]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("P"),new e.type.Var("A"),new e.type.Var("B"),new e.type.Var("C"),new e.type.Var("D"),new e.type.Var("E")]),new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Var("As"),new e.type.Var("Bs"),new e.type.Var("Cs"),new e.type.Var("Ds"),new e.type.Var("Es")])]))],"maplist/7":[new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("A"),new e.type.Var("As")]),new e.type.Term(".",[new e.type.Var("B"),new e.type.Var("Bs")]),new e.type.Term(".",[new e.type.Var("C"),new e.type.Var("Cs")]),new e.type.Term(".",[new e.type.Var("D"),new e.type.Var("Ds")]),new e.type.Term(".",[new e.type.Var("E"),new e.type.Var("Es")]),new e.type.Term(".",[new e.type.Var("F"),new e.type.Var("Fs")])]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("P"),new e.type.Var("A"),new e.type.Var("B"),new e.type.Var("C"),new e.type.Var("D"),new e.type.Var("E"),new e.type.Var("F")]),new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Var("As"),new e.type.Var("Bs"),new e.type.Var("Cs"),new e.type.Var("Ds"),new e.type.Var("Es"),new e.type.Var("Fs")])]))],"maplist/8":[new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("A"),new e.type.Var("As")]),new e.type.Term(".",[new e.type.Var("B"),new e.type.Var("Bs")]),new e.type.Term(".",[new e.type.Var("C"),new e.type.Var("Cs")]),new e.type.Term(".",[new e.type.Var("D"),new e.type.Var("Ds")]),new e.type.Term(".",[new e.type.Var("E"),new e.type.Var("Es")]),new e.type.Term(".",[new e.type.Var("F"),new e.type.Var("Fs")]),new e.type.Term(".",[new e.type.Var("G"),new e.type.Var("Gs")])]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("P"),new e.type.Var("A"),new e.type.Var("B"),new e.type.Var("C"),new e.type.Var("D"),new e.type.Var("E"),new e.type.Var("F"),new e.type.Var("G")]),new e.type.Term("maplist",[new e.type.Var("P"),new e.type.Var("As"),new e.type.Var("Bs"),new e.type.Var("Cs"),new e.type.Var("Ds"),new e.type.Var("Es"),new e.type.Var("Fs"),new e.type.Var("Gs")])]))],"include/3":[new e.type.Rule(new e.type.Term("include",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("include",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("S")])]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("P"),new e.type.Var("X")]),new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("include",[new e.type.Var("P"),new e.type.Var("Xs"),new e.type.Var("S")])])])),new e.type.Rule(new e.type.Term("include",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("_"),new e.type.Var("Xs")]),new e.type.Var("S")]),new e.type.Term("include",[new e.type.Var("P"),new e.type.Var("Xs"),new e.type.Var("S")]))],"exclude/3":[new e.type.Rule(new e.type.Term("exclude",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[])]),null),new e.type.Rule(new e.type.Term("exclude",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Var("S")]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("P"),new e.type.Var("X")]),new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("exclude",[new e.type.Var("P"),new e.type.Var("Xs"),new e.type.Var("S")])])])),new e.type.Rule(new e.type.Term("exclude",[new e.type.Var("P"),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("S")])]),new e.type.Term("exclude",[new e.type.Var("P"),new e.type.Var("Xs"),new e.type.Var("S")]))],"foldl/4":[new e.type.Rule(new e.type.Term("foldl",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Var("V"),new e.type.Var("V")]),null),new e.type.Rule(new e.type.Term("foldl",[new e.type.Var("Goal"),new e.type.Term(".",[new e.type.Var("H"),new e.type.Var("T")]),new e.type.Var("V0"),new e.type.Var("V")]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("Goal"),new e.type.Var("H"),new e.type.Var("V0"),new e.type.Var("V1")]),new e.type.Term("foldl",[new e.type.Var("Goal"),new e.type.Var("T"),new e.type.Var("V1"),new e.type.Var("V")])]))],"foldl/5":[new e.type.Rule(new e.type.Term("foldl",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Var("V"),new e.type.Var("V")]),null),new e.type.Rule(new e.type.Term("foldl",[new e.type.Var("Goal"),new e.type.Term(".",[new e.type.Var("H1"),new e.type.Var("T1")]),new e.type.Term(".",[new e.type.Var("H2"),new e.type.Var("T2")]),new e.type.Var("V0"),new e.type.Var("V")]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("Goal"),new e.type.Var("H1"),new e.type.Var("H2"),new e.type.Var("V0"),new e.type.Var("V1")]),new e.type.Term("foldl",[new e.type.Var("Goal"),new e.type.Var("T1"),new e.type.Var("T2"),new e.type.Var("V1"),new e.type.Var("V")])]))],"foldl/6":[new e.type.Rule(new e.type.Term("foldl",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Var("V"),new e.type.Var("V")]),null),new e.type.Rule(new e.type.Term("foldl",[new e.type.Var("Goal"),new e.type.Term(".",[new e.type.Var("H1"),new e.type.Var("T1")]),new e.type.Term(".",[new e.type.Var("H2"),new e.type.Var("T2")]),new e.type.Term(".",[new e.type.Var("H3"),new e.type.Var("T3")]),new e.type.Var("V0"),new e.type.Var("V")]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("Goal"),new e.type.Var("H1"),new e.type.Var("H2"),new e.type.Var("H3"),new e.type.Var("V0"),new e.type.Var("V1")]),new e.type.Term("foldl",[new e.type.Var("Goal"),new e.type.Var("T1"),new e.type.Var("T2"),new e.type.Var("T3"),new e.type.Var("V1"),new e.type.Var("V")])]))],"foldl/7":[new e.type.Rule(new e.type.Term("foldl",[new e.type.Var("_"),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Term("[]",[]),new e.type.Var("V"),new e.type.Var("V")]),null),new e.type.Rule(new e.type.Term("foldl",[new e.type.Var("Goal"),new e.type.Term(".",[new e.type.Var("H1"),new e.type.Var("T1")]),new e.type.Term(".",[new e.type.Var("H2"),new e.type.Var("T2")]),new e.type.Term(".",[new e.type.Var("H3"),new e.type.Var("T3")]),new e.type.Term(".",[new e.type.Var("H4"),new e.type.Var("T4")]),new e.type.Var("V0"),new e.type.Var("V")]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("Goal"),new e.type.Var("H1"),new e.type.Var("H2"),new e.type.Var("H3"),new e.type.Var("H4"),new e.type.Var("V0"),new e.type.Var("V1")]),new e.type.Term("foldl",[new e.type.Var("Goal"),new e.type.Var("T1"),new e.type.Var("T2"),new e.type.Var("T3"),new e.type.Var("T4"),new e.type.Var("V1"),new e.type.Var("V")])]))],"select/3":[new e.type.Rule(new e.type.Term("select",[new e.type.Var("E"),new e.type.Term(".",[new e.type.Var("E"),new e.type.Var("Xs")]),new e.type.Var("Xs")]),null),new e.type.Rule(new e.type.Term("select",[new e.type.Var("E"),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Ys")])]),new e.type.Term("select",[new e.type.Var("E"),new e.type.Var("Xs"),new e.type.Var("Ys")]))],"sum_list/2":[new e.type.Rule(new e.type.Term("sum_list",[new e.type.Term("[]",[]),new e.type.Num(0,!1)]),null),new e.type.Rule(new e.type.Term("sum_list",[new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Var("S")]),new e.type.Term(",",[new e.type.Term("sum_list",[new e.type.Var("Xs"),new e.type.Var("Y")]),new e.type.Term("is",[new e.type.Var("S"),new e.type.Term("+",[new e.type.Var("X"),new e.type.Var("Y")])])]))],"max_list/2":[new e.type.Rule(new e.type.Term("max_list",[new e.type.Term(".",[new e.type.Var("X"),new e.type.Term("[]",[])]),new e.type.Var("X")]),null),new e.type.Rule(new e.type.Term("max_list",[new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Var("S")]),new e.type.Term(",",[new e.type.Term("max_list",[new e.type.Var("Xs"),new e.type.Var("Y")]),new e.type.Term(";",[new e.type.Term(",",[new e.type.Term(">=",[new e.type.Var("X"),new e.type.Var("Y")]),new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("S"),new e.type.Var("X")]),new e.type.Term("!",[])])]),new e.type.Term("=",[new e.type.Var("S"),new e.type.Var("Y")])])]))],"min_list/2":[new e.type.Rule(new e.type.Term("min_list",[new e.type.Term(".",[new e.type.Var("X"),new e.type.Term("[]",[])]),new e.type.Var("X")]),null),new e.type.Rule(new e.type.Term("min_list",[new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Var("S")]),new e.type.Term(",",[new e.type.Term("min_list",[new e.type.Var("Xs"),new e.type.Var("Y")]),new e.type.Term(";",[new e.type.Term(",",[new e.type.Term("=<",[new e.type.Var("X"),new e.type.Var("Y")]),new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("S"),new e.type.Var("X")]),new e.type.Term("!",[])])]),new e.type.Term("=",[new e.type.Var("S"),new e.type.Var("Y")])])]))],"prod_list/2":[new e.type.Rule(new e.type.Term("prod_list",[new e.type.Term("[]",[]),new e.type.Num(1,!1)]),null),new e.type.Rule(new e.type.Term("prod_list",[new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Var("S")]),new e.type.Term(",",[new e.type.Term("prod_list",[new e.type.Var("Xs"),new e.type.Var("Y")]),new e.type.Term("is",[new e.type.Var("S"),new e.type.Term("*",[new e.type.Var("X"),new e.type.Var("Y")])])]))],"last/2":[new e.type.Rule(new e.type.Term("last",[new e.type.Term(".",[new e.type.Var("X"),new e.type.Term("[]",[])]),new e.type.Var("X")]),null),new e.type.Rule(new e.type.Term("last",[new e.type.Term(".",[new e.type.Var("_"),new e.type.Var("Xs")]),new e.type.Var("X")]),new e.type.Term("last",[new e.type.Var("Xs"),new e.type.Var("X")]))],"prefix/2":[new e.type.Rule(new e.type.Term("prefix",[new e.type.Var("Part"),new e.type.Var("Whole")]),new e.type.Term("append",[new e.type.Var("Part"),new e.type.Var("_"),new e.type.Var("Whole")]))],"nth0/3":[new e.type.Rule(new e.type.Term("nth0",[new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("var",[new e.type.Var("X")]),new e.type.Term("nth",[new e.type.Num(0,!1),new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("_")])]),new e.type.Term(",",[new e.type.Term(">=",[new e.type.Var("X"),new e.type.Num(0,!1)]),new e.type.Term(",",[new e.type.Term("nth",[new e.type.Num(0,!1),new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("_")]),new e.type.Term("!",[])])])]))],"nth1/3":[new e.type.Rule(new e.type.Term("nth1",[new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("var",[new e.type.Var("X")]),new e.type.Term("nth",[new e.type.Num(1,!1),new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("_")])]),new e.type.Term(",",[new e.type.Term(">",[new e.type.Var("X"),new e.type.Num(0,!1)]),new e.type.Term(",",[new e.type.Term("nth",[new e.type.Num(1,!1),new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("_")]),new e.type.Term("!",[])])])]))],"nth0/4":[new e.type.Rule(new e.type.Term("nth0",[new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("W")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("var",[new e.type.Var("X")]),new e.type.Term("nth",[new e.type.Num(0,!1),new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("W")])]),new e.type.Term(",",[new e.type.Term(">=",[new e.type.Var("X"),new e.type.Num(0,!1)]),new e.type.Term(",",[new e.type.Term("nth",[new e.type.Num(0,!1),new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("W")]),new e.type.Term("!",[])])])]))],"nth1/4":[new e.type.Rule(new e.type.Term("nth1",[new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("W")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("var",[new e.type.Var("X")]),new e.type.Term("nth",[new e.type.Num(1,!1),new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("W")])]),new e.type.Term(",",[new e.type.Term(">",[new e.type.Var("X"),new e.type.Num(0,!1)]),new e.type.Term(",",[new e.type.Term("nth",[new e.type.Num(1,!1),new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z"),new e.type.Var("W")]),new e.type.Term("!",[])])])]))],"nth/5":[new e.type.Rule(new e.type.Term("nth",[new e.type.Var("N"),new e.type.Var("N"),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Var("X"),new e.type.Var("Xs")]),null),new e.type.Rule(new e.type.Term("nth",[new e.type.Var("N"),new e.type.Var("O"),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Xs")]),new e.type.Var("Y"),new e.type.Term(".",[new e.type.Var("X"),new e.type.Var("Ys")])]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("M"),new e.type.Term("+",[new e.type.Var("N"),new e.type.Num(1,!1)])]),new e.type.Term("nth",[new e.type.Var("M"),new e.type.Var("O"),new e.type.Var("Xs"),new e.type.Var("Y"),new e.type.Var("Ys")])]))],"length/2":function(g,V,S){var w=S.args[0],l=S.args[1];if(e.type.is_variable(l)||e.type.is_integer(l))if(e.type.is_integer(l)&&l.value<0)g.throw_error(e.error.domain("not_less_than_zero",l,S.indicator));else{if(!e.type.is_variable(l)){for(var m=0,v=w;e.type.is_term(v)&&"./2"==v.indicator;)m++,v=v.args[1];if(!e.type.is_variable(v)&&!e.type.is_empty_list(v)||e.type.is_integer(l)&&m>l)return}var b=new e.type.Term("length",[w,new e.type.Num(0,!1),l]);e.type.is_integer(l)&&(b=new e.type.Term(",",[b,new e.type.Term("!",[])])),g.prepend([new e.type.State(V.goal.replace(b),V.substitution,V)])}else g.throw_error(e.error.type("integer",l,S.indicator))},"length/3":[new e.type.Rule(new e.type.Term("length",[new e.type.Term("[]",[]),new e.type.Var("N"),new e.type.Var("N")]),null),new e.type.Rule(new e.type.Term("length",[new e.type.Term(".",[new e.type.Var("_"),new e.type.Var("X")]),new e.type.Var("A"),new e.type.Var("N")]),new e.type.Term(",",[new e.type.Term("succ",[new e.type.Var("A"),new e.type.Var("B")]),new e.type.Term("length",[new e.type.Var("X"),new e.type.Var("B"),new e.type.Var("N")])]))],"replicate/3":function(g,V,S){var w=S.args[0],l=S.args[1],m=S.args[2];if(e.type.is_variable(l))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_integer(l))if(l.value<0)g.throw_error(e.error.domain("not_less_than_zero",l,S.indicator));else if(e.type.is_variable(m)||e.type.is_list(m)){for(var v=new e.type.Term("[]"),b=0;b<l.value;b++)v=new e.type.Term(".",[w,v]);g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[v,m])),V.substitution,V)])}else g.throw_error(e.error.type("list",m,S.indicator));else g.throw_error(e.error.type("integer",l,S.indicator))},"msort/2":function(g,V,S){var w=S.args[0],l=S.args[1];if(e.type.is_variable(w))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_variable(l)||e.type.is_fully_list(l)){for(var m=[],v=w;"./2"===v.indicator;)m.push(v.args[0]),v=v.args[1];if(e.type.is_variable(v))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_empty_list(v)){for(var b=m.sort(e.compare),C=new e.type.Term("[]"),L=b.length-1;L>=0;L--)C=new e.type.Term(".",[b[L],C]);g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[C,l])),V.substitution,V)])}else g.throw_error(e.error.type("list",w,S.indicator))}else g.throw_error(e.error.type("list",l,S.indicator))},"take/3":function(g,V,S){var w=S.args[0],l=S.args[1],m=S.args[2];if(e.type.is_variable(l)||e.type.is_variable(w))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_list(l))if(e.type.is_integer(w))if(e.type.is_variable(m)||e.type.is_list(m)){for(var v=w.value,b=[],C=l;v>0&&"./2"===C.indicator;)b.push(C.args[0]),C=C.args[1],v--;if(0===v){var L=new e.type.Term("[]");for(v=b.length-1;v>=0;v--)L=new e.type.Term(".",[b[v],L]);g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[L,m])),V.substitution,V)])}}else g.throw_error(e.error.type("list",m,S.indicator));else g.throw_error(e.error.type("integer",w,S.indicator));else g.throw_error(e.error.type("list",l,S.indicator))},"drop/3":function(g,V,S){var w=S.args[0],l=S.args[1],m=S.args[2];if(e.type.is_variable(l)||e.type.is_variable(w))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_list(l))if(e.type.is_integer(w))if(e.type.is_variable(m)||e.type.is_list(m)){for(var v=w.value,b=[],C=l;v>0&&"./2"===C.indicator;)b.push(C.args[0]),C=C.args[1],v--;0===v&&g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[C,m])),V.substitution,V)])}else g.throw_error(e.error.type("list",m,S.indicator));else g.throw_error(e.error.type("integer",w,S.indicator));else g.throw_error(e.error.type("list",l,S.indicator))},"reverse/2":function(g,V,S){var w=S.args[0],l=S.args[1],m=e.type.is_instantiated_list(w),v=e.type.is_instantiated_list(l);if(e.type.is_variable(w)&&e.type.is_variable(l))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_variable(w)||e.type.is_fully_list(w))if(e.type.is_variable(l)||e.type.is_fully_list(l))if(m||v){for(var b=m?w:l,C=new e.type.Term("[]",[]);"./2"===b.indicator;)C=new e.type.Term(".",[b.args[0],C]),b=b.args[1];g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[C,m?l:w])),V.substitution,V)])}else g.throw_error(e.error.instantiation(S.indicator));else g.throw_error(e.error.type("list",l,S.indicator));else g.throw_error(e.error.type("list",w,S.indicator))},"list_to_set/2":function(g,V,S){var w=S.args[0],l=S.args[1];if(e.type.is_variable(w))g.throw_error(e.error.instantiation(S.indicator));else{for(var m=w,v=[];"./2"===m.indicator;)v.push(m.args[0]),m=m.args[1];if(e.type.is_variable(m))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_term(m)&&"[]/0"===m.indicator){for(var L,b=[],C=new e.type.Term("[]",[]),R=0;R<v.length;R++){L=!1;for(var X=0;X<b.length&&!L;X++)L=0===e.compare(v[R],b[X]);L||b.push(v[R])}for(R=b.length-1;R>=0;R--)C=new e.type.Term(".",[b[R],C]);g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[l,C])),V.substitution,V)])}else g.throw_error(e.error.type("list",w,S.indicator))}}}},k=["append/2","append/3","member/2","permutation/2","maplist/2","maplist/3","maplist/4","maplist/5","maplist/6","maplist/7","maplist/8","include/3","exclude/3","foldl/4","foldl/5","foldl/6","foldl/7","sum_list/2","max_list/2","min_list/2","prod_list/2","last/2","prefix/2","nth0/3","nth1/3","nth0/4","nth1/4","length/2","replicate/3","select/3","msort/2","take/3","drop/3","reverse/2","list_to_set/2"],E=function(){return{meta_predicates:{"exclude/3":new e.type.Term("exclude",[new e.type.Num(1,!1),new e.type.Term("+"),new e.type.Term("-")]),"foldl/4":new e.type.Term("foldl",[new e.type.Num(3,!1),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("-")]),"foldl/5":new e.type.Term("foldl",[new e.type.Num(4,!1),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("-")]),"foldl/6":new e.type.Term("foldl",[new e.type.Num(5,!1),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("-")]),"foldl/7":new e.type.Term("foldl",[new e.type.Num(6,!1),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("-")]),"include/3":new e.type.Term("include",[new e.type.Num(1,!1),new e.type.Term("+"),new e.type.Term("-")]),"maplist/2":new e.type.Term("maplist",[new e.type.Num(1,!1),new e.type.Term("?")]),"maplist/3":new e.type.Term("maplist",[new e.type.Num(2,!1),new e.type.Term("?"),new e.type.Term("?")]),"maplist/4":new e.type.Term("maplist",[new e.type.Num(3,!1),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?")]),"maplist/5":new e.type.Term("maplist",[new e.type.Num(4,!1),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?")]),"maplist/6":new e.type.Term("maplist",[new e.type.Num(5,!1),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?")]),"maplist/7":new e.type.Term("maplist",[new e.type.Num(6,!1),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?")]),"maplist/8":new e.type.Term("maplist",[new e.type.Num(7,!1),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?"),new e.type.Term("?")])}}};typeof module<"u"?module.exports=function(g){new(e=g).type.Module("lists",M(),k,E())}:new e.type.Module("lists",M(),k,E())}(pl),function(e){var M=function(){return{"get_seed/1":function(V,S,w){var l=w.args[0];if(e.type.is_variable(l)||e.type.is_integer(l)){var m=V.get_random_generator().get_seed();V.prepend([new e.type.State(S.goal.replace(new e.type.Term("=",[new e.type.Num(m,!1),l])),S.substitution,S)])}else V.throw_error(e.error.type("integer",l,w.indicator))},"set_seed/1":function(V,S,w){var l=w.args[0];e.type.is_variable(l)?V.throw_error(e.error.instantiation(w.indicator)):e.type.is_integer(l)?(V.get_random_generator().set_seed(l.value),V.success(S)):V.throw_error(e.error.type("integer",l,w.indicator))},"maybe/0":function(V,S,w){V.get_random_generator().next()<.5&&V.success(S)},"maybe/1":function(V,S,w){var l=w.args[0];V.get_random_generator().next()<l.value&&V.success(S)},"random/1":function(V,S,w){var l=w.args[0];if(e.type.is_variable(l)||e.type.is_number(l)){var m=V.get_random_generator().next();V.prepend([new e.type.State(S.goal.replace(new e.type.Term("=",[l,new e.type.Num(m,!0)])),S.substitution,S)])}else V.throw_error(e.error.type("number",l,w.indicator))},"random/3":function(V,S,w){var l=w.args[0],m=w.args[1],v=w.args[2];if(e.type.is_variable(l)||e.type.is_variable(m))V.throw_error(e.error.instantiation(w.indicator));else if(e.type.is_number(l))if(e.type.is_number(m))if(e.type.is_variable(v)||e.type.is_number(v)){if(l.value<m.value){var b=l.is_float||m.is_float,C=l.value+V.get_random_generator().next()*(m.value-l.value);b||(C=Math.floor(C)),V.prepend([new e.type.State(S.goal.replace(new e.type.Term("=",[v,new e.type.Num(C,b)])),S.substitution,S)])}}else V.throw_error(e.error.type("number",v,w.indicator));else V.throw_error(e.error.type("number",m,w.indicator));else V.throw_error(e.error.type("number",l,w.indicator))},"random_between/3":function(V,S,w){var l=w.args[0],m=w.args[1],v=w.args[2];if(e.type.is_variable(l)||e.type.is_variable(m))V.throw_error(e.error.instantiation(w.indicator));else if(e.type.is_integer(l))if(e.type.is_integer(m))if(e.type.is_variable(v)||e.type.is_integer(v)){if(l.value<m.value){var b=Math.floor(l.value+V.get_random_generator().next()*(m.value-l.value+1));V.prepend([new e.type.State(S.goal.replace(new e.type.Term("=",[v,new e.type.Num(b,!1)])),S.substitution,S)])}}else V.throw_error(e.error.type("integer",v,w.indicator));else V.throw_error(e.error.type("integer",m,w.indicator));else V.throw_error(e.error.type("integer",l,w.indicator))},"random_member/2":function(V,S,w){var l=w.args[0],m=w.args[1];if(e.type.is_variable(m))V.throw_error(e.error.instantiation(w.indicator));else{for(var v=[],b=m;"./2"===b.indicator;)v.push(b.args[0]),b=b.args[1];if(v.length>0){var C=Math.floor(V.get_random_generator().next()*v.length);V.prepend([new e.type.State(S.goal.replace(new e.type.Term("=",[l,v[C]])),S.substitution,S)])}}},"random_permutation/2":function(V,S,w){var l,m=w.args[0],v=w.args[1],b=e.type.is_instantiated_list(m),C=e.type.is_instantiated_list(v);if(e.type.is_variable(m)&&e.type.is_variable(v)||!b&&!C)V.throw_error(e.error.instantiation(w.indicator));else if(e.type.is_variable(m)||e.type.is_fully_list(m))if(e.type.is_variable(v)||e.type.is_fully_list(v)){for(var L=b?m:v,R=[];"./2"===L.indicator;)R.push(L.args[0]),L=L.args[1];for(l=0;l<R.length;l++){var X=Math.floor(V.get_random_generator().next()*R.length),te=R[l];R[l]=R[X],R[X]=te}var I=new e.type.Term("[]",[]);for(l=R.length-1;l>=0;l--)I=new e.type.Term(".",[R[l],I]);V.prepend([new e.type.State(S.goal.replace(new e.type.Term("=",[I,b?v:m])),S.substitution,S)])}else V.throw_error(e.error.type("list",v,w.indicator));else V.throw_error(e.error.type("list",m,w.indicator))}}},k=["get_seed/1","set_seed/1","maybe/0","maybe/1","random/1","random/3","random_between/3","random_member/2","random_permutation/2"],E=function(V){this.set_seed(V)};E.prototype.next=function(){var V=this.get_seed()+1831565813;return this.set_seed(V),V=Math.imul(V^V>>>15,1|V),(((V^=V+Math.imul(V^V>>>7,61|V))^V>>>14)>>>0)/4294967296},E.prototype.set_seed=function(V){this.seed=V},E.prototype.get_seed=function(){return this.seed};var g=function(V){V.type.Session.prototype.get_random_generator=function(){return this.random_generator||(this.random_generator=new E(Date.now())),this.random_generator},V.type.Thread.prototype.get_random_generator=function(){return this.session.get_random_generator()}};typeof module<"u"?module.exports=function(V){e=V,g(V),new e.type.Module("random",M(),k)}:(g(e),new e.type.Module("random",M(),k))}(pl),function(e){var M=function(){return{"time/1":[new e.type.Rule(new e.type.Term("time",[new e.type.Var("Goal")]),new e.type.Term(",",[new e.type.Term("get_time",[new e.type.Var("T0")]),new e.type.Term(",",[new e.type.Term("call",[new e.type.Var("Goal")]),new e.type.Term(",",[new e.type.Term("get_time",[new e.type.Var("T1")]),new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("T"),new e.type.Term("-",[new e.type.Var("T1"),new e.type.Var("T0")])]),new e.type.Term("write",[new e.type.Var("T")])])])])])]))],"statistics/0":function(g,V,S){var w="% Tau Prolog statistics\n";for(var l in E)w+="%%% "+l+": "+E[l](g).toString()+"\n";g.prepend([new e.type.State(V.goal.replace(new e.type.Term("write",[new e.type.Term(w)])),V.substitution,V)])},"statistics/2":function(g,V,S){var w=S.args[0],l=S.args[1];if(e.type.is_variable(w)||e.type.is_atom(w))if(e.type.is_variable(w)||void 0!==E[w.id])if(e.type.is_variable(w)){var v=[];for(var b in E){var m=E[b](g);v.push(new e.type.State(V.goal.replace(new e.type.Term(",",[new e.type.Term("=",[w,new e.type.Term(b,[])]),new e.type.Term("=",[l,m])])),V.substitution,V))}g.prepend(v)}else m=E[w.id](g),g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[l,m])),V.substitution,V)]);else g.throw_error(e.error.domain("statistics_key",w,S.indicator));else g.throw_error(e.error.type("atom",w,S.indicator))}}},k=["time/1","statistics/0","statistics/2"],E={atoms:function(g){return new e.type.Num(e.statistics.getCountTerms(),!1)},clauses:function(g){var V=0;for(var S in g.session.rules)g.session.rules[S]instanceof Array&&(V+=g.session.rules[S].length);for(var w=0;w<g.session.modules.length;w++)for(var l=e.module[g.session.modules[w]],m=0;m<l.exports.length;m++){var v=l.rules[l.exports[m]];v instanceof Array&&(V+=v.length)}return new e.type.Num(V,!1)},cputime:function(g){return new e.type.Num(g.cpu_time,!1)},walltime:function(g){return new e.type.Num(Date.now(),!1)},epoch:function(g){return new e.type.Num(g.epoch,!1)},inferences:function(g){return new e.type.Num(g.total_steps,!1)},modules:function(g){var V=0;for(var S in g.session.modules)V++;return new e.type.Num(V,!1)},predicates:function(g){for(var V=Object.keys(g.session.rules).length,S=0;S<g.session.modules.length;S++)V+=e.module[g.session.modules[S]].exports.length;return new e.type.Num(V,!1)},threads:function(g){return new e.type.Num(g.session.total_threads,!1)}};typeof module<"u"?module.exports=function(g){new(e=g).type.Module("statistics",M(),k)}:new e.type.Module("statistics",M(),k)}(pl),function(e){var M=function(){return{"bind/4":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2],L=m.args[3];if(e.type.is_variable(v)||e.type.is_variable(b)&&e.type.is_variable(L))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b))if(e.type.is_variable(C)||e.type.is_dom_event_object(C))if(e.type.is_variable(L)){if(void 0!==(C=v.object.tau_events?v.object.tau_events[b.id]:void 0)){for(var ce=[],we=0;we<C.length;we++)ce.push(new e.type.State(l.goal.replace(new e.type.Term("=",[L,C[we].goal.rename(w)])),l.substitution,l));w.prepend(ce)}}else{var R=new e.type.Thread(w.session),X=new e.type.DOMEvent(b.id),te={};e.type.is_variable(C)&&(te[C.id]=X);var I=new e.type.Substitution(te),re=function(_){X.event=_,R.add_goal(L.apply(I)),R.answer(w.__calls[0])};S.add(v.object,b.id,re),v.object.tau_events=void 0===v.object.tau_events?{}:v.object.tau_events,void 0===v.object.tau_events[b.id]&&(v.object.tau_events[b.id]=[]),v.object.tau_events[b.id].push({goal:L,fn:re}),w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[X,C])),l.substitution,l)])}else w.throw_error(e.error.type("DOMEventObject",b,m.indicator));else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"unbind/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v)||e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b)){if(v.object.tau_events&&v.object.tau_events[b.id]){for(var C=v.object.tau_events[b.id],L=0;L<C.length;L++)S.remove(v.object,b.id,C[L].fn);delete v.object.tau_events[b.id]}w.success(l)}else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"unbind/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2];if(e.type.is_variable(v)||e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b))if(e.type.is_variable(C)||e.type.is_term(C)){if(!e.type.is_variable(C)){if(v.object.tau_events&&v.object.tau_events[b.id]){for(var L=v.object.tau_events[b.id],R=[],X=0;X<L.length;X++)null!==e.unify(L[X].goal,C)?S.remove(v.object,b.id,L[X].fn):R.push(L[X]);v.object.tau_events[b.id]=R}w.success(l)}}else w.throw_error(e.error.type("term",C,m.indicator));else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"event_property/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2];if(e.type.is_variable(v)||e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_event_object(v))if(e.type.is_atom(b))if(e.type.is_variable(C)||e.type.is_atomic(C)){if(null!==v.event&&v.event[b.id]){var L=v.event[b.id];L=isNaN(L)?new e.type.Term(L,[]):new e.type.Num(L),w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[L,C])),l.substitution,l)])}}else w.throw_error(e.error.type("atomic",C,m.indicator));else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("DOMEventObject",v,m.indicator))},"prevent_default/1":function(w,l,m){var v=m.args[0];e.type.is_variable(v)?w.throw_error(e.error.instantiation(m.indicator)):e.type.is_dom_event_object(v)?null!==v.event&&(v.event.preventDefault(),w.success(l)):w.throw_error(e.error.type("eventObject",v,m.indicator))},"hide/1":function(w,l,m){var v=m.args[0];if(e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v)){var b=document.defaultView.getComputedStyle(v.object,"").display;void 0!==b&&"none"!==b&&(v.object.tau_display=b),v.object.style.display="none",w.success(l)}else w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"show/1":function(w,l,m){var v=m.args[0];e.type.is_variable(v)?w.throw_error(e.error.instantiation(m.indicator)):e.type.is_dom_object(v)?(v.object.style.display=void 0!==v.object.tau_display?v.object.tau_display:"block",w.success(l)):w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"toggle/1":[new e.type.Rule(new e.type.Term("toggle",[new e.type.Var("X")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term(",",[new e.type.Term("style",[new e.type.Var("X"),new e.type.Term("display",[]),new e.type.Var("Y")]),new e.type.Term("=",[new e.type.Var("Y"),new e.type.Term("none",[])])]),new e.type.Term("show",[new e.type.Var("X")])]),new e.type.Term("hide",[new e.type.Var("X")])]))],"document/1":function(w,l,m){var v=m.args[0],b=new e.type.DOM(document);w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[v,b])),l.substitution,l)])},"head/1":function(w,l,m){var v=m.args[0],b=new e.type.DOM(document.head);w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[v,b])),l.substitution,l)])},"body/1":function(w,l,m){var v=m.args[0],b=new e.type.DOM(document.body);w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[v,b])),l.substitution,l)])},"get_by_id/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_atom(v))if(e.type.is_variable(b)||e.type.is_dom_object(b)){var C=document.getElementById(v.id);if(C){var L=new e.type.DOM(C);w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[L,b])),l.substitution,l)])}}else w.throw_error(e.error.type("HTMLObject",b,m.indicator));else w.throw_error(e.error.type("atom",v,m.indicator))},"get_by_class/2":[new e.type.Rule(new e.type.Term("get_by_class",[new e.type.Var("Class"),new e.type.Var("Html")]),new e.type.Term(",",[new e.type.Term("document",[new e.type.Var("D")]),new e.type.Term("get_by_class",[new e.type.Var("D"),new e.type.Var("Class"),new e.type.Var("Html")])]))],"get_by_class/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2];if(e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_atom(b))if(e.type.is_variable(C)||e.type.is_dom_object(C)){var L=v.object.getElementsByClassName(b.id);if(L){for(var R=[],X=0;X<L.length;X++){var te=new e.type.DOM(L[X]);R.push(new e.type.State(l.goal.replace(new e.type.Term("=",[te,C])),l.substitution,l))}w.prepend(R)}}else w.throw_error(e.error.type("HTMLObject",C,m.indicator));else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"get_by_tag/2":[new e.type.Rule(new e.type.Term("get_by_tag",[new e.type.Var("Tag"),new e.type.Var("Html")]),new e.type.Term(",",[new e.type.Term("document",[new e.type.Var("D")]),new e.type.Term("get_by_tag",[new e.type.Var("D"),new e.type.Var("Tag"),new e.type.Var("Html")])]))],"get_by_tag/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2];if(e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_atom(b))if(e.type.is_variable(C)||e.type.is_dom_object(C)){var L=v.object.getElementsByTagName(b.id);if(L){for(var R=[],X=0;X<L.length;X++){var te=new e.type.DOM(L[X]);R.push(new e.type.State(l.goal.replace(new e.type.Term("=",[te,C])),l.substitution,l))}w.prepend(R)}}else w.throw_error(e.error.type("HTMLObject",C,m.indicator));else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"get_by_name/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_atom(v))if(e.type.is_variable(b)||e.type.is_dom_object(b)){var C=document.getElementsByName(v.id);if(C){for(var L=[],R=0;R<C.length;R++){var X=new e.type.DOM(C[R]);L.push(new e.type.State(l.goal.replace(new e.type.Term("=",[X,b])),l.substitution,l))}w.prepend(L)}}else w.throw_error(e.error.type("HTMLObject",b,m.indicator));else w.throw_error(e.error.type("atom",v,m.indicator))},"get_style/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2];if(e.type.is_variable(v)||e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b)){if(v.object===document)return;var L=document.defaultView.getComputedStyle(v.object,"")[b.id]||"";""===L&&v.object.style[b.id]&&(L=v.object.style[b.id]);var R=V(L);w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[C,R])),l.substitution,l)])}else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",selector,m.indicator))},"set_style/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2],L=g(C),R=e.type.is_ground(C);if(e.type.is_variable(v)||e.type.is_variable(b)||!R)w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b))if(!1===L)w.throw_error(e.error.domain("style_value",C,m.indicator));else{if(v.object===document)return;v.object.style[b.id]=L,w.success(l)}else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",selector,m.indicator))},"style/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2],L=g(C),R=e.type.is_ground(C);if(e.type.is_variable(v)||e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b))if(!e.type.is_variable(C)&&R&&!1===L)w.throw_error(e.error.domain("style_value",C,m.indicator));else{if(v.object===document)return;if(R)v.object.style[b.id]=L,w.success(l);else{var X=document.defaultView.getComputedStyle(v.object,"")[b.id]||"";""===X&&v.object.style[b.id]&&(X=v.object.style[b.id]);var te=V(X);w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[C,te])),l.substitution,l)])}}else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"get_attr/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2];if(e.type.is_variable(v)||e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b)){if(v.object===document)return;var L="value"===b.id?new e.type.Term(v.object.value):V(v.object.getAttribute(b.id));null!=L&&w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[C,L])),l.substitution,l)])}else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",selector,m.indicator))},"set_attr/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2],L=g(C),R=e.type.is_ground(C);if(e.type.is_variable(v)||e.type.is_variable(b)||!R)w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b))if(!1===L)w.throw_error(e.error.domain("attribute_value",C,m.indicator));else{if(v.object===document)return;"value"===b.id?v.object.value=L:v.object.setAttribute(b.id,L),w.success(l)}else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",selector,m.indicator))},"attr/3":function(w,l,m){var v=m.args[0],b=m.args[1],C=m.args[2],L=g(C),R=e.type.is_ground(C);if(e.type.is_variable(v)||e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b))if(!e.type.is_variable(C)&&R&&!1===L)w.throw_error(e.error.domain("attribute_value",C,m.indicator));else{if(v.object===document)return;if(R)"value"===b.id?v.object.value=L:v.object.setAttribute(b.id,L),w.success(l);else{var X="value"===b.id?new e.type.Term(v.object.value):V(v.object.getAttribute(b.id));null!=X&&w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[C,X])),l.substitution,l)])}}else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",selector,m.indicator))},"get_html/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v)){if(v.object===document)return;var C=new e.type.Term(v.object.innerHTML);w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[C,b])),l.substitution,l)])}else session.throw_error(e.error.type("HTMLObject",v,m.indicator))},"set_html/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v)||e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v)){if(v.object===document)return;v.object.innerHTML=e.type.is_atom(b)?b.id:b.toString(),w.success(l)}else session.throw_error(e.error.type("HTMLObject",v,m.indicator))},"html/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else{if(v.object===document)return;if(e.type.is_variable(b)){var C=new e.type.Term(v.object.innerHTML);w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[C,b])),l.substitution,l)])}else v.object.innerHTML=e.type.is_atom(b)?b.id:b.toString(),w.success(l)}},"create/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v)&&e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_variable(v)||e.type.is_atom(v))if(e.type.is_variable(b)||e.type.is_dom_object(b)){if(e.type.is_variable(b)){var C=new e.type.DOM(document.createElement(v.id));w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[b,C])),l.substitution,l)])}else if(e.type.is_variable(b))C=new e.type.DOM(document.createElement(v.id.toLowerCase())),w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[b,C])),l.substitution,l)]);else if(e.type.is_variable(v)){var L=new e.type.Term(b.object.nodeName.toLowerCase());w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[L,v])),l.substitution,l)])}}else w.throw_error(e.error.type("HTMLObject",b,m.indicator));else w.throw_error(e.error.type("atom",v,m.indicator))},"parent_of/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(b)&&e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_variable(b)||e.type.is_dom_object(b))if(e.type.is_variable(v)||e.type.is_dom_object(v))if(e.type.is_variable(v)){for(var C=b.object.children,L=[],R=0;R<C.length;R++)L.push(new e.type.State(l.goal.replace(new e.type.Term("=",[v,new e.type.DOM(C[R])])),l.substitution,l));w.prepend(L)}else v.object.parentNode&&w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[b,new e.type.DOM(v.object.parentNode)])),l.substitution,l)]);else w.throw_error(e.error.type("HTMLObject",v,m.indicator));else w.throw_error(e.error.type("HTMLObject",b,m.indicator))},"sibling/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v)&&e.type.is_variable(b))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_variable(v)||e.type.is_dom_object(v))if(e.type.is_variable(b)||e.type.is_dom_object(b))if(e.type.is_variable(v)&&b.object.previousElementSibling){var C=new e.type.DOM(b.object.previousElementSibling);w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[v,C])),l.substitution,l)])}else!e.type.is_variable(v)&&v.object.nextElementSibling&&(C=new e.type.DOM(v.object.nextElementSibling),w.prepend([new e.type.State(l.goal.replace(new e.type.Term("=",[b,C])),l.substitution,l)]));else w.throw_error(e.error.type("HTMLObject",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"remove/1":function(w,l,m){var v=m.args[0];e.type.is_variable(v)?w.throw_error(e.error.instantiation(m.indicator)):e.type.is_dom_object(v)?v.object.parentNode&&(v.object.parentNode.removeChild(v.object),w.success(l)):w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"insert_after/2":function(w,l,m){var v=m.args[0],b=m.args[1];e.type.is_variable(v)||e.type.is_variable(b)?w.throw_error(e.error.instantiation(m.indicator)):e.type.is_dom_object(v)?e.type.is_dom_object(b)?b.object.parentNode&&(b.object.parentNode.insertBefore(v.object,b.object.nextSibling),w.success(l)):w.throw_error(e.error.type("HTMLObject",b,m.indicator)):w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"insert_before/2":function(w,l,m){var v=m.args[0],b=m.args[1];e.type.is_variable(v)||e.type.is_variable(b)?w.throw_error(e.error.instantiation(m.indicator)):e.type.is_dom_object(v)?e.type.is_dom_object(b)?b.object.parentNode&&(b.object.parentNode.insertBefore(v.object,b.object),w.success(l)):w.throw_error(e.error.type("HTMLObject",b,m.indicator)):w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"prepend_child/2":function(w,l,m){var v=m.args[0],b=m.args[1];e.type.is_variable(v)||e.type.is_variable(b)?w.throw_error(e.error.instantiation(m.indicator)):e.type.is_dom_object(v)?e.type.is_dom_object(b)?(v.object.firstChild?v.object.insertBefore(b.object,v.object.firstChild):v.object.appendChild(b.object),w.success(l)):w.throw_error(e.error.type("HTMLObject",b,m.indicator)):w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"append_child/2":function(w,l,m){var v=m.args[0],b=m.args[1];e.type.is_variable(v)||e.type.is_variable(b)?w.throw_error(e.error.instantiation(m.indicator)):e.type.is_dom_object(v)?e.type.is_dom_object(b)?(v.object.appendChild(b.object),w.success(l)):w.throw_error(e.error.type("HTMLObject",b,m.indicator)):w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"add_class/2":function(w,l,m){var v=m.args[0],b=m.args[1];e.type.is_variable(v)||e.type.is_variable(b)?w.throw_error(e.error.instantiation(m.indicator)):e.type.is_dom_object(v)?e.type.is_atom(b)?(-1===v.object.className.split(" ").indexOf(b.id)&&(v.object.className+=" "+b.id),w.success(l)):w.throw_error(e.error.type("atom",b,m.indicator)):w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"remove_class/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b)||e.type.is_variable(b)){var C=v.object.className.split(" ");if(e.type.is_variable(b)){for(var L=[],R=0;R<C.length;R++)L.push(new e.type.State(l.goal.replace(new e.type.Term(",",[new e.type.Term("=",[b,new e.type.Term(C[R],[])]),new e.type.Term("remove_class",[v,b])])),l.substitution,l));w.prepend(L)}else{var X="";for(R=0;R<C.length;R++)C[R]!==b.id&&(X+=C[R]+" ");v.object.className=X,w.success(l)}}else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",v,m.indicator))},"hasClass/2":function(w,l,m){var v=m.args[0],b=m.args[1];if(e.type.is_variable(v))w.throw_error(e.error.instantiation(m.indicator));else if(e.type.is_dom_object(v))if(e.type.is_atom(b)||e.type.is_variable(b)){var C=v.object.className.split(" ");if(e.type.is_variable(b)){for(var L=[],R=0;R<C.length;R++)L.push(new e.type.State(l.goal.replace(new e.type.Term("=",[b,new e.type.Term(C[R],[])])),l.substitution,l));w.prepend(L)}else-1!==C.indexOf(b.id)&&w.success(l)}else w.throw_error(e.error.type("atom",b,m.indicator));else w.throw_error(e.error.type("HTMLObject",v,m.indicator))}}},k=["document/1","head/1","body/1","show/1","hide/1","toggle/1","create/2","get_by_id/2","get_by_tag/2","get_by_tag/3","get_by_class/2","get_by_class/3","get_by_name/2","attr/3","set_attr/3","get_attr/3","style/3","set_style/3","get_style/3","html/2","set_html/2","get_html/2","parent_of/2","insert_after/2","insert_before/2","append_child/2","prepend_child/2","sibling/2","remove/1","add_class/2","remove_class/2","has_class/2","bind/4","unbind/2","unbind/3","event_property/3","prevent_default/1"],E=function(){return{meta_predicates:{"bind/4":new e.type.Term("bind",[new e.type.Term("+"),new e.type.Term("+"),new e.type.Term("-"),new e.type.Num(0)])}}};function g(w){return null!=w&&(e.type.is_number(w)?w.value:e.type.is_term(w)&&0===w.args.length?w.id:e.type.is_term(w)&&"px/1"===w.indicator&&e.type.is_number(w.args[0])?w.args[0].value.toString()+"px":e.type.is_term(w)&&"%/1"===w.indicator&&e.type.is_number(w.args[0])?w.args[0].value.toString()+"%":e.type.is_term(w)&&"url/1"===w.indicator&&e.type.is_atom(w.args[0])?'url("'+w.args[0].id+'")':!!(e.type.is_term(w)&&"rgb/3"===w.indicator&&e.type.is_integer(w.args[0])&&e.type.is_integer(w.args[1])&&e.type.is_integer(w.args[2]))&&w.toString())}function V(w){if(null!=w){if(/^-?[0-9]*\.?[0-9]*\s*px\s*$/.test(w))return new e.type.Term("px",[new e.type.Num(parseInt(w))]);if(/^-?[0-9]*\.?[0-9]*\s*\%\s*$/.test(w))return new e.type.Term("%",[new e.type.Num(parseFloat(w))]);if(/^url\(["'].*["']\)$/.test(w))return new e.type.Term("url",[new e.type.Term(w.substring(5,w.length-2))]);if(/^rgb\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)\s*$/.test(w)){var l=w.replace("rgb","").replace("(","").replace(")","").split(",");return new e.type.Term("rgb",[new e.type.Num(parseInt(l[0]),!1),new e.type.Num(parseInt(l[1]),!1),new e.type.Num(parseInt(l[2]),!1)])}return new e.type.Term(w.toString(),[])}}e.type.is_dom_object=function(w){return w instanceof e.type.DOM},e.type.order.push(e.type.DOM),e.type.DOM=function(w){this.object=w},e.type.DOM.prototype.toString=function(){return"<html>("+(""!==this.object.id&&void 0!==this.object.id?"#"+this.object.id:this.object.nodeName.toLowerCase().replace("#",""))+")"},e.type.DOM.prototype.clone=function(){return new e.type.DOM(this.object)},e.type.DOM.prototype.equals=function(w){return e.type.is_dom_object(w)&&this.object===w.object},e.type.DOM.prototype.rename=function(w){return this},e.type.DOM.prototype.variables=function(){return[]},e.type.DOM.prototype.apply=function(w){return this},e.type.DOM.prototype.unify=function(w,l){return e.type.is_dom_object(w)&&this.object===w.object?new e.type.Substitution:null},e.type.DOM.prototype.interpret=function(w){return e.error.instantiation(w)},e.type.DOM.prototype.compare=function(w){return this.object===w.object?0:this.object<w.object?-1:this.object>w.object?1:void 0},e.type.DOM.prototype.toJavaScript=function(){return this.object},e.fromJavaScript.test.dom=function(w){return w instanceof HTMLElement},e.fromJavaScript.conversion.dom=function(w){return new e.type.DOM(w)},e.fromJavaScript.test.dom_collection=function(w){return w instanceof HTMLCollection},e.fromJavaScript.conversion.dom_collection=function(w){var l=Array.prototype.slice.call(w,0);return e.fromJavaScript.apply(l)},e.type.DOM.prototype.stream=function(w,l){return"write"===l&&(this.object instanceof HTMLInputElement?this.object.value="":this.object.innerHTML=""),{object:this.object,get:function(m,v){var b;return v>=(b=this.object instanceof HTMLInputElement?this.object.value:this.object.innerHTML).length?"end_of_stream":b.substring(v,v+m)},put:function(m,v){return"end_of_file"===v?(this.object instanceof HTMLInputElement?this.object.value+=m:this.object.innerHTML+=m,!0):"past_end_of_file"===v?null:(this.object instanceof HTMLInputElement?this.object.value=this.object.value.substring(0,v)+m+this.object.value.substring(v+m.length):this.object.innerHTML=this.object.innerHTML.substring(0,v)+m+this.object.innerHTML.substring(v+m.length),!0)},get_byte:function(m){if("end_of_stream"===m)return-1;var b,v=Math.floor(m/2);if((b=this.object instanceof HTMLInputElement?this.object.value.substring(m,m+length):this.object.innerHTML).length<=v)return-1;var C=e.utils.codePointAt(b[Math.floor(m/2)],0);return m%2==0?255&C:C/256>>>0},put_byte:function(m,v){var b;b=this.object instanceof HTMLInputElement?this.object.value:this.object.innerHTML;var C="end_of_stream"===v?b.length:Math.floor(v/2);if(b.length<C)return null;var L=b.length===C?-1:e.utils.codePointAt(b[Math.floor(v/2)],0);return L=v%2==0?(255&(L=L/256>>>0))<<8|255&m:(255&m)<<8|255&(L&=255),b.length===C?b+=e.utils.fromCodePoint(L):b=b.substring(0,C)+e.utils.fromCodePoint(L)+b.substring(C+1),this.object instanceof HTMLInputElement?this.object.value=b:this.object.innerHTML=b,!0},flush:function(){return!0},close:function(){return!0}}},e.type.is_dom_event_object=function(w){return w instanceof e.type.DOMEvent},e.type.order.push(e.type.DOMEvent),e.type.DOMEvent=function(w,l,m){this.type=w,this.event=l||null,this.epoch=m||(new Date).getTime()},e.type.DOMEvent.prototype.toString=function(){return"<event>("+this.type.toLowerCase()+")"},e.type.DOMEvent.prototype.clone=function(){return new e.type.DOMEvent(this.type,this.event,this.epoch)},e.type.DOMEvent.prototype.equals=function(w){return e.type.is_dom_event_object(w)&&this.type===w.type&&this.epoch===w.epoch},e.type.DOMEvent.prototype.rename=function(w){return this},e.type.DOMEvent.prototype.variables=function(){return[]},e.type.DOMEvent.prototype.apply=function(w){return this},e.type.DOMEvent.prototype.unify=function(w,l){return e.type.is_dom_event_object(w)&&this.type===w.type&&this.epoch===w.epoch?new e.type.Substitution:null},e.type.DOMEvent.prototype.interpret=function(w){return e.error.instantiation(w)},e.type.DOMEvent.prototype.compare=function(w){return this.epoch===w.epoch?0:this.epoch<w.epoch?-1:this.epoch>w.epoch?1:void 0},e.type.DOMEvent.prototype.toJavaScript=function(){return this.event},e.fromJavaScript.test.event=function(w){return w instanceof Event},e.fromJavaScript.conversion.event=function(w){return new e.type.DOMEvent(w.type,w)};var w,S=(w={},{add:function(v,b,C){if(void 0!==v.addEventListener)return v.addEventListener(b,C),!0;if(void 0!==v.attachEvent)return v.attachEvent("on"+b,C),!0;var L=v["on"+b],R=[];if(L){if(L.tau_fn_event===w)return-1===L.fns.indexOf(C)&&L.fns.push(C),!0;R.push(L)}return R.push(C),v["on"+b]=function(X){for(var te=0;te<R.length;te++)R[te].call(v,X,v)},v["on"+b].fns=R,v["on"+b].tau_fn_event=w,!0},remove:function(v,b,C){if(v.removeEventListener)return v.removeEventListener(b,C),!0;if(v.detachEvent)return v.detachEvent("on"+b,C),!0;if(v["on"+b]){var L=v["on"+b];if(L!==C){if(L.tau_fn_event===w){for(var R=0;R<L.fns.length;R++)if(L.fns[R]===C){L.fns.splice(R,1);break}return!0}return!1}v["on"+b]=void 0}return!0}});typeof module<"u"?module.exports=function(w){new(e=w).type.Module("dom",M(),k,E())}:new e.type.Module("dom",M(),k,E())}(pl),function(e){var M=function(){return{"global/1":function(g,V,S){g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[S.args[0],e.fromJavaScript.apply(e.__env)])),V.substitution,V)])},"apply/3":[new e.type.Rule(new e.type.Term("apply",[new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z")]),new e.type.Term(",",[new e.type.Term("global",[new e.type.Var("G")]),new e.type.Term("apply",[new e.type.Var("G"),new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z")])]))],"apply/4":function(g,V,S){var w=S.args[0],l=S.args[1],m=S.args[2],v=S.args[3];e.type.is_variable(w)||e.type.is_variable(l)||e.type.is_variable(m)?g.throw_error(e.error.instantiation(S.indicator)):e.type.is_atom(l)||e.type.is_js_object(l)&&"function"==typeof l.value?e.type.is_list(m)||g.throw_error(e.error.type("list",m,S.indicator)):g.throw_error(e.error.type("atom_or_JSValueFUNCTION",l,S.indicator));var b=w.toJavaScript(),C=e.type.is_atom(l)?b[l.id]:l.toJavaScript();if("function"==typeof C){for(var R,L=m,X=[];"./2"===L.indicator;){if(void 0===(R=L.args[0].toJavaScript()))return void g.throw_error(e.error.domain("javascript_object",L.args[0],S.indicator));X.push(R),L=L.args[1]}if(e.type.is_variable(L))return void g.throw_error(e.error.instantiation(S.indicator));if("[]/0"!==L.indicator)return void g.throw_error(e.error.type("list",m,S.indicator));var te;try{te=C.apply(b,X)}catch(I){return void g.throw_error(e.error.javascript(I.toString(),S.indicator))}te=e.fromJavaScript.apply(te),g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[te,v])),V.substitution,V)])}},"prop/2":[new e.type.Rule(new e.type.Term("prop",[new e.type.Var("X"),new e.type.Var("Y")]),new e.type.Term("get_prop",[new e.type.Var("X"),new e.type.Var("Y")]))],"prop/3":[new e.type.Rule(new e.type.Term("prop",[new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z")]),new e.type.Term("get_prop",[new e.type.Var("X"),new e.type.Var("Y"),new e.type.Var("Z")]))],"get_prop/2":[new e.type.Rule(new e.type.Term("get_prop",[new e.type.Var("X"),new e.type.Var("Y")]),new e.type.Term(",",[new e.type.Term("global",[new e.type.Var("G")]),new e.type.Term("get_prop",[new e.type.Var("G"),new e.type.Var("X"),new e.type.Var("Y")])]))],"get_prop/3":function(g,V,S){var w=S.args[0],l=S.args[1],m=S.args[2];if(e.type.is_variable(w))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_variable(l)||e.type.is_atom(l))if(e.type.is_atom(l))void 0!==(v=w.toJavaScript()[l.id])&&(v=e.fromJavaScript.apply(v),g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[v,m])),V.substitution,V)]));else{var v=w.toJavaScript(),b=[];for(var C in v)if(v.hasOwnProperty(C)){var L=e.fromJavaScript.apply(v[C]);b.push(new e.type.State(V.goal.replace(new e.type.Term(",",[new e.type.Term("=",[L,m]),new e.type.Term("=",[new e.type.Term(C,[]),l])])),V.substitution,V))}g.prepend(b)}else g.throw_error(e.error.type("atom",l,S.indicator))},"set_prop/2":[new e.type.Rule(new e.type.Term("set_prop",[new e.type.Var("X"),new e.type.Var("Y")]),new e.type.Term(",",[new e.type.Term("global",[new e.type.Var("G")]),new e.type.Term("set_prop",[new e.type.Var("G"),new e.type.Var("X"),new e.type.Var("Y")])]))],"set_prop/3":function(g,V,S){var w=S.args[0],l=S.args[1],m=S.args[2];if(e.type.is_variable(w)||e.type.is_variable(l))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_atom(l)){var v=w.toJavaScript();void 0!==v&&(v[l.id]=m.toJavaScript(),g.success(V))}else g.throw_error(e.error.type("atom",l,S.indicator))},"new/3":function(g,V,S){var w=S.args[0],l=S.args[1],m=S.args[2];if(e.type.is_variable(w)||e.type.is_variable(l))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_js_object(w))if(e.type.is_list(l)){for(var v=[],b=l;e.type.is_term(b)&&"./2"===b.indicator;)v.push(b.args[0].toJavaScript()),b=b.args[1];if(!e.type.is_term(b)||"[]/0"!==b.indicator)return void g.throw_error(e.error.type("list",l,S.indicator));try{var C=e.fromJavaScript.apply(new(Function.prototype.bind.apply(w.value,[null].concat(v))));g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[m,C])),V.substitution,V)])}catch(L){g.throw_error(e.error.javascript(L.toString(),S.indicator))}}else g.throw_error(e.error.type("list",l,S.indicator));else g.throw_error(e.error.type("JsValueOBJECT",l,S.indicator))},"json_prolog/2":function(g,V,S){var w=S.args[0],l=S.args[1];if(e.type.is_variable(w)&&e.type.is_variable(l))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_variable(w)||e.type.is_js_object(w)&&"object"==typeof w.value)if(e.type.is_variable(l)||e.type.is_list(l))if(e.type.is_variable(l)){var m=e.fromJavaScript.apply(w.value,!0);g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[l,m])),V.substitution,V)])}else{var v=new e.type.JSValue(l.toJavaScript());g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[w,v])),V.substitution,V)])}else g.throw_error(e.error.type("list",l,S.indicator));else g.throw_error(e.error.type("JsValueOBJECT",w,S.indicator))},"json_atom/2":function(g,V,S){var w=S.args[0],l=S.args[1];if(e.type.is_variable(w)&&e.type.is_variable(l))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_variable(w)||e.type.is_js_object(w)&&"object"==typeof w.value)if(e.type.is_variable(l)||e.type.is_atom(l))if(e.type.is_variable(l))try{var m=new e.type.Term(JSON.stringify(w.value),[]);g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[l,m])),V.substitution,V)])}catch{}else try{var v=e.fromJavaScript.apply(JSON.parse(l.id));g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[w,v])),V.substitution,V)])}catch{}else g.throw_error(e.error.type("atom",l,S.indicator));else g.throw_error(e.error.type("JsValueOBJECT",w,S.indicator))},"ajax/3":[new e.type.Rule(new e.type.Term("ajax",[new e.type.Var("Method"),new e.type.Var("URL"),new e.type.Var("Response")]),new e.type.Term("ajax",[new e.type.Var("Method"),new e.type.Var("URL"),new e.type.Var("Response"),new e.type.Term("[]",[])]))],"ajax/4":function(g,V,S){var w=S.args[0],l=S.args[1],m=S.args[2],v=S.args[3];if(e.type.is_variable(l)||e.type.is_variable(w)||e.type.is_variable(v))g.throw_error(e.error.instantiation(S.indicator));else if(e.type.is_atom(l))if(e.type.is_atom(w))if(e.type.is_list(v))if(-1===["connect","delete","get","head","options","patch","post","put","trace"].indexOf(w.id))g.throw_error(e.error.domain("http_method",w,S.indicator));else{for(var b=v,C=null,L=0,R="false",X="true",te=null,I=[],re=new FormData,ce=null,we=null;e.type.is_term(b)&&"./2"===b.indicator;){var _=b.args[0];if(!e.type.is_term(_)||1!==_.args.length)return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));var pe=_.args[0];if("type/1"===_.indicator){if(!e.type.is_atom(pe)||"text"!==pe.id&&"json"!==pe.id&&"document"!==pe.id)return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));C=pe.id}else if("user/1"===_.indicator){if(!e.type.is_atom(pe))return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));ce=pe.id}else if("password/1"===_.indicator){if(!e.type.is_atom(pe))return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));we=pe.id}else if("timeout/1"===_.indicator){if(!e.type.is_integer(pe)||pe.value<0)return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));L=pe.value}else if("async/1"===_.indicator){if(!e.type.is_atom(pe)||"true"!==pe.id&&"false"!==pe.id)return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));X=pe.id}else if("credentials/1"===_.indicator){if(!e.type.is_atom(pe)||"true"!==pe.id&&"false"!==pe.id)return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));R=pe.id}else if("mime/1"===_.indicator){if(!e.type.is_atom(pe))return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));te=pe.id}else if("headers/1"===_.indicator){if(!e.type.is_list(pe))return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));for(var me=pe;e.type.is_term(me)&&"./2"===me.indicator;){var ze=me.args[0];if(!e.type.is_term(ze)||"-/2"!==ze.indicator||!e.type.is_atom(ze.args[0])||!e.type.is_atom(ze.args[1]))return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));I.push({header:ze.args[0].id,value:ze.args[1].id}),me=me.args[1]}if(e.type.is_variable(me))return void g.throw_error(e.error.instantiation(S.indicator));if(!e.type.is_term(me)||"[]/0"!==me.indicator)return void g.throw_error(e.error.domain("ajax_option",_,S.indicator))}else{if("body/1"!==_.indicator)return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));if(!(e.type.is_list(pe)||void 0!==e.type.is_dom_object&&e.type.is_dom_object(pe)||e.type.is_atom(pe)))return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));if(e.type.is_list(pe)){for(me=pe;e.type.is_term(me)&&"./2"===me.indicator;){var ut=me.args[0];if(!e.type.is_term(ut)||"-/2"!==ut.indicator||!e.type.is_atom(ut.args[0])||!e.type.is_atom(ut.args[1]))return void g.throw_error(e.error.domain("ajax_option",_,S.indicator));re.append(ut.args[0].id,ut.args[1].id),me=me.args[1]}if(e.type.is_variable(me))return void g.throw_error(e.error.instantiation(S.indicator));if(!e.type.is_term(me)||"[]/0"!==me.indicator)return void g.throw_error(e.error.domain("ajax_option",_,S.indicator))}else re=e.type.is_atom(pe)?pe.id:pe.value}b=b.args[1]}if(e.type.is_variable(b))return void g.throw_error(e.error.instantiation(S.indicator));if(!e.type.is_term(b)||"[]/0"!==b.indicator)return void g.throw_error(e.error.type("list",v,S.indicator));var nt=new XMLHttpRequest;null!==te&&nt.overrideMimeType(te);var Le=function(){if(4==this.readyState){if(200==this.status){var ct=null,Nt=this.getResponseHeader("Content-Type");if("json"===this.responseType&&this.response)ct=e.fromJavaScript.apply(this.response);else if(""===this.responseType&&-1!==Nt.indexOf("application/json"))try{ct=e.fromJavaScript.apply(JSON.parse(this.responseText))}catch{}null===ct&&(("document"===this.responseType||""===this.responseType&&-1!==Nt.indexOf("text/html")||""===this.responseType&&-1!==Nt.indexOf("application/xml"))&&null!==this.responseXML&&void 0!==e.type.DOM?ct=new e.type.DOM(this.responseXML):(""===this.responseType||"text"===this.responseType)&&(ct=new e.type.Term(this.responseText,[]))),null!==ct&&g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[m,ct])),V.substitution,V)])}"true"===X&&g.again()}};nt.onreadystatechange=Le,nt.open(w.id.toUpperCase(),l.id,"true"===X,ce,we),null!==C&&"true"===X&&(nt.responseType=C),nt.withCredentials="true"===R,"true"===X&&(nt.timeout=L);for(var lt=0;lt<I.length;lt++)nt.setRequestHeader(I[lt].header,I[lt].value);if(nt.send(re),"true"===X)return!0;Le.apply(nt)}else g.throw_error(e.error.type("list",v,S.indicator));else g.throw_error(e.error.type("atom",w,S.indicator));else g.throw_error(e.error.type("atom",l,S.indicator))}}},k=["global/1","apply/3","apply/4","prop/2","prop/3","get_prop/2","get_prop/3","set_prop/2","set_prop/3","new/3","json_prolog/2","json_atom/2","ajax/3","ajax/4"];function E(){e.type.is_js_object=function(g){return g instanceof e.type.JSValue},e.type.order.push(e.type.JSValue),e.type.JSValue=function(g){this.value=g},e.type.JSValue.prototype.toString=function(){return"<javascript>("+(typeof this.value).toLowerCase()+")"},e.type.JSValue.prototype.clone=function(){return new e.type.JSValue(this.value)},e.type.JSValue.prototype.equals=function(g){return e.type.is_js_object(g)&&this.value===g.value},e.type.JSValue.prototype.rename=function(g){return this},e.type.JSValue.prototype.variables=function(){return[]},e.type.JSValue.prototype.apply=function(g){return this},e.type.JSValue.prototype.unify=function(g,V){if(e.type.is_js_object(g)&&this.value===g.value)return new e.type.Substitution;if(e.type.is_term(g)&&"{}/1"===g.indicator){for(var S=[],w=[],l=g.args[0],m=[];e.type.is_term(l)&&",/2"===l.indicator;)m.push(l.args[0]),l=l.args[1];m.push(l);for(var v=0;v<m.length;v++){var b=m[v];if(!e.type.is_term(b)||":/2"!==b.indicator)return null;var C=b.args[0];if(!e.type.is_atom(C)||!this.value.hasOwnProperty(C.id))return null;var L=e.fromJavaScript.apply(this.value[C.id]);w.push(b.args[1]),S.push(L)}return e.unify(S,w,V)}return null},e.type.JSValue.prototype.interpret=function(g){return e.error.instantiation(g)},e.type.JSValue.prototype.compare=function(g){return this.value===g.value?0:this.value<g.value?-1:this.value>g.value?1:void 0},e.type.JSValue.prototype.toJavaScript=function(){return this.value},e.fromJavaScript.conversion.any=function(g){return new e.type.JSValue(g)},e.error.javascript=function(g,V){return new e.type.Term("error",[new e.type.Term("javascript_error",[new e.type.Term(g)]),e.utils.str_indicator(V)])}}typeof module<"u"?module.exports=function(g){e=g,E(),new e.type.Module("js",M(),k)}:(E(),new e.type.Module("js",M(),k))}(pl),function(pl){var predicates=function(){return{"sleep/1":function(e,M,k){var E=k.args[0];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(e.level));else{if(pl.type.is_integer(E))return setTimeout(function(){e.success(M),e.again()},E.value),!0;e.throw_error(pl.error.type("integer",E,e.level))}},"set_interval/3":function(e,M,k){var w,l,E=k.args[0],g=k.args[1],V=k.args[2];if(pl.type.is_variable(E)||pl.type.is_variable(g)||!pl.type.is_variable(V))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_integer(E))if(pl.type.is_callable(g)){var S=setInterval((w=g,l=e,function(){var m=new pl.type.Thread(l.session);m.add_goal(w),m.answer()}),E.value);tau_last_interval_id++,tau_intervals[tau_last_interval_id]=S,e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[V,new pl.type.Num(tau_last_interval_id,!1)])),M.substitution,M)])}else e.throw_error(pl.error.type("callable",g,k.indicator));else e.throw_error(pl.error.type("integer",E,k.indicator))},"set_timeout/3":function(e,M,k){var w,l,E=k.args[0],g=k.args[1],V=k.args[2];if(pl.type.is_variable(E)||pl.type.is_variable(g)||!pl.type.is_variable(V))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_integer(E))if(pl.type.is_callable(g)){var S=setTimeout((w=g,l=e,function(){var m=new pl.type.Thread(l.session);m.add_goal(w),m.answer()}),E.value);tau_last_timeout_id++,tau_timeouts[tau_last_timeout_id]=S,e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[V,new pl.type.Num(tau_last_timeout_id,!1)])),M.substitution,M)])}else e.throw_error(pl.error.type("callable",g,k.indicator));else e.throw_error(pl.error.type("integer",E,k.indicator))},"clear_interval/1":function(e,M,k){var E=k.args[0];pl.type.is_variable(E)?e.throw_error(pl.error.instantiation(k.indicator)):pl.type.is_integer(E)?tau_intervals[E.value]&&(clearInterval(tau_intervals[E.value]),e.success(M),delete tau_intervals[E.value]):e.throw_error(pl.error.type("integer",E,k.indicator))},"clear_timeout/1":function(e,M,k){var E=k.args[0];pl.type.is_variable(E)?e.throw_error(pl.error.instantiation(k.indicator)):pl.type.is_integer(E)?tau_timeouts[E.value]&&(clearInterval(tau_timeouts[E.value]),e.success(M),delete tau_timeouts[E.value]):e.throw_error(pl.error.type("integer",E,k.indicator))},"shell/1":function(e,M,k){e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("shell",[k.args[0],new pl.type.Num(0,!1)])),M.substitution,M)])},"shell/2":function(thread,point,atom){var command=atom.args[0],status=atom.args[1];if(pl.type.is_variable(command))thread.throw_error(pl.error.instantiation(atom.indicator));else if(pl.type.is_atom(command))if(pl.type.is_variable(status)||pl.type.is_integer(status)){if("true/0"===thread.get_flag("nodejs").indicator){const{exec:e}=require("child_process");return e(command.id,function(){}).on("exit",function(M){thread.prepend([new pl.type.State(point.goal.replace(new pl.type.Term("=",[status,new pl.type.Num(M,!1)])),point.substitution,point)]),thread.again()}),!0}try{eval(command.id),thread.prepend([new pl.type.State(point.goal.replace(new pl.type.Term("=",[status,new pl.type.Num(0,!1)])),point.substitution,point)])}catch(e){thread.prepend([new pl.type.State(point.goal.replace(new pl.type.Term("=",[status,new pl.type.Num(1,!1)])),point.substitution,point)])}}else thread.throw_error(pl.error.type("integer",status,atom.indicator));else thread.throw_error(pl.error.type("atom",command,atom.indicator))},"directory_files/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E))if(pl.type.is_variable(g)||pl.type.is_list(g)){var V=e.absolute_file_name(E.id);if("true/0"===e.get_flag("nodejs").indicator)return require("fs").readdir(V,function(C,L){if(C)e.throw_error(pl.error.existence("directory",E,k.indicator));else{for(var R=new pl.type.Term("[]",[]),X=L.length-1;X>=0;X--)R=new pl.type.Term(".",[new pl.type.Term(L[X],[]),R]);e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[g,R])),M.substitution,M)])}e.again()}),!0;var w=e.session.file_system.get(V);if(pl.type.is_directory(w)){var l=[];for(var m in w.files)l.push(m);for(var v=new pl.type.Term("[]",[]),b=l.length-1;b>=0;b--)v=new pl.type.Term(".",[new pl.type.Term(l[b],[]),v]);e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[g,v])),M.substitution,M)])}else e.throw_error(pl.error.existence("directory",E,k.indicator))}else e.throw_error(pl.error.type("list",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator))},"working_directory/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(!pl.type.is_variable(g)||pl.type.is_variable(E)&&E.id===g.id)if(pl.type.is_variable(E)||pl.type.is_atom(E))if(pl.type.is_variable(g)||pl.type.is_atom(g)){var V;if("true/0"===e.get_flag("nodejs").indicator){if(V=process.cwd(),!pl.type.is_variable(g))try{process.chdir(e.absolute_file_name(g.id))}catch{return void e.throw_error(pl.error.existence("directory",g,k.indicator))}}else V=e.session.working_directory,pl.type.is_variable(g)||(e.session.working_directory=e.absolute_file_name(g.id));e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[E,new pl.type.Term(V,[])])),M.substitution,M)])}else e.throw_error(pl.error.type("atom",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator));else e.throw_error(pl.error.instantiation(k.indicator))},"delete_file/1":function(e,M,k){var E=k.args[0];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E)){var g=e.absolute_file_name(E.id);if("true/0"===e.get_flag("nodejs").indicator){var V=require("fs");return V.stat(g,function(w,l){!w&&l.isFile()?V.unlink(g,function(m){m?e.throw_error(pl.error.permission("delete","source_sink",E,k.indicator)):e.success(M),e.again()}):(e.throw_error(pl.error.existence("source_sink",E,k.indicator)),e.again())}),!0}var S=e.session.file_system.get(g);pl.type.is_file(S)?(S.parent.remove(S.name),e.success(M)):e.throw_error(pl.error.existence("source_sink",E,k.indicator))}else e.throw_error(pl.error.type("atom",E,k.indicator))},"delete_directory/1":function(e,M,k){var E=k.args[0];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E)){var g=e.absolute_file_name(E.id);if("true/0"===e.get_flag("nodejs").indicator){var V=require("fs");return V.stat(g,function(w,l){!w&&l.isDirectory()?V.rmdir(g,function(m){m?e.throw_error(pl.error.permission("delete","directory",E,k.indicator)):e.success(M),e.again()}):(e.throw_error(pl.error.existence("directory",E,k.indicator)),e.again())}),!0}var S=e.session.file_system.get(g);pl.type.is_directory(S)?S!==e.session.file_system.files&&S.empty()?(S.parent.remove(S.name),e.success(M)):e.throw_error(pl.error.permission("delete","directory",E,k.indicator)):e.throw_error(pl.error.existence("directory",E,k.indicator))}else e.throw_error(pl.error.type("atom",E,k.indicator))},"make_directory/1":function(e,M,k){var E=k.args[0];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E)){var g=e.absolute_file_name(E.id);if("true/0"===e.get_flag("nodejs").indicator){var V=require("fs");return V.stat(g,function(v,b){v||!b.isDirectory()&&!b.isFile()?V.mkdir(g,function(C){C?e.throw_error(pl.error.existence("directory",E,k.indicator)):e.success(M),e.again()}):(e.throw_error(pl.error.permission("create","directory",E,k.indicator)),e.again())}),!0}for(var S=g.replace(/\/$/,"").split("/"),w=e.session.file_system.files,l=S[S.length-1],m=1;m<S.length-1;m++)if(w=w.lookup(S[m]),!pl.type.is_directory(w))return void e.throw_error(pl.error.existence("directory",E,k.indicator));w.lookup(l)?e.throw_error(pl.error.permission("create","directory",E,k.indicator)):(w.push(l,new pl.type.Directory(l,w)),e.success(M))}else e.throw_error(pl.error.type("atom",E,k.indicator))},"copy_file/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E)||pl.type.is_variable(g))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E))if(pl.type.is_atom(g)){var V=e.absolute_file_name(E.id),S=e.absolute_file_name(g.id);if("true/0"===e.get_flag("nodejs").indicator){var w=require("fs");return w.stat(V,function(v,b){v||!b.isFile()?(e.throw_error(pl.error.existence("source_sink",E,k.indicator)),e.again()):w.copyFile(V,S,function(C){C?e.throw_error(pl.error.existence("source_sink",g,k.indicator)):e.success(M),e.again()})}),!0}var l=e.file_system_open(V,"text","read");if(l){var m=e.file_system_open(S,"text","write");m?(m.text=l.text,e.success(M)):e.throw_error(pl.error.existence("source_sink",g,k.indicator))}else e.throw_error(pl.error.existence("source_sink",E,k.indicator))}else e.throw_error(pl.error.type("atom",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator))},"rename_file/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E)||pl.type.is_variable(g))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E))if(pl.type.is_atom(g)){var V=e.absolute_file_name(E.id),S=e.absolute_file_name(g.id);if("true/0"===e.get_flag("nodejs").indicator){var w=require("fs");return w.stat(V,function(R,X){R||!X.isFile()?(e.throw_error(pl.error.existence("source_sink",E,k.indicator)),e.again()):w.rename(V,S,function(te){te?e.throw_error(pl.error.existence("source_sink",g,k.indicator)):e.success(M),e.again()})}),!0}var l=e.file_system_open(V,"text","read");if(l){var m=e.file_system_open(S,"text","write");if(m){m.text=l.text;for(var v=V.replace(/\/$/,"").split("/"),b=e.session.file_system.files,C=v[v.length-1],L=1;L<v.length-1;L++)b=b.lookup(v[L]);b.remove(C),e.success(M)}else e.throw_error(pl.error.existence("source_sink",g,k.indicator))}else e.throw_error(pl.error.existence("source_sink",E,k.indicator))}else e.throw_error(pl.error.type("atom",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator))},"exists_file/1":function(e,M,k){var E=k.args[0];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E)){var g=e.absolute_file_name(E.id);if("true/0"===e.get_flag("nodejs").indicator)return require("fs").stat(g,function(w,l){!w&&l.isFile()&&e.success(M),e.again()}),!0;var S=e.session.file_system.get(g);pl.type.is_file(S)&&e.success(M)}else e.throw_error(pl.error.type("atom",E,k.indicator))},"exists_directory/1":function(e,M,k){var E=k.args[0];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E)){var g=e.absolute_file_name(E.id);if("true/0"===e.get_flag("nodejs").indicator)return require("fs").stat(g,function(w,l){!w&&l.isDirectory()&&e.success(M),e.again()}),!0;var S=e.session.file_system.get(g);pl.type.is_directory(S)&&e.success(M)}else e.throw_error(pl.error.type("atom",E,k.indicator))},"same_file/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E)||pl.type.is_variable(g))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E))if(pl.type.is_atom(g))if(E.id===g.id)e.success(M);else{var V=e.absolute_file_name(E.id),S=e.absolute_file_name(g.id);if("true/0"===e.get_flag("nodejs").indicator){var w=require("fs");return w.stat(V,function(v,b){v?e.again():w.stat(S,function(C,L){!C&&b.dev===L.dev&&b.ino===L.ino&&e.success(M),e.again()})}),!0}var l=e.session.file_system.get(V),m=e.session.file_system.get(S);l&&m&&l===m&&e.success(M)}else e.throw_error(pl.error.type("atom",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator))},"absolute_file_name/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E))if(pl.type.is_variable(g)||pl.type.is_atom(g)){var V=e.absolute_file_name(E.id);e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[g,new pl.type.Term(V,[])])),M.substitution,M)])}else e.throw_error(pl.error.type("atom",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator))},"is_absolute_file_name/1":function(e,M,k){var E=k.args[0];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E))if("true/0"===e.get_flag("nodejs").indicator){var g=require("path"),V=E.id;for(var S in process.env)!process.env.hasOwnProperty(S)||(V=V.replace(new RegExp("\\$"+S,"g"),process.env[S]));g.isAbsolute(V)&&e.success(M)}else E.id.length>0&&"/"===E.id[0]&&e.success(M);else e.throw_error(pl.error.type("atom",E,k.indicator))},"size_file/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E))if(pl.type.is_variable(g)||pl.type.is_integer(g)){var V=e.absolute_file_name(E.id);if("true/0"===e.get_flag("nodejs").indicator)return require("fs").stat(V,function(m,v){m?e.throw_error(pl.error.existence("source_sink",E,k.indicator)):e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[g,new pl.type.Num(v.size,!1)])),M.substitution,M)]),e.again()}),!0;var w=e.session.file_system.get(V);if(pl.type.is_file(w)||pl.type.is_directory(w)){var l=w.size();e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[g,new pl.type.Num(l,!1)])),M.substitution,M)])}else e.throw_error(pl.error.existence("source_sink",E,k.indicator))}else e.throw_error(pl.error.type("integer",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator))},"time_file/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E))if(pl.type.is_variable(g)||pl.type.is_number(g)){var V=e.absolute_file_name(E.id);if("true/0"===e.get_flag("nodejs").indicator)return require("fs").stat(V,function(m,v){m?e.throw_error(pl.error.existence("source_sink",E,k.indicator)):e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[g,new pl.type.Num(v.mtime/1e3)])),M.substitution,M)]),e.again()}),!0;var w=e.session.file_system.get(V);pl.type.is_file(w)||pl.type.is_directory(w)?e.prepend([new pl.type.State(M.goal.replace(new pl.type.Term("=",[g,new pl.type.Num(w.modified)])),M.substitution,M)]):e.throw_error(pl.error.existence("source_sink",E,k.indicator))}else e.throw_error(pl.error.type("number",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator))},"file_permission/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E)||pl.type.is_variable(g))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E))if(pl.type.is_atom(g)){var V=e.absolute_file_name(E.id);if("true/0"===e.get_flag("nodejs").indicator){var S=require("fs");if("read/0"===g.indicator)return S.access(V,S.constants.R_OK,function(l,m){l||e.success(M),e.again()}),!0;if("write/0"===g.indicator)return S.access(V,S.constants.W_OK,function(l,m){l||e.success(M),e.again()}),!0;if("execute/0"===g.indicator)return S.access(V,S.constants.X_OK,function(l,m){l||e.success(M),e.again()}),!0;e.throw_error(pl.error.domain("file_permission",g,k.indicator))}else{var w=e.session.file_system.get(V);pl.type.is_file(w)&&e.success(M)}}else e.throw_error(pl.error.type("atom",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator))},"getenv/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E)||pl.type.is_atom(E))if(pl.type.is_variable(g)||pl.type.is_atom(g)){if("true/0"===e.get_flag("nodejs").indicator){var V=[];if(pl.type.is_variable(E)){for(var S in process.env)if(process.env.hasOwnProperty(S)){var w=new pl.type.Term(S,[]),l=new pl.type.Term(process.env[S],[]);V.push(new pl.type.State(M.goal.replace(new pl.type.Term(",",[new pl.type.Term("=",[E,w]),new pl.type.Term("=",[g,l])])),M.substitution,M))}}else null!==(l=process.env[E.id]?new pl.type.Term(process.env[E.id].toString(),[]):null)&&V.push(new pl.type.State(M.goal.replace(new pl.type.Term("=",[g,l])),M.substitution,M));e.prepend(V)}}else e.throw_error(pl.error.type("atom",g,k.indicator));else e.throw_error(pl.error.type("atom",E,k.indicator))},"setenv/2":function(e,M,k){var E=k.args[0],g=k.args[1];if(pl.type.is_variable(E)||pl.type.is_variable(g))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E)||pl.type.is_integer(E))if(pl.type.is_atom(g)||pl.type.is_integer(g)){if("true/0"===e.get_flag("nodejs").indicator){var V=pl.type.is_atom(E)?E.id:E.value.toString(),S=pl.type.is_atom(g)?g.id:g.value.toString();process.env[V]=S,e.success(M)}}else e.throw_error(pl.error.type("atom_or_integer",g,k.indicator));else e.throw_error(pl.error.type("atom_or_integer",E,k.indicator))},"unsetenv/1":function(e,M,k){var E=k.args[0];if(pl.type.is_variable(E))e.throw_error(pl.error.instantiation(k.indicator));else if(pl.type.is_atom(E)||pl.type.is_integer(E)){if("true/0"===e.get_flag("nodejs").indicator){var g=pl.type.is_atom(E)?E.id:E.value.toString();delete process.env[g],e.success(M)}}else e.throw_error(pl.error.type("atom_or_integer",E,k.indicator))},"pid/1":function(e,M,k){var E=k.args[0];if(pl.type.is_variable(E)||pl.type.is_integer(E)){var g=[];if("true/0"===e.get_flag("nodejs").indicator){var V=require("process");g.push(new pl.type.State(M.goal.replace(new pl.type.Term("=",[E,new pl.type.Num(V.pid,!1)])),M.substitution,M))}else g.push(new pl.type.State(M.goal.replace(new pl.type.Term("=",[E,new pl.type.Num(0,!1)])),M.substitution,M));e.prepend(g)}else e.throw_error(pl.error.type("integer",E,k.indicator))}}},exports=["sleep/1","set_interval/3","set_timeout/3","clear_interval/1","clear_timeout/1","shell/1","shell/2","directory_files/2","working_directory/2","delete_file/1","delete_directory/1","rename_file/2","copy_file/2","make_directory/1","exists_file/1","exists_directory/1","same_file/2","absolute_file_name/2","is_absolute_file_name/1","size_file/2","file_permission/2","time_file/2","getenv/2","setenv/2","unsetenv/1","pid/1"],options=function(){return{meta_predicates:{"set_interval/3":new pl.type.Term("set_interval",[new pl.type.Term("+"),new pl.type.Num(0),new pl.type.Term("-")]),"set_timeout/3":new pl.type.Term("set_timeout",[new pl.type.Term("+"),new pl.type.Num(0),new pl.type.Term("-")])}}},tau_last_interval_id=0,tau_last_timeout_id=0,tau_intervals={},tau_timeouts={};typeof module<"u"?module.exports=function(e){new(pl=e).type.Module("os",predicates(),exports,options())}:new pl.type.Module("os",predicates(),exports,options())}(pl),function(e){var M="charsio",k=function(){return{"write_term_to_chars/3":function(g,V,S){var w=S.args[0],l=S.args[1],m=S.args[2];if(e.type.is_variable(m)||e.type.is_list(m))if(e.type.is_variable(l))g.throw_error(e.error.instantiation(S.indicator));else{if(!e.type.is_variable(m)){for(var C=m;e.type.is_term(C)&&"./2"===C.indicator;){var v=C.args[0];if(!e.type.is_character(v))return void g.throw_error(e.error.type("character",v,S.indicator));C=C.args[1]}if(!e.type.is_variable(C)&&!e.type.is_empty_list(C))return void g.throw_error(e.error.type("list",m,S.indicator))}var L,b={};for(C=l;e.type.is_term(C)&&"./2"===C.indicator;){if(e.type.is_variable(L=C.args[0]))return void g.throw_error(e.error.instantiation(S.indicator));if(!e.type.is_write_option(L))return void g.throw_error(e.error.domain("write_option",L,S.indicator));b[L.id]="true"===L.args[0].id,C=C.args[1]}if("[]/0"!==C.indicator)return void(e.type.is_variable(C)?g.throw_error(e.error.instantiation(S.indicator)):g.throw_error(e.error.type("list",l,S.indicator)));b.session=g.session;for(var R=w.toString(b),X=new e.type.Term("[]",[]),te=e.utils.stringLength(R)-1;te>=0;te--)X=new e.type.Term(".",[new e.type.Term(e.utils.fromCodePoint(e.utils.codePointAt(R,te)),[]),X]);g.prepend([new e.type.State(V.goal.replace(new e.type.Term("=",[m,X])),V.substitution,V)])}else g.throw_error(e.error.type("list",m,S.indicator))},"fabricate_var_name/3":[new e.type.Rule(new e.type.Term("fabricate_var_name",[new e.type.Var("VarType"),new e.type.Var("VarName"),new e.type.Var("N")]),new e.type.Term(",",[new e.type.Term("char_code",[new e.type.Term("A",[]),new e.type.Var("AC")]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("LN"),new e.type.Term("+",[new e.type.Term("mod",[new e.type.Var("N"),new e.type.Num(26,!1)]),new e.type.Var("AC")])]),new e.type.Term(",",[new e.type.Term("char_code",[new e.type.Var("LC"),new e.type.Var("LN")]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("NN"),new e.type.Term("//",[new e.type.Var("N"),new e.type.Num(26,!1)])]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=:=",[new e.type.Var("NN"),new e.type.Num(0,!1)]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("==",[new e.type.Var("VarType"),new e.type.Term("fabricated",[])]),new e.type.Term("atom_chars",[new e.type.Var("VarName"),new e.type.Term(".",[new e.type.Term("_",[]),new e.type.Term(".",[new e.type.Var("LC"),new e.type.Term("[]",[])])])])]),new e.type.Term("->",[new e.type.Term("==",[new e.type.Var("VarType"),new e.type.Term("numbervars",[])]),new e.type.Term("atom_chars",[new e.type.Var("VarName"),new e.type.Term(".",[new e.type.Var("LC"),new e.type.Term("[]",[])])])])])]),new e.type.Term(",",[new e.type.Term("number_chars",[new e.type.Var("NN"),new e.type.Var("NNChars")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("==",[new e.type.Var("VarType"),new e.type.Term("fabricated",[])]),new e.type.Term("atom_chars",[new e.type.Var("VarName"),new e.type.Term(".",[new e.type.Term("_",[]),new e.type.Term(".",[new e.type.Var("LC"),new e.type.Var("NNChars")])])])]),new e.type.Term("->",[new e.type.Term("==",[new e.type.Var("VarType"),new e.type.Term("numbervars",[])]),new e.type.Term("atom_chars",[new e.type.Var("VarName"),new e.type.Term(".",[new e.type.Var("LC"),new e.type.Var("NNChars")])])])])])])])])])]))]}},E=["write_term_to_chars/3"];typeof module<"u"?module.exports=function(g){new(e=g).type.Module(M,k(),E)}:new e.type.Module(M,k(),E)}(pl),function(e){var M="format",k=function(){return{"format_/4":[new e.type.Rule(new e.type.Term("format_",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32320"),new e.type.Var("_32322")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("is_list",[new e.type.Var("_32316")]),new e.type.Term("true",[])]),new e.type.Term("throw",[new e.type.Term("error",[new e.type.Term("type_error",[new e.type.Term("list",[]),new e.type.Var("_32316")]),new e.type.Term("//",[new e.type.Term("format_",[]),new e.type.Num(2,!1)])])])]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("is_list",[new e.type.Var("_32317")]),new e.type.Term("true",[])]),new e.type.Term("throw",[new e.type.Term("error",[new e.type.Term("type_error",[new e.type.Term("list",[]),new e.type.Var("_32317")]),new e.type.Term("//",[new e.type.Term("format_",[]),new e.type.Num(2,!1)])])])]),new e.type.Term(",",[new e.type.Term("unique_variable_names",[new e.type.Var("_32317"),new e.type.Var("_32318")]),new e.type.Term("phrase",[new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Num(0,!1),new e.type.Term("[]",[]),new e.type.Var("_32318")]),new e.type.Var("_32319")])])])]),new e.type.Term("=",[new e.type.Var("_32320"),new e.type.Var("_32321")])]),new e.type.Term("format_cells",[new e.type.Var("_32319"),new e.type.Var("_32321"),new e.type.Var("_32322")])]))],"format_cells/3":[new e.type.Rule(new e.type.Term("format_cells",[new e.type.Term("[]",[]),new e.type.Var("_32323"),new e.type.Var("_32323")]),new e.type.Term("true",[])),new e.type.Rule(new e.type.Term("format_cells",[new e.type.Term(".",[new e.type.Var("_32324"),new e.type.Var("_32319")]),new e.type.Var("_32325"),new e.type.Var("_32327")]),new e.type.Term(",",[new e.type.Term("format_cell",[new e.type.Var("_32324"),new e.type.Var("_32325"),new e.type.Var("_32326")]),new e.type.Term("format_cells",[new e.type.Var("_32319"),new e.type.Var("_32326"),new e.type.Var("_32327")])]))],"format_cell/3":[new e.type.Rule(new e.type.Term("format_cell",[new e.type.Term("newline",[]),new e.type.Term(".",[new e.type.Term("\n",[]),new e.type.Var("_32329")]),new e.type.Var("_32329")]),null),new e.type.Rule(new e.type.Term("format_cell",[new e.type.Term("cell",[new e.type.Var("_32330"),new e.type.Var("_32331"),new e.type.Var("_32332")]),new e.type.Var("_32341"),new e.type.Var("_32343")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("elements_gluevars",[new e.type.Var("_32332"),new e.type.Num(0,!1),new e.type.Var("_32333")]),new e.type.Var("_32334")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=",[new e.type.Var("_32334"),new e.type.Term("[]",[])]),new e.type.Term("true",[])]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32335"),new e.type.Term("-",[new e.type.Term("-",[new e.type.Var("_32331"),new e.type.Var("_32330")]),new e.type.Var("_32333")])]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=<",[new e.type.Var("_32335"),new e.type.Num(0,!1)]),new e.type.Term("maplist",[new e.type.Term("=",[new e.type.Num(0,!1)]),new e.type.Var("_32334")])]),new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32334"),new e.type.Var("_32336")]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32337"),new e.type.Term("//",[new e.type.Var("_32335"),new e.type.Var("_32336")])]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32338"),new e.type.Term("-",[new e.type.Var("_32335"),new e.type.Term("*",[new e.type.Var("_32337"),new e.type.Var("_32336")])])]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=:=",[new e.type.Var("_32338"),new e.type.Num(0,!1)]),new e.type.Term("maplist",[new e.type.Term("=",[new e.type.Var("_32337")]),new e.type.Var("_32334")])]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32339"),new e.type.Term("+",[new e.type.Var("_32337"),new e.type.Var("_32338")])]),new e.type.Term(",",[new e.type.Term("reverse",[new e.type.Var("_32334"),new e.type.Term(".",[new e.type.Var("_32339"),new e.type.Var("_32340")])]),new e.type.Term("maplist",[new e.type.Term("=",[new e.type.Var("_32337")]),new e.type.Var("_32340")])])])])])])])])])])]),new e.type.Term("=",[new e.type.Var("_32341"),new e.type.Var("_32342")])]),new e.type.Term("format_elements",[new e.type.Var("_32332"),new e.type.Var("_32342"),new e.type.Var("_32343")])]))],"format_elements/3":[new e.type.Rule(new e.type.Term("format_elements",[new e.type.Term("[]",[]),new e.type.Var("_32344"),new e.type.Var("_32344")]),new e.type.Term("true",[])),new e.type.Rule(new e.type.Term("format_elements",[new e.type.Term(".",[new e.type.Var("_32345"),new e.type.Var("_32332")]),new e.type.Var("_32346"),new e.type.Var("_32348")]),new e.type.Term(",",[new e.type.Term("format_element",[new e.type.Var("_32345"),new e.type.Var("_32346"),new e.type.Var("_32347")]),new e.type.Term("format_elements",[new e.type.Var("_32332"),new e.type.Var("_32347"),new e.type.Var("_32348")])]))],"format_element/3":[new e.type.Rule(new e.type.Term("format_element",[new e.type.Term("chars",[new e.type.Var("_32349")]),new e.type.Var("_32350"),new e.type.Var("_32351")]),new e.type.Term("seq",[new e.type.Var("_32349"),new e.type.Var("_32350"),new e.type.Var("_32351")])),new e.type.Rule(new e.type.Term("format_element",[new e.type.Term("glue",[new e.type.Var("_32352"),new e.type.Var("_32353")]),new e.type.Var("_32355"),new e.type.Var("_32357")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32354"),new e.type.Var("_32353")]),new e.type.Term("maplist",[new e.type.Term("=",[new e.type.Var("_32352")]),new e.type.Var("_32354")])]),new e.type.Term("=",[new e.type.Var("_32355"),new e.type.Var("_32356")])]),new e.type.Term("seq",[new e.type.Var("_32354"),new e.type.Var("_32356"),new e.type.Var("_32357")])]))],"elements_gluevars/5":[new e.type.Rule(new e.type.Term("elements_gluevars",[new e.type.Term("[]",[]),new e.type.Var("_32358"),new e.type.Var("_32358"),new e.type.Var("_32359"),new e.type.Var("_32359")]),new e.type.Term("true",[])),new e.type.Rule(new e.type.Term("elements_gluevars",[new e.type.Term(".",[new e.type.Var("_32345"),new e.type.Var("_32332")]),new e.type.Var("_32360"),new e.type.Var("_32358"),new e.type.Var("_32362"),new e.type.Var("_32364")]),new e.type.Term(",",[new e.type.Term("element_gluevar",[new e.type.Var("_32345"),new e.type.Var("_32360"),new e.type.Var("_32361"),new e.type.Var("_32362"),new e.type.Var("_32363")]),new e.type.Term("elements_gluevars",[new e.type.Var("_32332"),new e.type.Var("_32361"),new e.type.Var("_32358"),new e.type.Var("_32363"),new e.type.Var("_32364")])]))],"element_gluevar/5":[new e.type.Rule(new e.type.Term("element_gluevar",[new e.type.Term("chars",[new e.type.Var("_32349")]),new e.type.Var("_32360"),new e.type.Var("_32358"),new e.type.Var("_32366"),new e.type.Var("_32367")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32349"),new e.type.Var("_32365")]),new e.type.Term("is",[new e.type.Var("_32358"),new e.type.Term("+",[new e.type.Var("_32360"),new e.type.Var("_32365")])])]),new e.type.Term("=",[new e.type.Var("_32366"),new e.type.Var("_32367")])])),new e.type.Rule(new e.type.Term("element_gluevar",[new e.type.Term("glue",[new e.type.Var("__32368"),new e.type.Var("_32369")]),new e.type.Var("_32358"),new e.type.Var("_32358"),new e.type.Term(".",[new e.type.Var("_32369"),new e.type.Var("_32371")]),new e.type.Var("_32371")]),null)],"cells/7":[new e.type.Rule(new e.type.Term("cells",[new e.type.Term("[]",[]),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("__32373"),new e.type.Var("_32374"),new e.type.Var("_32378")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32374"),new e.type.Var("_32375")])]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term(",",[new e.type.Term("==",[new e.type.Var("_32317"),new e.type.Term("[]",[])]),new e.type.Term("=",[new e.type.Var("_32375"),new e.type.Var("_32376")])]),new e.type.Term("cell",[new e.type.Var("_32372"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32376"),new e.type.Var("_32377")])]),new e.type.Term(",",[new e.type.Term("throw",[new e.type.Term("error",[new e.type.Term("domain_error",[new e.type.Term("empty_list",[]),new e.type.Var("_32317")]),new e.type.Term("//",[new e.type.Term("cells",[]),new e.type.Num(5,!1)])])]),new e.type.Term("=",[new e.type.Var("_32375"),new e.type.Var("_32378")])])]),new e.type.Term("=",[new e.type.Var("_32377"),new e.type.Var("_32378")])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32316")])]),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32379"),new e.type.Var("_32381")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32379"),new e.type.Var("_32380")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term("[]",[])])]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32380"),new e.type.Var("_32381")])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("w",[]),new e.type.Var("_32316")])]),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Var("_32317")]),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32384"),new e.type.Var("_32387")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32384"),new e.type.Var("_32385")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("write_term_to_chars",[new e.type.Var("_32382"),new e.type.Term(".",[new e.type.Term("numbervars",[new e.type.Term("true",[])]),new e.type.Term(".",[new e.type.Term("variable_names",[new e.type.Var("_32318")]),new e.type.Term("[]",[])])]),new e.type.Var("_32383")]),new e.type.Term("=",[new e.type.Var("_32385"),new e.type.Var("_32386")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32383")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32386"),new e.type.Var("_32387")])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("q",[]),new e.type.Var("_32316")])]),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Var("_32317")]),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32388"),new e.type.Var("_32391")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32388"),new e.type.Var("_32389")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("write_term_to_chars",[new e.type.Var("_32382"),new e.type.Term(".",[new e.type.Term("quoted",[new e.type.Term("true",[])]),new e.type.Term(".",[new e.type.Term("numbervars",[new e.type.Term("true",[])]),new e.type.Term(".",[new e.type.Term("variable_names",[new e.type.Var("_32318")]),new e.type.Term("[]",[])])])]),new e.type.Var("_32383")]),new e.type.Term("=",[new e.type.Var("_32389"),new e.type.Var("_32390")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32383")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32390"),new e.type.Var("_32391")])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("a",[]),new e.type.Var("_32316")])]),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Var("_32317")]),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32392"),new e.type.Var("_32395")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32392"),new e.type.Var("_32393")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("atom_chars",[new e.type.Var("_32382"),new e.type.Var("_32383")]),new e.type.Term("=",[new e.type.Var("_32393"),new e.type.Var("_32394")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32383")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32394"),new e.type.Var("_32395")])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32396")]),new e.type.Var("_32397"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32404"),new e.type.Var("_32411")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("numeric_argument",[new e.type.Var("_32396"),new e.type.Var("_32353"),new e.type.Term(".",[new e.type.Term("d",[]),new e.type.Var("_32316")]),new e.type.Var("_32397"),new e.type.Term(".",[new e.type.Var("_32398"),new e.type.Var("_32317")])]),new e.type.Term("=",[new e.type.Var("_32404"),new e.type.Var("_32405")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32405"),new e.type.Var("_32406")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32382"),new e.type.Var("_32398")]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("integer",[new e.type.Var("_32382")]),new e.type.Term("true",[])]),new e.type.Term("throw",[new e.type.Term("error",[new e.type.Term("type_error",[new e.type.Term("integer",[]),new e.type.Var("_32382")]),new e.type.Term("//",[new e.type.Term("cells",[]),new e.type.Num(5,!1)])])])]),new e.type.Term("number_chars",[new e.type.Var("_32382"),new e.type.Var("_32399")])])]),new e.type.Term("=",[new e.type.Var("_32406"),new e.type.Var("_32407")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term(",",[new e.type.Term("=:=",[new e.type.Var("_32353"),new e.type.Num(0,!1)]),new e.type.Term("=",[new e.type.Var("_32407"),new e.type.Var("_32408")])]),new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("_32349"),new e.type.Var("_32399")]),new e.type.Term("=",[new e.type.Var("_32408"),new e.type.Var("_32409")])])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32399"),new e.type.Var("_32365")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=<",[new e.type.Var("_32365"),new e.type.Var("_32353")]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32338"),new e.type.Term("-",[new e.type.Var("_32353"),new e.type.Var("_32365")])]),new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32400"),new e.type.Var("_32338")]),new e.type.Term(",",[new e.type.Term("maplist",[new e.type.Term("=",[new e.type.Term("0",[])]),new e.type.Var("_32400")]),new e.type.Term("phrase",[new e.type.Term(",",[new e.type.Term(".",[new e.type.Term("0",[]),new e.type.Term(".",[new e.type.Term(".",[]),new e.type.Term("[]",[])])]),new e.type.Term(",",[new e.type.Term("seq",[new e.type.Var("_32400")]),new e.type.Term("seq",[new e.type.Var("_32399")])])]),new e.type.Var("_32349")])])])])]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32401"),new e.type.Term("-",[new e.type.Var("_32365"),new e.type.Var("_32353")])]),new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32402"),new e.type.Var("_32401")]),new e.type.Term(",",[new e.type.Term("append",[new e.type.Var("_32402"),new e.type.Var("_32403"),new e.type.Var("_32399")]),new e.type.Term("phrase",[new e.type.Term(",",[new e.type.Term("seq",[new e.type.Var("_32402")]),new e.type.Term(",",[new e.type.Term(".",[new e.type.Term(".",[]),new e.type.Term("[]",[])]),new e.type.Term("seq",[new e.type.Var("_32403")])])]),new e.type.Var("_32349")])])])])])]),new e.type.Term("=",[new e.type.Var("_32407"),new e.type.Var("_32410")])])]),new e.type.Term("=",[new e.type.Var("_32409"),new e.type.Var("_32410")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32349")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32410"),new e.type.Var("_32411")])])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32396")]),new e.type.Var("_32397"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32417"),new e.type.Var("_32421")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("numeric_argument",[new e.type.Var("_32396"),new e.type.Var("_32353"),new e.type.Term(".",[new e.type.Term("D",[]),new e.type.Var("_32316")]),new e.type.Var("_32397"),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Var("_32317")])]),new e.type.Term("=",[new e.type.Var("_32417"),new e.type.Var("_32418")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32418"),new e.type.Var("_32419")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("number_chars",[new e.type.Var("_32353"),new e.type.Var("_32412")]),new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term(",",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term("[]",[])]),new e.type.Term(",",[new e.type.Term("seq",[new e.type.Var("_32412")]),new e.type.Term(".",[new e.type.Term("d",[]),new e.type.Term("[]",[])])])]),new e.type.Var("_32413")]),new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("format_",[new e.type.Var("_32413"),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Term("[]",[])])]),new e.type.Var("_32399")]),new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("upto_what",[new e.type.Var("_32414"),new e.type.Term(".",[])]),new e.type.Var("_32399"),new e.type.Var("_32403")]),new e.type.Term(",",[new e.type.Term("reverse",[new e.type.Var("_32414"),new e.type.Var("_32415")]),new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("groups_of_three",[new e.type.Var("_32415")]),new e.type.Var("_32416")]),new e.type.Term(",",[new e.type.Term("reverse",[new e.type.Var("_32416"),new e.type.Var("_32402")]),new e.type.Term("append",[new e.type.Var("_32402"),new e.type.Var("_32403"),new e.type.Var("_32349")])])])])])])])]),new e.type.Term("=",[new e.type.Var("_32419"),new e.type.Var("_32420")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32349")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32420"),new e.type.Var("_32421")])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("i",[]),new e.type.Var("_32316")])]),new e.type.Term(".",[new e.type.Var("__32422"),new e.type.Var("_32317")]),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32423"),new e.type.Var("_32425")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32423"),new e.type.Var("_32424")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32424"),new e.type.Var("_32425")])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("n",[]),new e.type.Var("_32316")])]),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32426"),new e.type.Var("_32430")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32426"),new e.type.Var("_32427")])]),new e.type.Term(",",[new e.type.Term("cell",[new e.type.Var("_32372"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32427"),new e.type.Var("_32428")]),new e.type.Term(",",[new e.type.Term("n_newlines",[new e.type.Num(1,!1),new e.type.Var("_32428"),new e.type.Var("_32429")]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Num(0,!1),new e.type.Term("[]",[]),new e.type.Var("_32318"),new e.type.Var("_32429"),new e.type.Var("_32430")])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32396")]),new e.type.Var("_32397"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32431"),new e.type.Var("_32436")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("numeric_argument",[new e.type.Var("_32396"),new e.type.Var("_32353"),new e.type.Term(".",[new e.type.Term("n",[]),new e.type.Var("_32316")]),new e.type.Var("_32397"),new e.type.Var("_32317")]),new e.type.Term("=",[new e.type.Var("_32431"),new e.type.Var("_32432")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32432"),new e.type.Var("_32433")])]),new e.type.Term(",",[new e.type.Term("cell",[new e.type.Var("_32372"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32433"),new e.type.Var("_32434")]),new e.type.Term(",",[new e.type.Term("n_newlines",[new e.type.Var("_32353"),new e.type.Var("_32434"),new e.type.Var("_32435")]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Num(0,!1),new e.type.Term("[]",[]),new e.type.Var("_32318"),new e.type.Var("_32435"),new e.type.Var("_32436")])])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("s",[]),new e.type.Var("_32316")])]),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Var("_32317")]),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32437"),new e.type.Var("_32439")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32437"),new e.type.Var("_32438")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32382")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32438"),new e.type.Var("_32439")])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("f",[]),new e.type.Var("_32316")])]),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Var("_32317")]),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32440"),new e.type.Var("_32443")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32440"),new e.type.Var("_32441")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("format_number_chars",[new e.type.Var("_32382"),new e.type.Var("_32383")]),new e.type.Term("=",[new e.type.Var("_32441"),new e.type.Var("_32442")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32383")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32442"),new e.type.Var("_32443")])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32396")]),new e.type.Var("_32397"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32445"),new e.type.Var("_32449")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("numeric_argument",[new e.type.Var("_32396"),new e.type.Var("_32353"),new e.type.Term(".",[new e.type.Term("f",[]),new e.type.Var("_32316")]),new e.type.Var("_32397"),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Var("_32317")])]),new e.type.Term("=",[new e.type.Var("_32445"),new e.type.Var("_32446")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32446"),new e.type.Var("_32447")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("format_number_chars",[new e.type.Var("_32382"),new e.type.Var("_32399")]),new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("upto_what",[new e.type.Var("_32402"),new e.type.Term(".",[])]),new e.type.Var("_32399"),new e.type.Var("_32349")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=:=",[new e.type.Var("_32353"),new e.type.Num(0,!1)]),new e.type.Term("=",[new e.type.Var("_32383"),new e.type.Var("_32402")])]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=",[new e.type.Var("_32349"),new e.type.Term(".",[new e.type.Term(".",[]),new e.type.Var("_32340")])]),new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32340"),new e.type.Var("_32365")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("<",[new e.type.Var("_32353"),new e.type.Var("_32365")]),new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32403"),new e.type.Var("_32353")]),new e.type.Term("append",[new e.type.Var("_32403"),new e.type.Var("__32444"),new e.type.Var("_32340")])])]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=:=",[new e.type.Var("_32353"),new e.type.Var("_32365")]),new e.type.Term("=",[new e.type.Var("_32403"),new e.type.Var("_32340")])]),new e.type.Term(",",[new e.type.Term(">",[new e.type.Var("_32353"),new e.type.Var("_32365")]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32338"),new e.type.Term("-",[new e.type.Var("_32353"),new e.type.Var("_32365")])]),new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32400"),new e.type.Var("_32338")]),new e.type.Term(",",[new e.type.Term("maplist",[new e.type.Term("=",[new e.type.Term("0",[])]),new e.type.Var("_32400")]),new e.type.Term("append",[new e.type.Var("_32340"),new e.type.Var("_32400"),new e.type.Var("_32403")])])])])])])])])]),new e.type.Term(",",[new e.type.Term("length",[new e.type.Var("_32403"),new e.type.Var("_32353")]),new e.type.Term("maplist",[new e.type.Term("=",[new e.type.Term("0",[])]),new e.type.Var("_32403")])])]),new e.type.Term("append",[new e.type.Var("_32402"),new e.type.Term(".",[new e.type.Term(".",[]),new e.type.Var("_32403")]),new e.type.Var("_32383")])])])])]),new e.type.Term("=",[new e.type.Var("_32447"),new e.type.Var("_32448")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32383")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32448"),new e.type.Var("_32449")])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("r",[]),new e.type.Var("_32316")])]),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32450"),new e.type.Var("_32452")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32450"),new e.type.Var("_32451")])]),new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("8",[]),new e.type.Term(".",[new e.type.Term("r",[]),new e.type.Var("_32316")])])]),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32451"),new e.type.Var("_32452")])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32396")]),new e.type.Var("_32397"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32453"),new e.type.Var("_32457")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("numeric_argument",[new e.type.Var("_32396"),new e.type.Var("_32353"),new e.type.Term(".",[new e.type.Term("r",[]),new e.type.Var("_32316")]),new e.type.Var("_32397"),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Var("_32317")])]),new e.type.Term("=",[new e.type.Var("_32453"),new e.type.Var("_32454")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32454"),new e.type.Var("_32455")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("integer_to_radix",[new e.type.Var("_32382"),new e.type.Var("_32353"),new e.type.Term("lowercase",[]),new e.type.Var("_32349")]),new e.type.Term("=",[new e.type.Var("_32455"),new e.type.Var("_32456")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32349")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32456"),new e.type.Var("_32457")])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("R",[]),new e.type.Var("_32316")])]),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32458"),new e.type.Var("_32460")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32458"),new e.type.Var("_32459")])]),new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("8",[]),new e.type.Term(".",[new e.type.Term("R",[]),new e.type.Var("_32316")])])]),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32459"),new e.type.Var("_32460")])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32396")]),new e.type.Var("_32397"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32461"),new e.type.Var("_32465")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("numeric_argument",[new e.type.Var("_32396"),new e.type.Var("_32353"),new e.type.Term(".",[new e.type.Term("R",[]),new e.type.Var("_32316")]),new e.type.Var("_32397"),new e.type.Term(".",[new e.type.Var("_32382"),new e.type.Var("_32317")])]),new e.type.Term("=",[new e.type.Var("_32461"),new e.type.Var("_32462")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32462"),new e.type.Var("_32463")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("integer_to_radix",[new e.type.Var("_32382"),new e.type.Var("_32353"),new e.type.Term("uppercase",[]),new e.type.Var("_32349")]),new e.type.Term("=",[new e.type.Var("_32463"),new e.type.Var("_32464")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32349")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32464"),new e.type.Var("_32465")])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("`",[]),new e.type.Term(".",[new e.type.Var("_32466"),new e.type.Term(".",[new e.type.Term("t",[]),new e.type.Var("_32316")])])])]),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32468"),new e.type.Var("_32470")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32468"),new e.type.Var("_32469")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("glue",[new e.type.Var("_32466"),new e.type.Var("__32467")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32469"),new e.type.Var("_32470")])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("t",[]),new e.type.Var("_32316")])]),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32472"),new e.type.Var("_32474")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32472"),new e.type.Var("_32473")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("glue",[new e.type.Term(" ",[]),new e.type.Var("__32471")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32473"),new e.type.Var("_32474")])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("|",[]),new e.type.Var("_32316")])]),new e.type.Var("_32317"),new e.type.Var("_32475"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32478"),new e.type.Var("_32482")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32478"),new e.type.Var("_32479")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("elements_gluevars",[new e.type.Var("_32332"),new e.type.Num(0,!1),new e.type.Var("_32476")]),new e.type.Var("__32477")]),new e.type.Term("is",[new e.type.Var("_32372"),new e.type.Term("+",[new e.type.Var("_32475"),new e.type.Var("_32476")])])]),new e.type.Term("=",[new e.type.Var("_32479"),new e.type.Var("_32480")])]),new e.type.Term(",",[new e.type.Term("cell",[new e.type.Var("_32475"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32480"),new e.type.Var("_32481")]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term("[]",[]),new e.type.Var("_32318"),new e.type.Var("_32481"),new e.type.Var("_32482")])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32396")]),new e.type.Var("_32397"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32483"),new e.type.Var("_32487")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("numeric_argument",[new e.type.Var("_32396"),new e.type.Var("_32353"),new e.type.Term(".",[new e.type.Term("|",[]),new e.type.Var("_32316")]),new e.type.Var("_32397"),new e.type.Var("_32317")]),new e.type.Term("=",[new e.type.Var("_32483"),new e.type.Var("_32484")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32484"),new e.type.Var("_32485")])]),new e.type.Term(",",[new e.type.Term("cell",[new e.type.Var("_32372"),new e.type.Var("_32353"),new e.type.Var("_32332"),new e.type.Var("_32485"),new e.type.Var("_32486")]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32353"),new e.type.Term("[]",[]),new e.type.Var("_32318"),new e.type.Var("_32486"),new e.type.Var("_32487")])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32396")]),new e.type.Var("_32397"),new e.type.Var("_32475"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32488"),new e.type.Var("_32493")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("numeric_argument",[new e.type.Var("_32396"),new e.type.Var("_32353"),new e.type.Term(".",[new e.type.Term("+",[]),new e.type.Var("_32316")]),new e.type.Var("_32397"),new e.type.Var("_32317")]),new e.type.Term("=",[new e.type.Var("_32488"),new e.type.Var("_32489")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32489"),new e.type.Var("_32490")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32372"),new e.type.Term("+",[new e.type.Var("_32475"),new e.type.Var("_32353")])]),new e.type.Term("=",[new e.type.Var("_32490"),new e.type.Var("_32491")])]),new e.type.Term(",",[new e.type.Term("cell",[new e.type.Var("_32475"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32491"),new e.type.Var("_32492")]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term("[]",[]),new e.type.Var("_32318"),new e.type.Var("_32492"),new e.type.Var("_32493")])])])])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32349")]),new e.type.Var("_32317"),new e.type.Var("__32494"),new e.type.Var("__32495"),new e.type.Var("__32496"),new e.type.Var("_32497"),new e.type.Var("_32500")]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term(",",[new e.type.Term("==",[new e.type.Var("_32317"),new e.type.Term("[]",[])]),new e.type.Term("=",[new e.type.Var("_32497"),new e.type.Var("_32498")])]),new e.type.Term(",",[new e.type.Term("throw",[new e.type.Term("error",[new e.type.Term("domain_error",[new e.type.Term("non_empty_list",[]),new e.type.Term("[]",[])]),new e.type.Term("//",[new e.type.Term("cells",[]),new e.type.Num(5,!1)])])]),new e.type.Term("=",[new e.type.Var("_32498"),new e.type.Var("_32499")])])]),new e.type.Term(",",[new e.type.Term("throw",[new e.type.Term("error",[new e.type.Term("domain_error",[new e.type.Term("format_string",[]),new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Var("_32349")])]),new e.type.Term("//",[new e.type.Term("cells",[]),new e.type.Num(5,!1)])])]),new e.type.Term("=",[new e.type.Var("_32497"),new e.type.Var("_32500")])])]),new e.type.Term("=",[new e.type.Var("_32499"),new e.type.Var("_32500")])])),new e.type.Rule(new e.type.Term("cells",[new e.type.Var("_32396"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Var("_32332"),new e.type.Var("_32318"),new e.type.Var("_32504"),new e.type.Var("_32506")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("upto_what",[new e.type.Var("_32501"),new e.type.Term("~",[])]),new e.type.Var("_32396"),new e.type.Var("_32316")]),new e.type.Term("=",[new e.type.Var("_32501"),new e.type.Term(".",[new e.type.Var("__32502"),new e.type.Var("__32503")])])]),new e.type.Term("=",[new e.type.Var("_32504"),new e.type.Var("_32505")])]),new e.type.Term("cells",[new e.type.Var("_32316"),new e.type.Var("_32317"),new e.type.Var("_32372"),new e.type.Term(".",[new e.type.Term("chars",[new e.type.Var("_32501")]),new e.type.Var("_32332")]),new e.type.Var("_32318"),new e.type.Var("_32505"),new e.type.Var("_32506")])]))],"format_number_chars/2":[new e.type.Rule(new e.type.Term("format_number_chars",[new e.type.Var("N0"),new e.type.Var("Chars")]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("N"),new e.type.Var("N0")]),new e.type.Term("number_chars",[new e.type.Var("N"),new e.type.Var("Chars")])]))],"n_newlines/3":[new e.type.Rule(new e.type.Term("n_newlines",[new e.type.Num(0,!1),new e.type.Var("_32507"),new e.type.Var("_32508")]),new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32507"),new e.type.Var("_32508")])])),new e.type.Rule(new e.type.Term("n_newlines",[new e.type.Var("_32360"),new e.type.Var("_32509"),new e.type.Var("_32512")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(">",[new e.type.Var("_32360"),new e.type.Num(0,!1)]),new e.type.Term("is",[new e.type.Var("_32358"),new e.type.Term("-",[new e.type.Var("_32360"),new e.type.Num(1,!1)])])]),new e.type.Term("=",[new e.type.Var("_32509"),new e.type.Var("_32510")])]),new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("_32510"),new e.type.Term(".",[new e.type.Term("newline",[]),new e.type.Var("_32511")])]),new e.type.Term("n_newlines",[new e.type.Var("_32358"),new e.type.Var("_32511"),new e.type.Var("_32512")])])]))],"upto_what/4":[new e.type.Rule(new e.type.Term("upto_what",[new e.type.Term("[]",[]),new e.type.Var("_32513"),new e.type.Var("_32514"),new e.type.Var("_32517")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("_32514"),new e.type.Term(".",[new e.type.Var("_32513"),new e.type.Var("_32515")])]),new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32515"),new e.type.Var("_32516")])])]),new e.type.Term("=",[new e.type.Var("_32517"),new e.type.Term(".",[new e.type.Var("_32513"),new e.type.Var("_32516")])])])),new e.type.Rule(new e.type.Term("upto_what",[new e.type.Term(".",[new e.type.Var("_32518"),new e.type.Var("_32349")]),new e.type.Var("_32513"),new e.type.Term(".",[new e.type.Var("_32518"),new e.type.Var("_32520")]),new e.type.Var("_32522")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32520"),new e.type.Var("_32521")])]),new e.type.Term("upto_what",[new e.type.Var("_32349"),new e.type.Var("_32513"),new e.type.Var("_32521"),new e.type.Var("_32522")])])),new e.type.Rule(new e.type.Term("upto_what",[new e.type.Term("[]",[]),new e.type.Var("__32523"),new e.type.Var("_32524"),new e.type.Var("_32524")]),new e.type.Term("true",[]))],"groups_of_three/3":[new e.type.Rule(new e.type.Term("groups_of_three",[new e.type.Term(".",[new e.type.Var("_32525"),new e.type.Term(".",[new e.type.Var("_32526"),new e.type.Term(".",[new e.type.Var("_32518"),new e.type.Term(".",[new e.type.Var("_32527"),new e.type.Var("_32528")])])])]),new e.type.Var("_32529"),new e.type.Var("_32533")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32529"),new e.type.Var("_32530")])]),new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("_32530"),new e.type.Term(".",[new e.type.Var("_32525"),new e.type.Term(".",[new e.type.Var("_32526"),new e.type.Term(".",[new e.type.Var("_32518"),new e.type.Var("_32531")])])])]),new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("_32531"),new e.type.Term(".",[new e.type.Term(",",[]),new e.type.Var("_32532")])]),new e.type.Term("groups_of_three",[new e.type.Term(".",[new e.type.Var("_32527"),new e.type.Var("_32528")]),new e.type.Var("_32532"),new e.type.Var("_32533")])])])])),new e.type.Rule(new e.type.Term("groups_of_three",[new e.type.Var("_32354"),new e.type.Var("_32534"),new e.type.Var("_32535")]),new e.type.Term("seq",[new e.type.Var("_32354"),new e.type.Var("_32534"),new e.type.Var("_32535")]))],"cell/5":[new e.type.Rule(new e.type.Term("cell",[new e.type.Var("_32330"),new e.type.Var("_32331"),new e.type.Var("_32536"),new e.type.Var("_32537"),new e.type.Var("_32540")]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term(",",[new e.type.Term("==",[new e.type.Var("_32536"),new e.type.Term("[]",[])]),new e.type.Term("=",[new e.type.Var("_32537"),new e.type.Var("_32538")])]),new e.type.Term("true",[])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("reverse",[new e.type.Var("_32536"),new e.type.Var("_32332")]),new e.type.Term("=",[new e.type.Var("_32537"),new e.type.Var("_32539")])]),new e.type.Term("=",[new e.type.Var("_32539"),new e.type.Term(".",[new e.type.Term("cell",[new e.type.Var("_32330"),new e.type.Var("_32331"),new e.type.Var("_32332")]),new e.type.Var("_32540")])])])]),new e.type.Term("=",[new e.type.Var("_32538"),new e.type.Var("_32540")])]))],"numeric_argument/5":[new e.type.Rule(new e.type.Term("numeric_argument",[new e.type.Var("Ds"),new e.type.Var("Num"),new e.type.Var("Rest"),new e.type.Var("Args0"),new e.type.Var("Args")]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=",[new e.type.Var("Ds"),new e.type.Term(".",[new e.type.Term("*",[]),new e.type.Var("Rest")])]),new e.type.Term("=",[new e.type.Var("Args0"),new e.type.Term(".",[new e.type.Var("Num"),new e.type.Var("Args")])])]),new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("numeric_argument_",[new e.type.Var("Ds"),new e.type.Var("Rest")]),new e.type.Var("Ns")]),new e.type.Term(",",[new e.type.Term("foldl",[new e.type.Term("plus_times10",[]),new e.type.Var("Ns"),new e.type.Num(0,!1),new e.type.Var("Num")]),new e.type.Term("=",[new e.type.Var("Args0"),new e.type.Var("Args")])])])]))],"numeric_argument_/4":[new e.type.Rule(new e.type.Term("numeric_argument_",[new e.type.Term(".",[new e.type.Var("_32527"),new e.type.Var("_32403")]),new e.type.Var("_32340"),new e.type.Var("_32541"),new e.type.Var("_32546")]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term(",",[new e.type.Term("member",[new e.type.Var("_32527"),new e.type.Term(".",[new e.type.Term("0",[]),new e.type.Term(".",[new e.type.Term("1",[]),new e.type.Term(".",[new e.type.Term("2",[]),new e.type.Term(".",[new e.type.Term("3",[]),new e.type.Term(".",[new e.type.Term("4",[]),new e.type.Term(".",[new e.type.Term("5",[]),new e.type.Term(".",[new e.type.Term("6",[]),new e.type.Term(".",[new e.type.Term("7",[]),new e.type.Term(".",[new e.type.Term("8",[]),new e.type.Term(".",[new e.type.Term("9",[]),new e.type.Term("[]",[])])])])])])])])])])])]),new e.type.Term("=",[new e.type.Var("_32541"),new e.type.Var("_32542")])]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("number_chars",[new e.type.Var("_32358"),new e.type.Term(".",[new e.type.Var("_32527"),new e.type.Term("[]",[])])]),new e.type.Term("=",[new e.type.Var("_32542"),new e.type.Var("_32543")])]),new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("_32543"),new e.type.Term(".",[new e.type.Var("_32358"),new e.type.Var("_32544")])]),new e.type.Term("numeric_argument_",[new e.type.Var("_32403"),new e.type.Var("_32340"),new e.type.Var("_32544"),new e.type.Var("_32545")])])])]),new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("_32340"),new e.type.Term(".",[new e.type.Var("_32527"),new e.type.Var("_32403")])]),new e.type.Term("=",[new e.type.Var("_32541"),new e.type.Var("_32546")])])]),new e.type.Term("=",[new e.type.Var("_32545"),new e.type.Var("_32546")])]))],"plus_times10/3":[new e.type.Rule(new e.type.Term("plus_times10",[new e.type.Var("D"),new e.type.Var("N0"),new e.type.Var("N")]),new e.type.Term("is",[new e.type.Var("N"),new e.type.Term("+",[new e.type.Var("D"),new e.type.Term("*",[new e.type.Var("N0"),new e.type.Num(10,!1)])])]))],"radix_error/4":[new e.type.Rule(new e.type.Term("radix_error",[new e.type.Term("lowercase",[]),new e.type.Var("_32547"),new e.type.Var("_32548"),new e.type.Var("_32549")]),new e.type.Term("format_",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("d",[]),new e.type.Term(".",[new e.type.Term("r",[]),new e.type.Term("[]",[])])])])])]),new e.type.Term(".",[new e.type.Var("_32547"),new e.type.Term("[]",[])]),new e.type.Var("_32548"),new e.type.Var("_32549")])),new e.type.Rule(new e.type.Term("radix_error",[new e.type.Term("uppercase",[]),new e.type.Var("_32547"),new e.type.Var("_32550"),new e.type.Var("_32551")]),new e.type.Term("format_",[new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("~",[]),new e.type.Term(".",[new e.type.Term("d",[]),new e.type.Term(".",[new e.type.Term("R",[]),new e.type.Term("[]",[])])])])])]),new e.type.Term(".",[new e.type.Var("_32547"),new e.type.Term("[]",[])]),new e.type.Var("_32550"),new e.type.Var("_32551")]))],"integer_to_radix/4":[new e.type.Rule(new e.type.Term("integer_to_radix",[new e.type.Var("I0"),new e.type.Var("R"),new e.type.Var("Which"),new e.type.Var("Cs")]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("I"),new e.type.Var("I0")]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("integer",[new e.type.Var("I")]),new e.type.Term("true",[])]),new e.type.Term("throw",[new e.type.Term("error",[new e.type.Term("type_error",[new e.type.Term("integer",[]),new e.type.Var("I")]),new e.type.Term("/",[new e.type.Term("integer_to_radix",[]),new e.type.Num(4,!1)])])])]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("integer",[new e.type.Var("R")]),new e.type.Term("true",[])]),new e.type.Term("throw",[new e.type.Term("error",[new e.type.Term("type_error",[new e.type.Term("integer",[]),new e.type.Var("R")]),new e.type.Term("/",[new e.type.Term("integer_to_radix",[]),new e.type.Num(4,!1)])])])]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("\\+",[new e.type.Term("between",[new e.type.Num(2,!1),new e.type.Num(36,!1),new e.type.Var("R")])]),new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("radix_error",[new e.type.Var("Which"),new e.type.Var("R")]),new e.type.Var("Es")]),new e.type.Term("throw",[new e.type.Term("error",[new e.type.Term("domain_error",[new e.type.Term("format_string",[]),new e.type.Var("Es")]),new e.type.Term("/",[new e.type.Term("integer_to_radix",[]),new e.type.Num(4,!1)])])])])]),new e.type.Term("true",[])]),new e.type.Term(",",[new e.type.Term("digits",[new e.type.Var("Which"),new e.type.Var("Ds")]),new e.type.Term(",",[new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("<",[new e.type.Var("I"),new e.type.Num(0,!1)]),new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("Pos"),new e.type.Term("abs",[new e.type.Var("I")])]),new e.type.Term("phrase",[new e.type.Term("integer_to_radix_",[new e.type.Var("Pos"),new e.type.Var("R"),new e.type.Var("Ds")]),new e.type.Var("Cs0"),new e.type.Term(".",[new e.type.Term("-",[]),new e.type.Term("[]",[])])])])]),new e.type.Term(";",[new e.type.Term("->",[new e.type.Term("=:=",[new e.type.Var("I"),new e.type.Num(0,!1)]),new e.type.Term("=",[new e.type.Var("Cs0"),new e.type.Term(".",[new e.type.Term("0",[]),new e.type.Term("[]",[])])])]),new e.type.Term("phrase",[new e.type.Term("integer_to_radix_",[new e.type.Var("I"),new e.type.Var("R"),new e.type.Var("Ds")]),new e.type.Var("Cs0")])])]),new e.type.Term("reverse",[new e.type.Var("Cs0"),new e.type.Var("Cs")])])])])])])]))],"integer_to_radix_/5":[new e.type.Rule(new e.type.Term("integer_to_radix_",[new e.type.Num(0,!1),new e.type.Var("__32552"),new e.type.Var("__32553"),new e.type.Var("_32554"),new e.type.Var("_32555")]),new e.type.Term(",",[new e.type.Term("!",[]),new e.type.Term("=",[new e.type.Var("_32554"),new e.type.Var("_32555")])])),new e.type.Rule(new e.type.Term("integer_to_radix_",[new e.type.Var("_32556"),new e.type.Var("_32547"),new e.type.Var("_32403"),new e.type.Var("_32559"),new e.type.Var("_32562")]),new e.type.Term(",",[new e.type.Term(",",[new e.type.Term(",",[new e.type.Term("is",[new e.type.Var("_32557"),new e.type.Term("mod",[new e.type.Var("_32556"),new e.type.Var("_32547")])]),new e.type.Term(",",[new e.type.Term("nth0",[new e.type.Var("_32557"),new e.type.Var("_32403"),new e.type.Var("_32527")]),new e.type.Term("is",[new e.type.Var("_32558"),new e.type.Term("//",[new e.type.Var("_32556"),new e.type.Var("_32547")])])])]),new e.type.Term("=",[new e.type.Var("_32559"),new e.type.Var("_32560")])]),new e.type.Term(",",[new e.type.Term("=",[new e.type.Var("_32560"),new e.type.Term(".",[new e.type.Var("_32527"),new e.type.Var("_32561")])]),new e.type.Term("integer_to_radix_",[new e.type.Var("_32558"),new e.type.Var("_32547"),new e.type.Var("_32403"),new e.type.Var("_32561"),new e.type.Var("_32562")])])]))],"digits/2":[new e.type.Rule(new e.type.Term("digits",[new e.type.Term("lowercase",[]),new e.type.Term(".",[new e.type.Term("0",[]),new e.type.Term(".",[new e.type.Term("1",[]),new e.type.Term(".",[new e.type.Term("2",[]),new e.type.Term(".",[new e.type.Term("3",[]),new e.type.Term(".",[new e.type.Term("4",[]),new e.type.Term(".",[new e.type.Term("5",[]),new e.type.Term(".",[new e.type.Term("6",[]),new e.type.Term(".",[new e.type.Term("7",[]),new e.type.Term(".",[new e.type.Term("8",[]),new e.type.Term(".",[new e.type.Term("9",[]),new e.type.Term(".",[new e.type.Term("a",[]),new e.type.Term(".",[new e.type.Term("b",[]),new e.type.Term(".",[new e.type.Term("c",[]),new e.type.Term(".",[new e.type.Term("d",[]),new e.type.Term(".",[new e.type.Term("e",[]),new e.type.Term(".",[new e.type.Term("f",[]),new e.type.Term(".",[new e.type.Term("g",[]),new e.type.Term(".",[new e.type.Term("h",[]),new e.type.Term(".",[new e.type.Term("i",[]),new e.type.Term(".",[new e.type.Term("j",[]),new e.type.Term(".",[new e.type.Term("k",[]),new e.type.Term(".",[new e.type.Term("l",[]),new e.type.Term(".",[new e.type.Term("m",[]),new e.type.Term(".",[new e.type.Term("n",[]),new e.type.Term(".",[new e.type.Term("o",[]),new e.type.Term(".",[new e.type.Term("p",[]),new e.type.Term(".",[new e.type.Term("q",[]),new e.type.Term(".",[new e.type.Term("r",[]),new e.type.Term(".",[new e.type.Term("s",[]),new e.type.Term(".",[new e.type.Term("t",[]),new e.type.Term(".",[new e.type.Term("u",[]),new e.type.Term(".",[new e.type.Term("v",[]),new e.type.Term(".",[new e.type.Term("w",[]),new e.type.Term(".",[new e.type.Term("x",[]),new e.type.Term(".",[new e.type.Term("y",[]),new e.type.Term(".",[new e.type.Term("z",[]),new e.type.Term("[]",[])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])]),null),new e.type.Rule(new e.type.Term("digits",[new e.type.Term("uppercase",[]),new e.type.Term(".",[new e.type.Term("0",[]),new e.type.Term(".",[new e.type.Term("1",[]),new e.type.Term(".",[new e.type.Term("2",[]),new e.type.Term(".",[new e.type.Term("3",[]),new e.type.Term(".",[new e.type.Term("4",[]),new e.type.Term(".",[new e.type.Term("5",[]),new e.type.Term(".",[new e.type.Term("6",[]),new e.type.Term(".",[new e.type.Term("7",[]),new e.type.Term(".",[new e.type.Term("8",[]),new e.type.Term(".",[new e.type.Term("9",[]),new e.type.Term(".",[new e.type.Term("A",[]),new e.type.Term(".",[new e.type.Term("B",[]),new e.type.Term(".",[new e.type.Term("C",[]),new e.type.Term(".",[new e.type.Term("D",[]),new e.type.Term(".",[new e.type.Term("E",[]),new e.type.Term(".",[new e.type.Term("F",[]),new e.type.Term(".",[new e.type.Term("G",[]),new e.type.Term(".",[new e.type.Term("H",[]),new e.type.Term(".",[new e.type.Term("I",[]),new e.type.Term(".",[new e.type.Term("J",[]),new e.type.Term(".",[new e.type.Term("K",[]),new e.type.Term(".",[new e.type.Term("L",[]),new e.type.Term(".",[new e.type.Term("M",[]),new e.type.Term(".",[new e.type.Term("N",[]),new e.type.Term(".",[new e.type.Term("O",[]),new e.type.Term(".",[new e.type.Term("P",[]),new e.type.Term(".",[new e.type.Term("Q",[]),new e.type.Term(".",[new e.type.Term("R",[]),new e.type.Term(".",[new e.type.Term("S",[]),new e.type.Term(".",[new e.type.Term("T",[]),new e.type.Term(".",[new e.type.Term("U",[]),new e.type.Term(".",[new e.type.Term("V",[]),new e.type.Term(".",[new e.type.Term("W",[]),new e.type.Term(".",[new e.type.Term("X",[]),new e.type.Term(".",[new e.type.Term("Y",[]),new e.type.Term(".",[new e.type.Term("Z",[]),new e.type.Term("[]",[])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])])]),null)],"format/2":[new e.type.Rule(new e.type.Term("format",[new e.type.Var("Fs"),new e.type.Var("Args")]),new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("format_",[new e.type.Var("Fs"),new e.type.Var("Args")]),new e.type.Var("Cs")]),new e.type.Term("maplist",[new e.type.Term("write",[]),new e.type.Var("Cs")])]))],"format/3":[new e.type.Rule(new e.type.Term("format",[new e.type.Var("Stream"),new e.type.Var("Fs"),new e.type.Var("Args")]),new e.type.Term(",",[new e.type.Term("phrase",[new e.type.Term("format_",[new e.type.Var("Fs"),new e.type.Var("Args")]),new e.type.Var("Cs")]),new e.type.Term("maplist",[new e.type.Term("write",[new e.type.Var("Stream")]),new e.type.Var("Cs")])]))],"unique_variable_names/2":[new e.type.Rule(new e.type.Term("unique_variable_names",[new e.type.Var("Term"),new e.type.Var("VNs")]),new e.type.Term(",",[new e.type.Term("term_variables",[new e.type.Var("Term"),new e.type.Var("Vs")]),new e.type.Term("foldl",[new e.type.Term("var_name",[]),new e.type.Var("Vs"),new e.type.Var("VNs"),new e.type.Num(0,!1),new e.type.Var("_")])]))],"seq/3":[new e.type.Rule(new e.type.Term("seq",[new e.type.Term("[]",[]),new e.type.Var("_32563"),new e.type.Var("_32563")]),new e.type.Term("true",[])),new e.type.Rule(new e.type.Term("seq",[new e.type.Term(".",[new e.type.Var("_32345"),new e.type.Var("_32332")]),new e.type.Term(".",[new e.type.Var("_32345"),new e.type.Var("_32565")]),new e.type.Var("_32566")]),new e.type.Term("seq",[new e.type.Var("_32332"),new e.type.Var("_32565"),new e.type.Var("_32566")]))],"var_name/4":[new e.type.Rule(new e.type.Term("var_name",[new e.type.Var("V"),new e.type.Term("=",[new e.type.Var("Name"),new e.type.Var("V")]),new e.type.Var("Num0"),new e.type.Var("Num")]),new e.type.Term(",",[new e.type.Term(":",[new e.type.Term("charsio",[]),new e.type.Term("fabricate_var_name",[new e.type.Term("numbervars",[]),new e.type.Var("Name"),new e.type.Var("Num0")])]),new e.type.Term("is",[new e.type.Var("Num"),new e.type.Term("+",[new e.type.Var("Num0"),new e.type.Num(1,!1)])])]))]}},E=["format_/4","format/2","format/3"];typeof module<"u"?module.exports=function(V){new(e=V).type.Module(M,k(),E,{dependencies:["lists","charsio"]})}:new e.type.Module(M,k(),E,{dependencies:["lists","charsio"]})}(pl),function(e){var M=function(k){k.type.Session.prototype.promiseConsult=function(E,g){return this.thread.promiseConsult(E,g)},k.type.Thread.prototype.promiseConsult=function(E,g){var V=this;return new Promise(function(S,w){var l={};l.context_module=(g=void 0===g?{}:g).context_module,l.text=g.text,l.html=g.html,l.url=g.url,l.file=g.file,l.script=g.script,l.success=S,l.error=w,V.consult(E,l)})},k.type.Session.prototype.promiseQuery=function(E){return this.thread.promiseQuery(E)},k.type.Thread.prototype.promiseQuery=function(E){var g=this;return new Promise(function(V,S){g.query(E,{success:V,error:S})})},k.type.Session.prototype.promiseAnswer=function(){return this.thread.promiseAnswer()},k.type.Thread.prototype.promiseAnswer=function(){var E=this;return new Promise(function(g,V){E.answer({success:g,fail:g,error:V,limit:V})})},k.type.Session.prototype.promiseAnswers=function(){return this.thread.promiseAnswers()},k.type.Thread.prototype.promiseAnswers=async function*(){for(;;){var E=await this.promiseAnswer();if(!1===E)return;yield E}}};typeof module<"u"?module.exports=function(k){M(e=k)}:M(e)}(pl),function(e){var V=function(){return{"future/3":function(m,v,b){var C=b.args[0],L=b.args[1],R=b.args[2];if(e.type.is_variable(R))if(e.type.is_callable(L)){var X=new e.type.Future,te=new e.type.Thread(m.session),I=m.next_free_variable();m.session.renamed_variables={};var re=new e.type.Term(",",[new e.type.Term("call",[L.rename(m)]),new e.type.Term("=",[I,C.rename(m)])]);te.add_goal(re);var ce={success:function(we){X.done(we.links[I.id],1)},error:function(we){X.done(we.args[0],3)},fail:function(){X.done(null,2)},limit:function(){te.answer(ce)}};te.answer(ce),m.prepend([new e.type.State(v.goal.replace(new e.type.Term("=",[R,X])),v.substitution,v)])}else m.throw_error(e.error.type("callable",L,b.indicator));else m.throw_error(e.error.instantiation(b.indicator))},"future_done/1":function(m,v,b){var C=b.args[0];e.type.is_variable(C)?m.throw_error(e.error.instantiation(b.indicator)):e.type.is_future_object(C)?0!==C.state&&m.success(v):m.throw_error(e.error.type("future",C,b.indicator))},"await/2":function(m,v,b){var C=b.args[0],L=b.args[1];if(e.type.is_variable(C))m.throw_error(e.error.instantiation(b.indicator));else{if(e.type.is_future_object(C))return C.then(function(R){m.prepend([new e.type.State(v.goal.replace(new e.type.Term("=",[L,R])),v.substitution,v)]),m.again()},function(R){m.throw_error(R),m.again()},function(){m.again()}),!0;m.throw_error(e.error.type("future",C,b.indicator))}},"future_all/2":function(m,v,b){var C=b.args[0],L=b.args[1];if(e.type.is_variable(C)||!e.type.is_variable(L))m.throw_error(e.error.instantiation(b.indicator));else if(e.type.is_list(C)){for(var R=[],X=C;e.type.is_term(X)&&"./2"===X.indicator;){var te=X.args[0];if(e.type.is_variable(te))return void m.throw_error(e.error.instantiation(b.indicator));if(!e.type.is_future_object(te))return void m.throw_error(e.error.type("future",te,b.indicator));R.push(te),X=X.args[1]}if(e.type.is_variable(X))return void m.throw_error(e.error.instantiation(b.indicator));if(!e.type.is_empty_list(X))return void m.throw_error(e.error.type("list",C,b.indicator));var I=new e.type.Future;I.expected=R.length;for(var re=[],ce=0;ce<R.length;ce++)R[ce].then(function(we){return function(_){if(re[we]=_,I.expected--,0===I.state&&0===I.expected){for(var pe=new e.type.Term("[]",[]),me=re.length-1;me>=0;me--)pe=new e.type.Term(".",[re[me],pe]);I.done(pe,1)}}}(ce),function(we){I.expected--,I.done(we,3)},function(){I.expected--,I.done(null,2)});m.prepend([new e.type.State(v.goal.replace(new e.type.Term("=",[L,I])),v.substitution,v)])}else m.throw_error(e.error.type("list",C,b.indicator))},"future_any/2":function(m,v,b){var C=b.args[0],L=b.args[1];if(e.type.is_variable(C)||!e.type.is_variable(L))m.throw_error(e.error.instantiation(b.indicator));else if(e.type.is_list(C)){for(var R=[],X=C;e.type.is_term(X)&&"./2"===X.indicator;){var te=X.args[0];if(e.type.is_variable(te))return void m.throw_error(e.error.instantiation(b.indicator));if(!e.type.is_future_object(te))return void m.throw_error(e.error.type("future",te,b.indicator));R.push(te),X=X.args[1]}if(e.type.is_variable(X))return void m.throw_error(e.error.instantiation(b.indicator));if(!e.type.is_empty_list(X))return void m.throw_error(e.error.type("list",C,b.indicator));var I=new e.type.Future;I.expected=R.length;for(var ce=0;ce<R.length;ce++)R[ce].then(function(we){I.expected--,0===I.state&&I.done(we,1)},function(we){I.expected--,I.done(we,3)},function(){I.expected--,0===I.expected&&I.done(null,2)});m.prepend([new e.type.State(v.goal.replace(new e.type.Term("=",[L,I])),v.substitution,v)])}else m.throw_error(e.error.type("list",C,b.indicator))}}},S=["future/3","await/2","future_done/1","future_all/2","future_any/2"],w=function(m){m.type.is_future_object=function(v){return v instanceof m.type.Future},m.type.order.push(m.type.Future),m.type.Future=function(){this.value=null,this.state=0,this.tasks=[]},m.type.Future.prototype.done=function(v,b){if(this.value=v,this.state=b,1===b)for(;this.tasks.length>0;)this.tasks.shift().resolve(this.value);else if(3===b)for(;this.tasks.length>0;)this.tasks.shift().reject(this.value);else if(2===b)for(;this.tasks.length>0;)this.tasks.shift().fail()},m.type.Future.prototype.then=function(v,b,C){1===this.state?v(this.value):3===this.state?b(this.value):2===this.state?C():this.tasks.push({resolve:v,reject:b,fail:C})},m.type.Future.prototype.toString=function(v){return null!==this.value?"<future>("+this.value.toString(v)+")":"<future>(pending)"},m.type.Future.prototype.clone=function(){var v=new m.type.Future;v.state=this.state,v.value=this.value},m.type.Future.prototype.equals=function(v){return v===this},m.type.Future.prototype.rename=function(v){return this},m.type.Future.prototype.variables=function(){return[]},m.type.Future.prototype.apply=function(v){return this},m.type.Future.prototype.unify=function(v,b){return v===this?new m.type.Substitution:null},m.type.Future.prototype.interpret=function(v){return m.error.instantiation(v)},m.type.Future.prototype.compare=function(v){return this===v?0:this<v?-1:1},m.type.Future.prototype.toJavaScript=function(){if(!Promise)return null;var v=this;return new Promise(function(b,C){v.then(function(L){b(L.toJavaScript())},function(L){C(L.toJavaScript())},function(){C(!1)})})},m.fromJavaScript.test.promise=function(v){return Promise&&v instanceof Promise},m.fromJavaScript.conversion.promise=function(v){var b=new m.type.Future;return v.then(function(C){b.done(m.fromJavaScript.apply(C),1)}).catch(function(C){b.done(m.fromJavaScript.apply(C),3)}),b}},l=function(){return{meta_predicates:{"future/3":new e.type.Term("future",[new e.type.Term("?"),new e.type.Num(0,!1),new e.type.Term("-")])}}};typeof module<"u"?module.exports=function(m){w(e=m),new e.type.Module("concurrent",V(),S,l())}:(w(e),new e.type.Module("concurrent",V(),S,l()))}(pl);